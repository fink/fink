2012-06-28  Justin F. Hallett  <thesin@users.sourceforge.net>

	* PkgVersion.pm: add auto DEBIAN/md5sums file generation, this is the
	  first rough draft, 'find' call should be File::Find, and maybe
	  'md5sum' call might need to be a pure perl function at somepoint.

2011-11-06  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm (cmd_dumpinfo): add missing parameter (recently added
	to prototype) to PkgVersion::get_env calls

2011-10-12  Alexander Hansen  <alexkhansen@users.sourceforge.net>

	* Bootstrap.pm:  support 10.7.2.

2011-10-12  Daniel Johnson  <daniel@daniel-johnson.org>

	* VirtPackage.pm:  support App Store Growl.app as well as
	legacy prefpane.

2011-09-23  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: no longer enforce "BDep:fink>=0.24.12" for use of
	PatchFile (nothing older than that would be usable now anyway)

2011-08-21  Daniel Macks  <dmacks@netspace.org>

	* Checksum/MD5.pm: @! might be defined-but-blank if require()
	succeeds

2011-08-16  Alexander Hansen  <alexkhansen@users.sourceforge.net>

	* Bootstrap.pm:  support 10.7.1.

2011-08-05  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: get_env shares cache for all $phase that don't
	have have $phase-specific effects on ENV

2011-08-05  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: InstallScript disables UseMaxBuildJobs (separate
	get_env result) rather than appending -j1 to MAKEFLAGS

2011-08-05  Alexander Hansen  <alexkhansen@users.sourceforge.net>

	* PkgVersion.pm: Use VirtPackage.pm instead, and check whether
	Xcode is actually installed (by VirtPackage.pm's definition).

2011-08-05  Alexander Hansen  <alexkhansen@users.sourceforge.net>

	* PkgVersion.pm: Now that 10.4 is unsupported, can use
	the output of "xcodebuild -version" output to get the
	Xcode version for bug reports--in case of failures before
	fink-virtual-pkgs is present and in the PATH.

2011-08-04  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: MaxBuildJobs flag _pre_pends to
	SetMAKEFLAGS (give priority to local .info flag)

2011-07-20  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: MAKEFLAGS:-j1 during InstallScript even if
	MaxBuildJobs

2011-07-26  Hanspeter Niederstrasser  <nieder@users.sourceforge.net>

	* PkgVersion.pm:  Turn MaxBuildJobs on by default.

2011-07-20  Dave Morrison  <drm@finkproject.org>

	* Bootstrap.pm: 10.7 gets its own tree

2011-07-20  Daniel Macks  <dmacks@netspace.org>

	* Configure.pm: Don't prompt for tree:unstable on 10.7

2011-07-14  Dave Morrison  <drm@finkproject.org>

	* Bootstrap.pm: build libgettext8 during bootstrap
	* Bootstrap.pm: recognize darwin 11.0.0

2011-07-11  Dave Morrison  <drm@finkproject.org>

	* Package.pm: activate the 10.4-EOL subdirectory

2011-07-10  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Pass single-arch flags for DefaultScript:modulebuild

2011-07-06  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: More obvious (and correctly named) call

2011-07-05  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Limit work-around for "perl5.12 but no perl5.12.3"
	interp to 10.7 and override CC and CXX in its MakeMaker

2011-07-05  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm, Validation.pm: Implement
	DefaultScript:modulebuild for perl Build.PL using same paths as
	makemaker default

2011-07-04  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Validate DefaultScript values

2011-07-01  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: PatchFileN and DefaultScript got into 0.30.0 release

2011-06-23  Alexander Hansen  <alexkhansen@users.sourceforge.net>

	* Bootstrap.pm:  support 10.6.8.

2011-06-11  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: import jhowarth's ensure_clang_prefix: create
	path-prefix-clang/gcc and friends as wrapper around clang etc.
	Use it on dist:10.7.

2011-05-26  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: packages may have buried include/ headers dir

2011-05-24  Alexander Hansen  <alexkhansen@users.sourceforge.net>

	* PkgVersion.pm: add Fink distribution and Xcode version to
	error output.  Don't suggest emailing maintainer for packages
	which are maintained by the project.  Print out suggestions
	for what to post in a bug report, from Hanspeter Niederstrasser.

2011-05-17  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: fix loss of "," in replacements list of 'fink info'
	when "fink-obsolete-packages" is in the middle of the dep-list

2011-05-09  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: bug in single-arch wrapper for gcc-4.0

2011-05-04  Daniel Macks  <dmacks@netspace.org>

	* Configure.pm: bump conf_file_compat_version so users can select
	MaxBuildJobs

2011-04-28  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm, Checksum.pm, Services.pm: function invocation of
	UNIVERSAL::isa is deprecated and may not exist in new perl-core

2011-04-28  Daniel Macks  <dmacks@netspace.org>

	* Bootstrap.pm, PkgVersion.pm: Guess at system perl version for
	10.7 (which doesn't have full-versioned name?)

2011-04-25  Daniel Macks  <dmacks@netspace.org>

	* Bootstrap.pm, Services.pm: Guesses at kernel info for 10.7

2011-04-15  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Allow Description of OBSOLETE packages to contain
	the package-name (might be substring of new pkg to recommend)

2011-03-21  Alexander Hansen  <alexkhansen@users.sourceforge.net>

	* Bootstrap.pm: Support 10.6.7

2011-03-14  Dave Morrison  <drm@finkproject.org>

	* Package.pm: fangism's hack: check $File::Find::fullname for undef

2011-03-13  Daniel Macks  <dmacks@netspace.org>

	* Checksum/MD5.pm, Checksum/SHA1.pm: check for failure of
	require() rather than package-variable (may be defined prior to
	load failure)

2011-03-11  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: phase_unpack needs get_env because might
	--build-as-nobody, which requires finkified environment

2011-02-25  Alexander Hansen  <alexkhansen@users.sourceforge.net>

	* Notify/Growl.pm:  Courtesy of Daniel Johnson.  Add support for
	Cocoa::Growl as well as Mac::Growl to allow Growl notifications
	to work on 10.6.

2011-02-24  Daniel Macks  <dmacks@netspace.org>

	* Package.pm: "10.4-EOL" subdir for 10.4 .info files vs for !10.4
	still in parent and sibling dirs (for all 10.x if no such subdir
	present).  Left deactivated for now.

2011-02-19  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Allow "-" in %p when scanning for bad gtk-doc
	links: sync regex with what gtkdoc-fixxref appears to use

2011-02-16  Daniel Macks  <dmacks@netspace.org>

	* Selfupdate/CVS.pm:  Syntax cleanup

2011-02-15  Alexander Hansen  <alexkhansen@users.sourceforge.net>

	* Selfupdate/CVS.pm:  Implement HTP proxy support.

2011-02-10  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Policy prohibits subdirs of %p/bin and %p/sbin

2011-02-10  Alexander Hansen <alexkhansen@users.sourceforge.net>

	* VirtPackage.pm: Get rid of -iokit flag in check_x11_version, as
	it is a no-op on 10.4, and hangs on 10.5 and 10.6.  Fixes
	detection of X11 version on 10.5 with XQuartz-2.6.0 .  Thanks to
	ilgaz for reporting the bug in X11 detection, and Martin Costabel
	for tracking it down.

2011-01-15  Dave Morrison  <drm@finkproject.org>

	* all: update copyright

2011-01-06  Alexander Hansen <alexkhansen@users.sourceforge.net>

	* Bootstrap.pm: Support 10.6.6
	* Config.pm: Print out enabled Trees in "fink --version"

2010-11-21  Daniel Macks  <dmacks@netspace.org>

	* SelfUpdate.pm: 10.4 folks auto-switched to "10.4"
	selfupdatemethod that will contain snapshot/branch of finkinfo/ at
	the point we stop supporting it

2010-11-11  Daniel Macks  <dmacks@netspace.org>

	* Package.pm: Also re-cache .info whose timestamp has gone
	backwards (e.g., overwriting local mod with older/archived copy)

2010-11-11  Dave Morrison  <drm@pfinkproject.org>

	* Bootstrap.pm: Recognize new hardware too (11" MB Air)

2010-11-11  Alexander Hansen <alexkhansen@users.sourceforge.net>

	* Bootstrap.pm: Support 10.6.5

2010-10-20  Benjamin Reed <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: Enable system-java-dev if on 10.6 and
	JDK headers exist.

2010-10-01  Remi Mommsen <remigius.mommsen@cern.ch>

	* Validation.pm: Fix validation of gtk-doc URLs in case that
	$basepath has multiple directory levels, e.g. /opt/fink vs /sw

2010-09-22  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Make sure .dylib have absolute install_name

2010-09-21  Andreas Gockel  <fink@unixforge.de>

	* NetAccess.pm: always use -O with wget so we always get the
	filename we expect

2010-09-05  Daniel Macks  <dmacks@netspace.org>

	* PkgConfig.pm: Remove trailing newline ConfigureParams before
	appending TestConfigureParams to it (avoid embedded newline)

2010-09-05  Daniel Macks  <dmacks@netspace.org>

	* Text/ParseWords.pm: Sync local clone with upstream (CPAN
	Text::ParseWords) 3.27

2010-08-27  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Roll back empty-podfiles-dir check (base-files
	now guarantees there is a file in it)

2010-08-17  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm (get_script): Revert default TestScript to
	previous behavior (not "make test" for anything other than perl).

2010-08-14  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm (get_script): New .info DefaultScript: field
	overrides automatic %{default_script} and implicit %c settings
	* Validation.pm: Require new enough fink if using DefaultScript:

2010-07-19  Daniel Macks  <dmacks@netspace.org>

	* Configure.pm: Make sure Buildpath is absolute

2010-07-16  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Try harder to catch PostInst-vs-UpdatePOD

2010-07-04  Dave Morrison  <drm@finkproject.org>

	* Config.pm: new functions &apt_tree_default and &fink_tree_default
	* Config.pm: &write_sources_list now calls &apt_tree_default
	* Bootstrap.pm: &add_injected_to_trees now takes $distribution
	as an argument, and calls Fink::Config::fink_tree_default
	* Bootstrap.pm: exit with message if new argument of
	&add_injected_to_trees is absent

2010-06-30  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: note about an UpdatePOD problem
	* Validation.pm: Type:perl PostInst for UpdatePOD can break if no
	podfiles/ files in .deb

2010-06-27  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: pkgconfig misparses "-Xlinker" in .pc
	files (multiword flag, should use -Wl, instead)

2010-06-14  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: rename script_error() to package_error().
	Improve error-reporting if .deb val fails.

2010-06-15  Alexander Hansen <alexkhansen@users.sourceforge.net>

	* Bootstrap.pm:  Add OS 10.6.4 as a supported version.

2010-06-13  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: factor out new script_error() method from
	run_script(), make sure it runs after phase:test also.

2010-06-09  Daniel Johnson  <daniel@daniel-johnson.org>

	* NetAccess.pm: Add "aria2" as download method

2010-06-08  Daniel Macks  <dmacks@netspace.org>

	* Package.pm (get_all_providers): convert to named-parameters API,
	add option to give only highest-priority Tree for each %f that
	Provides a package.
	* PkgVersion.pm: resolver use get_all_providers option for
	single-Tree Provides instead of local implementation
	* Engine.pm: update to use new Package::get_all_providers syntax

2010-06-07  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: dependency resolver should only consider
	highest-priority Tree for each %f that Provides a package

2010-06-03  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: get_source_suffices renamed get_source_suffixes,
	but keep older as wrapper to avoid breaking public interface

2010-06-03  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: List known --format values in 'fink list --help'

2010-06-03  Alexander Hansen <alexkhansen@users.sourceforge.net>

	* Bootstrap.pm:  Add OS 10.6.3 as a supported version.

2010-06-03  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Add 'fink list --format=dotty-build', gives
	Depends+BuildDepends of family (cf. --format=dotty that does
	Depends of specific package)

2010-05-10  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Fallback try otool64 -L if otool -L fails

2010-05-06  Alexander Hansen  <alexkhansen@users.sourceforge.net>

	* Validation.pm:  Accept DYLIB_STUB as also being a dylib.

2010-03-16  Max Horn  <max@quendi.de>

	* Checksum.pm: Fix example to talk about "checksum" types/modules,
	instead of "notifier" types/modules

2010-03-16  Max Horn  <max@quendi.de>

	* Fix up indention in several *.pm files

2010-02-27  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Newline before msg that may be emitted during
	progressbar display

2010-01-09  David Fang  <fangism@users.sourceforge.net>

	* PkgVersion.pm: compiler_wrapper finds %p/bin for ccache-default

2010-01-06  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: easier/clearer control of env vars propagated over
	sudo

2010-01-06  Daniel Macks  <dmacks@netspace.org>

	* all: update copyright

2009-11-23  Augusto Devegili  <monipol@users.sourceforge.net>

	* Configure.pm: Comsetics
	* PkgVersion.pm: Call $config-param() only once and warn user if
	MaxBuildJobs is not a positive integer

2009-11-21  Augusto Devegili  <monipol@users.sourceforge.net>

	* PkgVersion.pm: Handle the Commercial licence

2009-11-11  Augusto Devegili  <monipol@users.sourceforge.net>

	* Configure.pm: Accept only positive integers for MaxBuildJobs, and loop
	while input is not valid
	* PkgVersion.pm: Set -j only if MaxBuildJobs > 1

2009-11-11  Augusto Devegili  <monipol@users.sourceforge.net>

	* Configure.pm, PkgVersion.pm, Validation.pm: New MaxBuildJobs fink.conf
	entry and UseMaxBuildJobs package description field as an opt-in for
	MAKEFLAGS += -j

2009-11-09  Alexander Hansen  <alexkhansen@users.sourceforge.net>

	* Bootstrap.pm: Support OS X 10.6.2

2009-10-31  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Fix cleanup_debs to use "current arch" in .deb
	filename instead of _ delimiter.

2009-10-18  Augusto Devegili <monipol@users.sourceforge.net>

	* PkgVersion.pm: Fix comment typos

2009-10-17  Augusto Devegili <monipol@users.sourceforge.net>

	* VirtPackage.pm: Slightly faster 64-bit CPU detection

2009-10-17  Dave Morrison  <drm@finkproject.org>

	* VirtPackage.pm: don't test ALL executables of the form /usr/bin/gcc*,
	only the ones we need

2009-09-27  Dave Morrison  <drm@finkproject.org>

	* Bootstrap.pm: Support OS X 10.6.1

2009-09-23  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Use DESTDIR for type:perl default InstallScript
	instead of overriding PREFIX.
	http://rt.cpan.org/Public/Bug/Display.html?id=47396

2009-08-30  Augusto Devegili  <monipol@users.sourceforge.net>

	* VirtPackage.pm: Support Growl beta versions

2009-08-27  Dave Morrison  <drm@finkproject.org>

	* Bootstrap.pm: Support OS X 10.6.0

2009-08-27  Daniel Macks  <dmacks@netspace.org>

	* Configure.pm, Package.pm: Add 'fink configure' option to disable
	NoAutoIndex if it's set

2009-08-27  Daniel Macks  <dmacks@netspace.org>

	* Package.pm: Warn user if NoAutoIndex is enabled

2009-08-19  Augusto Devegili  <monipol@users.sourceforge.net>

	* SelfUpdate/rsync.pm: Fix rsync server TIMESTAMP validation

2009-08-10  Alexander Hansen  <akh@finkproject.org>

	* Bootstrap.pm:	Support OS 10.5.8

2009-07-14  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: 'scrollkeeper' pkg got replaced by 'rarian-compat'

2009-07-06  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Don't let packages overwrite global icon index
	with their own

2009-06-28  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm: Calculate full_trees correctly when prefix has
	multiple directory components.

2009-06-22  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Validation.pm: Allow @executable_path and friends to be private libs

2009-06-17  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Try harder to omit versioning in dotty dependency output

2009-06-05  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Validation.pm: Allow %p/opt and %p/local

2009-05-18  Daniel Macks  <dmacks@netspace.org>

	* Bootstrap.pm: Auto-update apt-dev if new version available

2009-05-18  Daniel Macks  <dmacks@netspace.org>

	* Bootstrap.pm: Auto-update apt-dev if new version available

2009-05-15  Dave Morrison  <drm@finkproject.org>

	* Services.pm: aptget_lockwait now specifies the full path to the
	apt-get-lockwait executable, or, if that is unavailable, the full
	path to the apt-get executable
	* FinkVersion.pm.in: take the current architecture into account when
	reporting the default binary distribution
	* Configure.pm: don't ask about the unstable tree if a SelfUpdateMethod
	has not been chosen yet (necessary change for successful bootstrapping)

2009-05-13  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Services.pm: Fix typo in dpkg_lockwait.

2009-05-12  Dave Morrison  <drm@finkproject.org>

	* Bootstrap.pm: recognize 10.5.7

2009-05-12  Dave Morrison  <drm@finkproject.org>

	* Bootstrap.pm: refactor bootstrap
	* Package.pm: don't use the disk cache during the first part of
	bootstrap (because we may be running under a different perl than fink
	will eventually use, and Storable.pm may be incompatible)

2009-05-11  Dave Morrison  <drm@finkproject.org>

	* VirtPackage.pm: we don't use system perl on 10.5/x86_64
	* PkgVersion.pm: use the correct perl for Type: perl on 10.5/x86_64

2009-05-11  Daniel Macks  <dmacks@netspace.org>

	* Config.pm: Defer loading of FinkVersion until actually used

2009-05-11  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Don't store undef env var.

2009-05-09  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: -m mode has some effect in other actions and also has
	lots of effects beyond one options token.

2009-05-08  Dave Morrison  <drm@finkproject.org>

	* Services.pm: dpkg_lockwait now specifies the full path to the
	dpkg_lockwait executable, but if that is unavailable, defaults to
	the first available dpkg executable in the PATH

2009-05-01  Dave Morrison  <drm@finkproject.org>

	* Bootstrap.pm: check_host now gets a third optional argument $arch,
	and one of the messages it generates is now $arch-dependent

2009-04-28  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Put .patch in .deb of splitoffs as well as parent

2009-04-28  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Engine.pm, PkgVersion.pm, Validation.pm: allow PatchFileN(-MD5)?

2009-04-17  Dave Morrison  <drm@finkproject.org>

	* PkgVersion.pm: use architecture-based compiler wrapper when
	appropriate

2009-04-17  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: Allow Type: bundle in splitoffs

2009-04-14  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Undo change to PACKAGELOOP that is no longer needed

2009-04-13  Dave Morrison  <drm@finkproject.org>

	* PkgVersion.pm: don't use new style perl compiling for 5.10.0 under
	powerpc architecture

2009-04-09  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Fix bug in gtk-doc "non-fink" URL detection

2009-04-09  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm, Validation.pm: .info "Patch" field is gone

2009-04-09  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: kill %a harder

2009-04-08  Dave Morrison  <drm@finkproject.org>

	* Validation.pm: allow -64bit type under x86_64
	* Validation.pm: make the default value for the Shlibs architecture
	field depend on the fink Architecture

2009-04-08  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Only print first occurrence of each bad gtk-doc
	line

2009-04-07  Dave Morrison  <drm@finkproject.org>

	* Validation.pm: allow x86_64 as an Architecture value

2009-04-07  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Catch gtk-doc HREF to non-fink locations

2009-04-06  Daniel Macks  <dmacks@netspace.org>

	* Notify/XTerm.pm: non-standard implemenation, but need stub here
	so that fink.conf:NotifyPlugin token can be resolved

2009-04-05  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm, Validation.pm: %a is gone

2009-04-05  Dave Morrison  <drm@finkproject.org>

	* PkgVersion.pm: use architecture-dependent path-prefix on <redacted>
	* Validation.pm: warn if any item in a License field other than
	the last one is not conditionalized
	* PkgVersion.pm: paradoxically, no special library location is
	required for -64bit variants under x86_64 architecture

2009-04-04  Dave Morrison  <drm@finkproject.org>

	* Validation.pm: Allow "new-style" GPL license fields which follow
	the string "GPL" with either "2", "3", or "23", optionally followed
	by "+".

2009-04-03  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: fink.conf NotifyPlugin "xterm" token controls xterm
	title-bar notifications

2009-04-02  Dave Morrison  <drm@finkproject.org>

	* PkgVersion.pm: use Services::version_cmp when comparing two
	perl versions.

2009-04-02  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Check if .deb has pathnames that would collide on
	case-insensitive FS

2009-04-01  Dave Morrison  <drm@finkproject.org>

	* Bootstrap.pm: add a warning to developers as a code comment

2009-03-31  Dave Morrison  <drm@finkproject.org>

	* FinkVersion.pm.in: don't evaluate the substitution strings

2009-03-30  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Engine.pm: re-enable the xterm escapes, should be fixed now.

2009-03-30  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: .info Patch and %a/*.patch are now fully deprecated

2009-03-29  Dave Morrison  <drm@finkproject.org>

	* PkgVersion.pm: for perl 5.10.0 (and later?), change the $perlcmd
	to "/usr/bin/arch -%m perl5.10.0".  (This implies that we cannot
	have perl 5.10.0 on 10.4.)

2009-03-21  Dave Morrison  <drm@finkproject.org>

	* Config.pm, FinkVersion.pm.in, PkgVersion.pm, Services.pm: refactor
	get_arch().  The fink architecture is now fixed once and for all (at
	bootstrap, for new installations), with value stored in FinkVersion.pm

2009-03-17  Dave Morrison  <drm@finkproject.org>

	* PkgVersion.pm: default value for VERSIONER_PERL_PREFER_32_BIT
	under Darwin10 and i386; and only use the gpp 10.6 prefix under i386

2009-03-07  Dave Morrison  <drm@finkproject.org>

	* all: updated Copyright notice

2009-03-06  Dave Morrison  <drm@finkproject.org>

	* Bootstrap.pm: Allow another version of perl.

2009-02-19  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: Fix some bogus perl provides, also change xcode
	to not be BuildDependsOnly, since some packages legitimately depend
	upon it at runtime.

2008-12-24  Sebastien Maret  <bmaret@users.sourceforge.net>

	* Engine.pm, PkgVersion.pm: Set proxy env vars before calling
	apt-get. Fixes bug #2040507

2008-12-19  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Warn for older (not MD5-protected) patch syntaxes

2008-12-18  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Also store patchfile in .deb

2008-12-12  Alexander Hansen  <akh@finkproject.org>

	* Bootstrap.pm:  Recognize 10.5.6

2008-11-30  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Remove weird whitespace in diagnostic msg.

2008-11-17  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Fix "hardcoded /sw in .patch" check: %exp map
	isn't a .info field

2008-11-13  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Include list of modern dependencies in 'fink info'
	for obsolete packages

2008-10-28  Dave Morrison  <drm@finkproject.org>

	* Bootstrap.pm: add function get_selfupdatetrees()

2008-10-27  Dave Morrison  <drm@finkproject.org>

	* Bootstrap.pm, Services.pm: modernize bootstrap

2008-10-21  Dave Morrison  <drm@finkproject.org>

	* VirtPackage.pm: correct an error in what system perl 5.8.8 "provides"

2008-10-05  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: _filename_versioning_cmp() API change: always
	returns a defined number

2008-10-05  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: factor out _filename_versioning_cmp() function

2008-10-04  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: Check for definedness before doing string-compare

2008-10-02  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Prohibit relative paths for --logfile

2008-10-02  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: dumpinfo: remember that DocFiles has conditionals

2008-09-21  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Treat "." and "+" as literals in cleanup --debs

2008-09-16  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Ignore epoch in cleanup --debs (%e not in .deb filename)

2008-09-16  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: "scrollkeeper" is dead...only "rarian-compat"
	supplies scrollkeeper-update

2008-09-15  Alexander Hansen <akh@finkproject.org>

	* Bootstrap.pm: Support 10.5.5

2008-09-01  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Any .dylib filename (not just actual files) can
	require BuildDependsOnly if there is also header.

2008-07-17  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Don't exit a sub with a next

2008-08-28  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Validation.pm: Allow 'AppBundles' in splitoffs.

2008-07-26  Dave Morrison  <drm@finkproject.org>

	* Bootstrap.pm: EOL for 10.3

2008-07-08  Dave Morrison  <drm@finkproject.org>

	* Selfupdate/point.pm: switch URL retrieval to &fetch_url_to_file so
	that we can pass the option 'try_all_mirrors' which forces re-download
	of the file even if it already exists; also, exit with a more
	informative message

2008-07-01  Alexander Hansen <akh@finkproject.org>

	* Bootstrap.pm: Support 10.5.4

2008-06-29  Dave Morrison  <drm@finkproject.org>

	* Configure.pm: clarify message issued after enabling unstable

2008-06-28  Dave Morrison  <drm@finkproject.org>

	* SelfUpdate/CVS.pm, SelfUpdate/rsync.pm:  More descriptive warning
	message for users who need to install XCode prior to choosing the
	cvs or rsync selfupdate method.
	* SelfUpdate.pm: prevent changing update method *to* point, rather
	than *from* point.

2008-06-20  Daniel Macks  <dmacks@netspace.org>

	* Command.pm: Break up long filename list passed to system(chown)

2008-06-20  Dave Morrison  <drm@finkproject.org>

	* FinkVersion.pm.in: bindist 0.9.0

2008-06-19  Dave Morrison  <drm@finkproject.org>

	* Validation.pm: Allow $basepath/Library/ to be installed (but with
	nothing below it other than what is already allowed, i.e.,
	$basepath/Library/Frameworks)
	* Bootstrap.pm: revise the installation message on 10.5

2008-06-10  Daniel Macks  <dmacks@netspace.org>

	* Bootstrap.pm: Allow callers of copy_description() to specify
	filenames instead of forcing $package.info.in -> $package.info

2008-06-07  Dave Morrison  <drm@finkproject.org>

	* Validation.pm: Refer Shlibs violators to the packaging manual.

2008-05-29  Alexander Hansen <akh@finkproject.org>

	* Bootstrap.pm:  recognize 9.2.2 Darwin kernel--noted by gecko2 on IRC for a late 2007 Macbook.

2008-05-11  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Ignore less-specifically-versioned filenames for
	private Shlibs

2008-05-11  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Fix precedence error in check for wrong Files vs Shlibs

2008-05-07  Dave Morrison  <drm@finkproject.org>

	* Validation.pm: Improve the Shlibs error message

2008-05-06  Dave Morrison  <drm@finkproject.org>

	* Validation.pm: Try again with an error message when Shlibs is missing an entry, explaining what to do for both public and private shlibs.

2008-05-01  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Allow %p/Library/Frameworks

2008-03-06  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Shlibs error should list install_name, not actual filename

2008-03-21  Alexander Hansen <akh@finkproject.org>

	* Bootstrap.pm:  recognize 9.2.2 Darwin kernel--noted by gecko2 on IRC for a late 2007 Macbook.

2008-03-10  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Don't rely on beta versions of fink itself

2008-03-06  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: rarian-compat is replacing scrollkeeper

2008-03-02  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Don't create blank shlibs files in .deb

2008-02-29  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Wildcard in directory-components in Files breaks
	system(install)

2008-02-17  Dave Morrison  <drm@finkproject.org>

	* Bootstrap.pm: recognize 10.5.2

2008-02-06  Daniel Macks  <dmacks@netspace.org>

	* VirtPackage.pm: undef is possible return from package_from_pkgconfig

2008-01-14  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Better toleration of whitespace in .info Shlibs field

2008-01-12  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: rarian-compat is new version of scrollkeeper in pangocairo

2008-01-02  Daniel Macks  <dmacks@netspace.org>

	* CheckSum/*.pm, Finally/*.pm, Notify/*.pm, SelfUpdate/*.pm, Text/*.pm, version/*.pm, *.pm, FinkVersion.pm.in: updated Copyright notice

2007-12-18  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Complain if a .la contains -framework not in -Wl,

2007-11-24  Daniel Macks  <dmacks@netspace.org>

	* NetAccess.pm: Tell user if overriding the DownloadMethod pref.

2007-11-24  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: If cleanup-obsoletes removes all obsolete packages,
	also remove the fink-obsolete-packages package

2007-12-11  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: add support for .pc file virtuals, force x11
	release version based on existence of certain .pc virtuals

2007-11-27  Alexander Hansen <akh@finkproject.org>

	* Bootstrap.pm: recognize 10.5.1 and 10.4.11 .

2007-11-24  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Add note to "fink info" for BDO packages.

2007-11-05  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Services.pm: skip the gcc_select check since
	  readlink("/usr/bin/gcc") should be just as correct, and faster

2007-11-01  Dave Morrison  <drm@finkproject.org>

	* Bootstrap.pm: improved message about the state of fink on leopard
	* PkgVersion.pm: improved message to users when a build fails

2007-10-27  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Services.pm: some leopard/xcode upgrades end up leaving
	gcc_select around; make sure it's ignored on 10.5 and higher.

2007-10-24  Dave Morrison  <drm@finkproject.org>

	* Bootstrap.pm: recognize 10.5.0, but with a warning about upgrades
	* Bootstrap.pm: in modify_description, make a substitution on
	@DISTRIBUTION@, and wrap the file in Info4, unless $distribution =
	10.3 or 10.4.  Also, use readlink() to determine the distribution when
	running scripts

2007-10-23  Dave Morrison  <drm@finkproject.org>

	* Bootstrap.pm: Split out add_injected_to_trees as a separate function,
	so that it can be used in fink's postinstall.pl.
	* SelfUpdate.pm: Update the UpdatePackages listed in fink.conf.

2007-10-17  Daniel Macks  <dmacks@netspace.org>

	* NetAccess.pm: timeout/selection for "already have the source"
	same as Mirror.pm's "try next site"

2007-10-16  Daniel Macks  <dmacks@netspace.org>

	* Checksum/*.pm, Finally/*.pm, Notify/*.pm, SelfUpdate/*.pm, *.pm, finkVersion.pm.in:  Update FSF street address.

2007-10-15  Christian Schaffner  <chris01@users.sourceforge.net>

	* SelfUpdate.pm: Try to remove old metadata first before switching
	to new update method, since the first step might fail, if there
	is a left over fink.old directory.
	* SelfUpdate/CVS.pm: Check for remaining fink.old directory first
	before removing metadata. Allow for :local: cvs access. Add more
	details about merging old trees.
	And fix hardlinking: the perl 'link' function returns true on
	success.

2007-10-15  Christian Schaffner  <chris01@users.sourceforge.net>

	* SelfUpdate/Point.pm: Fix typo, and show warning message if
	trying to change to point from any other method.

2007-10-13  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: For cleanup_deb, only look at filename, not
	path (dist in path might not be "correct" in merged-dist package
	collection). Parse .deb filenames to look up %f instead of reading
	whole PDB first.

2007-10-13  Daniel Macks  <dmacks@netspace.org>

	* SelfUpdate/CVS.pm: Use link() instead of system(ln) to avoid
	shell metachar problems.

2007-10-13  Daniel Macks  <dmacks@netspace.org>

	* Validator.pm: More explicit error message when .deb shlibs can't
	be read. Set failure if bad private Shlibs syntax. Require
	BD:fink>=0.27.99 if using private Shlibs syntax.

2007-10-11  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm, Validator.pm: Added "private" Shlibs support; if a
	Shlibs entry starts with just "!" it will get ignored by the validator.

2007-10-02  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* SelfUpdate/CVS.pm, SelfUpdate/rsync.pm: update to use
	SelfUpdateTrees for determining which trees get pulled out.
	Also, fix 10.5 support for rsync.

2007-09-30  Christian Schaffner  <chris01@users.sourceforge.net>

	* VirtPackage.pm: Remove debugging output

2007-09-28  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Engine.pm, Mirror.pm: Implement *cough* "feature requests" from
	http://tdk.hates-software.com/2007/09/28/a3fbc1b7.html    ;)

2007-09-18  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Detect .deb containing global file updated at
	installation-time by perl modules

2007-09-04  Christian Schaffner  <chris01@users.sourceforge.net>

	* PkgVersion.pm: Remove get_desc* methods again, since the pdb dump script
	now directly calls param_default_expanded

2007-09-03  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Consistent naming of accessors for their field-names

2007-09-03  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Consolidate special-purpose private function into
	more generic one.

2007-09-02  Dave Morrison  <drm@finkproject.org>

	* Bootstrap.pm: *really* disable extended attribute copying when
	calling tar
	* PkgVersion.pm: prevent Apple's perl from building perlmods fat

2007-09-02  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: param_default_expanded can override default %-exp
	map and more flexibly handle %-exp errors.

2007-08-29  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Simplify parameter passing; document wrappers in
	terms of their back-end.

2007-08-28  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: A couple of useful accessor methods used by the
	PDB-generation code.

2007-08-02  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Engine.pm: Implement fink list --format=dotty.

2007-08-01  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Validation.pm: Handle /usr/X11 packages properly.

2007-07-15  Daniel Macks  <dmacks@netspace.org>

	* VirtPackage.pm: use apple's own plist parser

2007-07-19  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: add an "xcode" virtual package

2007-07-18  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: fix sysctl call to actually be used  ;)

2007-07-15  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Don't complain if a valid .dylib filename is also
	a substring of another one.

2007-07-09  Dave Morrison  <drm@finkproject.org>

	* Bootstrap.pm: recognize 10.4.10

2007-06-18  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Document 'dumpinfo -pall'

2007-06-13  Daniel Macks  <dmacks@netspace.org>

	* VirtPackage.pm: as out to tempfile instead of a.out pollution

2007-06-13  Daniel Macks  <dmacks@netspace.org>

	* version.pm, version/vpp.pm: Import from version-0.7203
	(license=same-as-perl), convert to a Fink:: subnamespace.

2007-06-12  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: fix detection of modular X.org and cctools,
	fix 64-bit detection to not assume sysctl return-code means
	success

2007-06-12  Dave Morrison  <drm@finkproject.org>

	* Services.pm: test for existence of gcc_select before calling it

2007-06-11  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Services.pm: fall back to checking the gcc symlink if
	gcc_select is not there
	* VirtPackage.pm: give a warning when they have an incomplete
	X11 install

2007-06-06  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Accept .dylib whose install_name isn't absolute

2007-06-06  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Warn if .info has "SplitOff1" instead of "SplitOff"

2007-05-31  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Backport conditional ConfFiles and Shlibs to
	branch_0.27 (target release 0.27.2)

2007-05-31  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Check minimum BDep:fink if conditional ConfFiles
	or Shlibs. Add named-parameters API to validate_info_component

2007-05-30  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm, PkgVersion.pm: Support conditionals for ConfFiles

2007-05-17  Daniel Macks  <dmacks@netspace.org>

	* SelfUpdate.pm, SelfUpdate/rsync.pm: only clear old metadata when
	changing update methods

2007-05-17  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Handle whitespace and comments in Shlibs field

2007-05-17  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Support conditionals for Shlibs lines via new
	get_shlibs_field accessor
	* Engine.pm: Use new Shlibs accessor for dumpinfo

2007-05-16  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Catch non-binaries listed in Shlibs; refactor
	nested if() so most-likely-to-fail is outer; streamline handling
	of Shlibs; flag libfoo.dylib in package with Shlibs:libfoo.1.dylib

2007-05-15  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Cache DEBIAN/shlibs contents, don't use otool if
	it doesn't exist

2006-04-30  Christian Schaffner  <chris01@users.sourceforge.net>

	* Engine.pm: Don't try to validate dummy packages without info file.

2007-04-20  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: pull stat($otool) out of a loop

2007-04-20  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Validation.pm: validate the Shlibs field for consistency

2007-04-18  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: add the info file to the debian control.

2007-04-17  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Standardize terminology as selfupdate "method".

2007-04-13  Dave Morrison  <drm@finkproject.org>

	* VirtPackage.pm: Parse a greater variety of Version strings from the
	X server.

2007-04-13  Daniel Macks  <dmacks@netspace.org>

	* SelfUpdate.pm: Standardize terminology as selfupdate "method";
	add selfupdate --list-methods flag.

2007-04-12  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm, SelfUpdate.pm: 'fink plugins' does SU->list_plugins,
	which lists the status of all SU::* method classes.
	* SelfUpdate/*: add $VERSION package variable.
	* SelfUpdate/point.pm: check_system fails if different method is active

2007-04-10  Daniel Macks  <dmacks@netspace.org>

	* SelfUpdate/*: merge from selfupdate_classes branch

2007-04-10  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm, SelfUpdate.pm: Engine::cmd_selfupdate now passes off
	to new SelfUpdate::cmd_selfupdate, which implements getopt
	interface for 'fink selfupdate' to control all selfupdate actions.
	* Engine.pm: all other cmd_selfupdate* now wrappers around
	cmd_selfupdate, simulating appropriate cmdline flags

2007-04-10  Daniel Macks  <dmacks@netspace.org>

	* Config.pm, Engine.pm, FinkVersion.pm.in, SelfUpdate.pm: merge
	from selfupdate_classes branch

2007-04-04  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* NetAccess.pm: Use lftpget if available and appropriate

2007-03-22  Daniel Macks  <dmacks@netspace.org>

	* Package.pm: Use prompt_selection for menu of choices

2007-03-19  Daniel Macks  <dmacks@netspace.org>

	* Config.pm: Display actual Distribution string in 'fink -V'

2007-03-19  Daniel Macks  <dmacks@netspace.org>

	* Config.pm: Fix error msg if using new_with_properties

2007-03-17  Dave Morrison  <drm@finkproject.org>

	* PkgVersion.pm: modify an error message

2007-03-14  Dave Morrison  <drm@finkproject.org>

	* Bootstrap.pm: recognize 10.4.9

2007-03-13  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Remind user to selfupdate after enabling unstable

2007-03-04  Dave Morrison  <drm@finkproject.org>

	* FinkVersion.pm.in, PkgVersion.pm, Validation.pm: implement Info4

2007-03-01  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* NetAccess.pm: Added a "DownloadTimeout" option for curl
	so that the mirror doesn't wait indefinitely on bad
	downloads.
	* Base.pm: Updated to lower-case keys in new_from_properties
	like new_from_file does.

2007-02-26  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Scrap the high-level warning for splitoff
	validation failure.

2007-02-25  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: added support for detecting /usr/X11

2007-02-17  Dave Morrison  <drm@finkproject.org>

	* SysState.pm: when advising the user to run 'apt-get', the advice
	should be to run 'sudo apt-get'

2007-02-15  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* NetAccess.pm: set a timeout on curl, since it can block
	indefinitely while connecting, in some cases
	* Engine.pm, SelfUpdate.pm: Fink::Scanpackages is wrong, use
	the cvs/rsync stat files if available, or fallback to
	Fink::Package->db_index otherwise

2007-02-14  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* NetAccess.pm: allow a hash-ref as argument to
	fetch_url_to_file instead of a string of position-dependent
	entries; also added a try_all_mirrors option to fetch_url_to_file
	to skip asking retries, and attempt to retry until all mirrors
	are exhausted

2007-02-03  Remi Mommsen <remigius.mommsen@cern.ch>

	* Package.pm, PkgVersion.pm: Let the user choose which provider
	to install in order to satisfy a virtual (provided) package.
	(feature request 1635337)

2007-01-25  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: If explicit interp in *Script, don't ignore
	subshell return code.

2007-01-23  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: Automatically update (or warn) if index is
	out of date

2007-01-22  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Make sure explicit --logfile can be written.

2007-01-21  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Bootstrap.pm, Engine.pm: use env to set PERL5LIB since 10.4.9
	sudo strips it

2007-01-16  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: default to "make -j1" in install scripts

2007-01-11  Daniel Macks  <dmacks@netspace.org>

	* Config.pm, SelfUpdate.pm, VirtPackage.pm: update website URL

2007-01-10  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Don't summarize BDO/obsolete violations if the
	warnings themselves aren't displayed.

2006-12-29  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: execute(): quick-exit if passed null script

2006-12-29  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Warn and ignore .info instead of dieing when
	instantiating with a Package field containing unknown %-exps
	* Services.pm: New expand_percent2 with more flexible API than the
	old expand_percent (which has been rewritten as a wrapper around
	the new one)

2006-12-14  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Factor .info filename checks out of .info
	validation function; fix Package %-exp issues.

2006-12-13  Dave Morrison  <drm@finkproject.org>

	* Validation.pm: Document the problem with %type_raw[] in package
	name.

2006-12-10  Christian Schaffner  <chris01@users.sourceforge.net>

	* Engine.pm: Don't try to validate virtual packages.

2006-12-09  Christian Schaffner  <chris01@users.sourceforge.net>

	* Config.pm: Add a new function that returns a ref to a hash with keys
	'user', 'group', and 'user:group' and values depending on whether the
	option build_as_nobody is set or not. Also checks for the existence of the
	user and group 'fink-bld' if build_as_nobody is set. If either the user or
	the group 'fink-bld' can't be found the method falls back to 'nobody'.
	* PkgVersion.pm: Use build_as_user_group to chown and chgrp
	* Services.pm: Use build_as_user_group to run build script

2006-12-08  Dave Morrison  <drm@finkproject.org>

	* Validation.pm: Change allowed filenames for .info file, to:
	invariant packagename, optionally followed by archname, optionally
	follwed by distribution, and finally optionally followed by either
	version or version-revision, each delimited by hyphens.

2006-12-08  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Notify.pm: Allow multiple notifiers (or none). Also allow
	case-insensitive NotifyPlugin spec.
	* Notify/Growl.pm, Notify/Quicksilver.pm, Notify/Say.pm, Notify/Syslog.pm:
	Make strict. Miscellaneous fixes.
	* Notify/Growl.pm: Fix strictness problems. How did this ever work
	before!?

2006-12-07  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Only check first alternative in each OR set for
	being obsolete.

2006-12-07  Dave Morrison  <drm@finkproject.org>

	* SelfUpdate.pm: (Temporarily) disable rsync updating in
	not-yet-released distribution.
	* PkgVersion.pm, Validation.pm: Implement "Distribution" field.

2006-12-06  Dave Morrison  <drm@finkproject.org>

	* Bootstrap.pm: Prepare for the future.

2006-12-05  Dave Morrison  <drm@finkproject.org>

	* Validation.pm: Correct the regex (again) for detecting library
	architecture.

2006-12-05  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Put obsolete packages last when prompting for
	alternative dependencies.

2006-12-05  Daniel Macks  <dmacks@netspace.org>

	* Configure.pm: Add interactive control for enabling "unstable"

2006-12-05  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm, PkgVersion.pm, Validation.pm: Switch to Depends-based
	sentinel of obsolete packages.

2006-12-04  Dave Morrison  <drm@finkproject.org>

	* PkgVersion.pm: Implement the new %type_num[] and %lib percent
	expansions.
	* Validation.pm: Implement the new %type_num[] and %lib percent
        expansions.  Correct the regex for detecting library architecture.
	* PkgVersion.pm: New default for LDFLAGS when building 64bit libs.

2006-12-03  Dave Morrison  <drm@finkproject.org>

	* Validation.pm: Check for correct library architecture at the end
	of each Shlibs entry.  (If present, it should have value 32, 64, or
	32-64.)

2006-11-31  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Validation.pm: utf8 should be allowed, but not sure how to
	check on it; changing the warning to say "non-ASCII" instead of
	"non-standard" for now  :(

2006-11-29  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Implement --env for dumpinfo to display specific env
	vars in a form suitable to be "eval"ed

2006-11-28  Daniel Macks  <dmacks@netspace.org>

	* NetAccess.pm: Don't add the master-mirrors pool if Source is
	already a mirror:master URL.

2006-11-23  Matthew Sachs  <msachs@apple.com>

	* Config.pm: maintainermode should turn on verbose.  Happy
	Thanksgiving!

2006-11-16  Matthew Sachs  <msachs@apple.com>

	* Config.pm: Be a bit stricter about --tests argument checking.

2006-11-14  Matthew Sachs  <msachs@apple.com>

	* Config.pm: Fix for --tests with no value.

2006-11-14  Matthew Sachs  <msachs@apple.com>

	* Config.pm: Add --tests, --validate options.
	* Engine.pm: Ditto.
	* PkgVersion.pm: Ditto, plus fix for uninitialized value warning in
	InfoTest processing.

2006-11-14  Matthew Sachs  <msachs@apple.com>

	* Validation.pm: Don't require TestScript.

2006-11-07  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Fix .svn regex.

2006-10-31  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Warn if .svn/ metadata dir in .deb

2006-10-30  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Remove all obsolete pkgs at once to avoid blockage by
	inter-obsolete dependencies

2006-10-11  Daniel Macks  <dmacks@netspace.org>

	* SelfUpdate.pm: Add POD for lots of functions.

2006-10-04  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Make format_oneline and get_shortdescription not
	truncate if passed a negative length.
	* Engine.pm: Use negative-length instead of "large" value for
	get_shortdescription.

2006-10-04  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Issue a warning if a package has a dependency on
	an obsolete package

2006-10-04  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Rename the flag to "--obsolete-packages"

2006-10-04  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Finish implementing 'fink cleanup --obsoletes'

2006-10-03  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Not a BDO violation to have an obsolete package
	Depends on a BDO:true package

2006-10-03  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: implement is_obsolete method based on Description
	field matching /^[obsolete/i
	* Validation.pm: Allow Description to begin with /^[obsolete/i and
	disable other Description tests if so
	* Engine.pm: Enable --obsoletes --dry-run mode to 'fink cleanup',
	which lists installed is_obsolete packages

2006-10-03  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: TestScript only exists for parent and only in -m
	mode; move Type:perl 'make test' from CompileScript to TestScript

2006-09-30  Dave Morrison  <drm@finkproject.org>

	* Bootstrap.pm: recognize 10.4.8

2006-09-29  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Remember to percent-expand DaemonicName

2006-09-21  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Add --all mode to 'fink cleanup'

2006-09-20  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: cmd_cleanup with no flags acts as --debs --srcs

2006-09-18  Christian Schaffner  <chris01@users.sourceforge.net>

	* Checksum/SHA1.pm: Fix bug in matching of SHA1 line if Digest::<foo>
	  isn't available (e.g. on 10.3). Fix proposed by AIDA Shinra on
	  the fink-devel mailing list on 2006-06-24.


2006-09-17  David Höhn <dmalloc@finkproject.org>

	* NetAccess.pm: add User Agent that transfers fink/$version
	  when a curl or wget is in progress

2006-09-16  Dave Morrison  <drm@finkproject.org>

	* Bootstrap.pm: remove "Using the new 10.4 tree" message (not so new
	  any more!)

2006-09-15  Christian Schaffner  <chris01@users.sourceforge.net>

	* PkgVersion.pm: Don't rebuild .deb that just were downloaded if
	  UseBinaryDist is active. Fixes bug #1518461

2006-09-13  Matthew Sachs  <msachs@apple.com>

	* Validation.pm: Fix validation for InfoTest-less packages.

2006-09-12  Matthew Sachs  <msachs@apple.com>

	* PkgVersion.pm: Support TestSource(N)-Checksum.
	* Validation.pm: Likewise.

2006-09-12  Matthew Sachs  <msachs@apple.com>

	* Engine.pm: Show TestScript in dumpinfo.
	* PkgVersion.pm: Fix for sources inside InfoTest.
	* Validation.pm: Look inside InfoTest.

2006-09-12  Matthew Sachs  <msachs@apple.com>

	* Engine.pm: Allow maintainer mode with dumpinfo.
	* PkgVersion.pm: Implement InfoTest.
	* Validation.pm: Preliminary support for InfoTest.

2006-08-17  Daniel Macks  <dmacks@netspace.org>

	* VirtPackage.pm: Check the perl version of the perl package, not
	the perl running the program.

2006-08-29  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: revise error message to allow post-2.2.1 XCode

2006-08-17  Daniel Macks  <dmacks@netspace.org>

	* VirtPackage.pm: Use perl's own version check feature to check
	perl versions.

2006-08-17  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: No MAKEFLAGS leakage

2006-08-15  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Validation.pm: correction of error message if PatchFile is present
	but BuildDepends on fink is not

2006-08-14  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: POSIX /bin/sh does not support "echo -n"

2006-08-13  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: handle cctools more gracefully, plus more
	specific virtual perl module provides

2006-08-10  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* VirtPackage.pm: rewrite 64bit-cpu to work with both ppc and intel

2006-08-09  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Services.pm: prepare for the future

2006-08-09  Daniel Macks  <dmacks@netspace.org>

	* Scanpackages.pm: Safer assurance of getting perl's core DB_File
	module.

2206-08-08  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Services.pm: allow more complex version strings for darwin, and
	prepare for the future.
	* Bootstrap.pm: allow perl 5.8.8

2006-08-07  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Also allow %n-%v.info as .info filename.

2006-08-03  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: When validating the contents of a file in a .deb,
	only do so if it's a real file (symlinks might be absolute or to
	files in a different .deb)

2006-07-26  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: Fix execute() to resurrect the whole env even if
	sudo alters it.

2006-07-26  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: Fix execute() to pass PERL5LIB even when sudo
	blanks that variable.

2006-07-25  Daniel Macks  <dmacks@netspace.org>

	* Finally/Buildlock.pm: new location for wiki

2006-07-24  Daniel Macks  <dmacks@netspace.org>

	* Status.pm: New disable_reload and is_reload_disabled class
	methods allow temporarily inhibiting check for changes to on-disk
	dpkg status db vs already-loaded copy.
	* Engine.pm, Package.pm: disable dpkg status reloading during
	tight listing loops.

2006-07-20  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Don't be fooled by weird commands in line after #!

2006-07-20  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* VirtPackage.pm: make sure /usr/bin/machine is an executable before
	we call it

2006-07-19  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* VirtPackage.pm: new virtual package "64bit-cpu"

2006-07-12  Daniel Macks  <dmacks@netspace.org>

	* Package.pm: No progress bar interruptions, so no need to cache it

2006-07-12  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Have logfile filename always use parent %n

2006-07-12  Daniel Macks  <dmacks@netspace.org>

	* Package.pm: Clean up diagnostics while caching .info files

2006-07-12  Daniel Macks  <dmacks@netspace.org>

	* Package.pm: Add progress bar for indexer .info processing loop.

2006-07-12  Daniel Macks  <dmacks@netspace.org>

	* Package.pm: Make cache staleness check independent of whether
	STDOUT is a terminal.

2006-07-12  Daniel Macks  <dmacks@netspace.org>

	* Package.pm: Remove unused variable. Check a variable directly
	instead of using a secondary variable for metadata. Factor a
	&get_term_width call out of a loop.

2006-07-11  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Notify.pm: make it so people won't confuse the plugin list
	with installed/uninstalled packages

2006-07-10  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* VirtPackage.pm: test for the existence of $cctools_version before
	applying a comparison operator to it

2006-07-10  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Enable 'cleanup --dpkg-status'

2006-06-29  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: modify &additional_packages to match the changes in
	the set of essential packages (forward-port from branch_0_24)

2006-06-27  Daniel Macks  <dmacks@netspace.org>

	* Bootstrap.pm: Add fink-dpkg-status-cleanup.in to tarball.

2006-06-27  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: recognize 10.4.7

2006-06-23  Daniel Macks  <dmacks@netspace.org>

	* Config.pm, Engine.pm: Don't use FORMAT for heredoc
	terminator (confuses perl-mode).
	* Config.pm: --version includes arch in Distribution

2006-06-23  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Lay groundwork for cleanup --dpkg-status
	* Services.pm: _expand_help: sanity-check the %opts{} passed to
	get_options.

2006-06-22  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: don't internationalize dpkg-bootstrap

2006-06-12  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Validation.pm: allow %p/X11 as a valid path

2006-06-12  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* SelfUpdate.pm: use the $distribution when comparing versions for a
	'point release'

2006-06-02  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Percent-expand before comparing strings.

2006-06-02  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: In Files field, skip if source and target dirs
	are identical.

2006-05-31  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: Don't say "darwin" when we mean "the local kernel"

2006-05-31  Daniel Macks  <dmacks@netspace.org>

	* SelfUpdate.pm: Don't append /cvsroot/fink to mirror types that
	now already have them

2006-05-28  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* SelfUpdate.pm: Use hostnames specified in anonymous-cvs or
	developer-cvs if available

2006-05-24  Daniel Macks  <dmacks@netspace.org>

	* SelfUpdate.pm: Use current hostname for cvs fallback

2006-05-17  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Notify/QuickSilver.pm, Notify/Say.pm: use different osascript syntax
	that's a bit cleaner; also fix QuickSilver to use the new dictionary
	signature

2006-04-27  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Revert Files fix (breaks "Files: foo/a foo")

2006-04-27  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Fix renaming of target file in Files field

2006-04-25  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Don't mkdir the Files target dir for every file copied

2006-04-20  Alexander Hansen  <alexkhansen@users.sourceforge.net>

	* Bootstrap.pm:	Add 10.4.6 to supported OS flavors.

2006-04-19  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Don't crash if apt-cache is not present

2006-04-16  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* NetAccess.pm: pass the checksum type when validating.

2006-04-10  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Validation.pm: Check for %{PatchScript} using the correct case.

2006-04-08  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Validation.pm: Validate PatchScript correctly even when file being
	validated is in the same directory from which 'fink validate' is
	being run; also, recognize %{PatchScript} during validation no matter
	what its case.

2006-03-28  Daniel Macks  <dmacks@netspace.org>

	* Config.pm: Store architecture and debarch in $config object
	("Architecture" and "Debarch", not written to fink.conf) and
	remove exported $debarch. New method mixed_arch checks whether
	local machine matches $config arch.

	* Status.pm: Disable local dpkg when forging arch.

	* Package.pm: Disable saved pdb when forging arch.

	* VirtPackage.pm: Consider all virtuals "uninstalled" when forging
	arch.

	* all: Use $config data instead of $Fink::Config::debarch. Call
	mixed_arch to prevent compiling or doing any other local .deb
	actions if arch is forged.

2006-03-28  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Weaken .info validator settings for dependencies
	and only check each .info file once in -m mode.

2006-03-29  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Scanpackages.pm: Provide a way to get the path to the default cache.
	* Engine.pm: Make Engine::scanpackages more flexible.
	* Engine.pm, PkgVersion.pm: Accommodate changes to Engine::scanpackages.

2006-03-29  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Config.pm: Avoid circular dependency

2006-03-28  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Config.pm: Use FinkVersion::default_binary_version to determine
	if our distro has any bindists or not

2006-03-28  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Use default .info validator settings for dependencies
	in -m mode; use strict settings for explicitly requested pkgs

2006-03-28  Daniel Macks  <dmacks@netspace.org>

	* FinkVersion.pm.in: default_binary_version now returns undef if
	no known bindist

2006-03-27  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Config.pm, FinkVersion.pm.in: 10.4 has a bindist now

2006-03-27  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Config.pm: Use defaults for options.

2006-03-26  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Engine.pm: Pre-calculate some of %to_be_rebuilt, to fix the case where:
		- a parent doesn't need a build, but a splitoff requires it, AND
		- the splitoff is considered by PACKAGELOOP after the parent

2006-03-24  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm: Hardcode path to unversioned perl.

2006-03-24  Daniel Macks  <dmacks@netspace.org>

	* Bootstrap.pm: tar doesn't need --exclude since fink_packages is
	now a complete explicit file list

2006-03-24  Daniel Macks  <dmacks@netspace.org>

	* Bootstrap.pm: switch fink_packagefiles to using
	MakeMaker (MANIFEST* in fink source root)

2006-03-24  Daniel Macks  <dmacks@netspace.org>

	* Bootstrap.pm: Intel OS X now up to darwin8.5.3

2006-03-24  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Use new Buildlock::can_remove method

2006-03-23  Daniel Macks  <dmacks@netspace.org>

	* Finally/Buildlock.pm: Hardcode lock-package PreRm scripts to use
	the same perl interp as fink itself uses

2006-03-23  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Engine.pm: Remove implicit depends on essential, if there are any
	problems cirdan will fix them :-)

2006-03-23  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Finally.pm: Use a pretty OO interface.
	* Finally/BuildConflicts.pm: New module for BuildConflicts removal and
	restoration.
	* Finally/Buildlock.pm: New module for buildlock setting and clearing.
	* Engine.pm: Remove add_finalizer interface, move BuildConflicts removal
	to Finally/BuildConflicts.pm
	* PkgVersion.pm: Add method is_bootstrapping, move buildlock stuff to
	Finally/Buildlock.pm. New scapackages stuff in END.

2006-03-22  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* CLI.pm: Add logging to &capture, fix open-modes problem.

2006-03-22  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: fix cctools-single-module to use a check against the
	cctools version, rather than the overhead of compiling a small dylib;
	fix the broken-gcc check to iterate over the existing gcc packages,
	rather than calling out to cc1plus directly; completely rewrite the gcc
	check(s) to only call gcc once per executable

2006-03-22  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Finally.pm: Don't change the exit status!
	* Bootstrap.pm: Fix intermitting inability to inject. Remove obsolete
	function get_packageversion.

2006-03-22  Daniel Macks  <dmacks@netspace.org>

	* SelfUpdate.pm: Engine doesn't export, so don't import its functions

2006-03-22  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: aptget_update now returns boolean success value, is
	inhibited if user has disabled binary mode, and has apt's own
	"quiet" controlled by fink's "verbose" flag. $quiet parameter now
	controls execute() verbosity.
	* SelfUpdate.pm: Use Engine's aptget_update instead of rewriting
	it.

2006-03-22  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Config.pm: Don't whine if etc/apt doesn't exist.

2006-03-22  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Finally.pm: Don't run in forks.

2006-03-21  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: In -m mode, validate .info of deps also, not just
	explicitly requested pkgs.

2006-03-21  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Engine.pm: New BuildConflicts routine that should work.

2006-03-21  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Engine.pm: De-blockify &finalize.
	* Engine.pm, PkgVersion.pm: Add a finally to remove buildlocks on build
	failure.
	* Config.pm: Make --no-use-binary-dist actually work.

2006-03-21  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Finally.pm: New way to create cleanup functions.
	* Engine.pm: Adapt to new Finally, add 'finalizer' method to schedule a
	function to run when process finishes.
	* Engine.pm, PkgVersion.pm: Move AutoScanpackages to happen just after
	buildlock removal for each package. The apt-get update is only run at the
	end of a build, using the new finalizer mechanism.

2006-03-21  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Services.pm: New function apt_available, to check if apt is around.
	* Engine.pm: Make things work with apt uninstalled.

2006-03-21  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: when an error is generated on Intel hardware, warn
	users that many maintainers don't have Intel hardware.

2006-03-21  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm: Don't break everything.

2006-03-21  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* FinkVersion.pm.in: new function default_binary_version

2006-03-21  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm:
		- Store the full tree ("stable/main") instead of just the first
		component ("stable").
		- Remove in_tree, it's unused.
	* Engine.pm: Use the full tree in dumpinfo.

	*** THIS IS A DB FORMAT CHANGE, RUN index -f OR EXPECT BREAKAGE ***

2006-03-21  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Scanpackages.pm: Use CLI::capture to shut up Fink::Package.

2006-03-21  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* CLI.pm: Adjust prototype for &capture.

2006-03-21  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* CLI.pm: New function &capture, to hijack STDOUT and STDERR.

2006-03-21  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* FinkVersion.pm.in: Collapse copy/pasted code into a loop.

2006-03-21  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Catch another .pc syntax that triggers a bug.

2006-03-20  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Services.pm: Try to fix errno_h breakage on 10.3.

2006-03-20  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm: Remove stray 'use DB_File'.
	* Scanpackages.pm: Ensure we load the correct DB_File.

2006-03-19  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Services.pm: Make store_rename create world-readable files.

2006-03-19  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Engine.pm, Package.pm, PkgVersion.pm, Services.pm: Remove redundant
	locking.

2006-03-19  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Engine.pm: We don't need the 'override' code anymore, yay!
	* Package.pm, PkgVersion.pm, Services.pm: Fail gracefully if locking is
	not supported.

2006-03-18  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Scanpackages.pm: Let's NOT delete files for no good reason.

2006-03-18  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Scanpackages.pm: Better error handling.

2006-03-18  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Scanpackages.pm: Write Packages.gz to a temp file and then move
	atomically.

2006-03-18  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Scanpackages.pm: Run the dpkg-deb in the current prefix.

2006-03-18  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Scanpackages.pm: Maybe I should brush up on my perl one of these days...

2006-03-18  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Scanpackages.pm: Don't go nuts when there's an invalid scanpackages.db

2006-03-18  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Checksum/MD5.pm, Checksum/SHA1.pm: use Digest::<foo> if available,
	otherwise fall back to command-line stuff.  Also added support for
	openssl sha1 in the SHA1.pm plugin.

2006-03-17  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: handle when there are extra ='s in the environment vars

2006-03-17  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Package.pm, PkgVersion.pm, Config.pm, Engine.pm, Services.pm,
	SysState.pm: POD cleanup
	* Scanpackages.pm: New module to do what apt-ftparchive does.
	* Engine.pm: Use Scanpackages.pm instead of dpkg-scanpackages or
	apt-ftparchive. AutoScanpackages now defaults to ON! Also, scanpackages
	now automatically calls apt-get update.
	* Bootstrap.pm: Accommodate fink-scanpackages script.
	* Bootstrap.pm: Don't include 'CVS' or '.svn' directories in tarballs
	when injecting.

2006-03-17  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Move BDO violation checking into its own method,
	and remember to call it for splitoffs not just parents.

2006-03-16  Daniel Macks  <dmacks@netspace.org>

	* Config.pm: Import some Services:: funtions that we use here

2006-03-15  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Engine.pm: Ok, now let's try in a non-stupid way.

2006-03-15  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm, Package.pm, Engine.pm: Attempt to fix some of dep engine
	weirdness. Now no more storing versionspecs inside Package objects, instead
	we store a list of ok versions in the deps table.

2006-03-14  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Do not issue repeated warnings about the same
	BuildDependsOnly violation

2006-03-06  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Fix *SetPATH handler

2006-03-01  Daniel Macks  <dmacks@netspace.org>

	* Status.pm: Don't whine if status db not yet loaded.

2006-03-01  Daniel Macks  <dmacks@netspace.org>

	* Status.pm: Instead of manually toggling _invalid, store data
	about dpkg status file when reading it, compare stored vs actual
	to determine whether cache is stale.
	* PkgVersion.pm, Status.pm: Abolish Status::invalidate

2006-02-28  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* SysState.pm:
		- Nicer error messages when resolving deps.
		- Don't accept "resolutions" that uninstall some of the packages that
		we are trying to install.
		- Recognize when buildlocks are in the way.
	* PkgVersion.pm: Don't print the "propagated at" for propagated die's.

2006-02-28  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Command.pm: When lchown is available, chowname_hr should affect links.
	There's no lchown in perl, so we system() it.

2006-02-26  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm: get_aptdb was stomping on $_, which happened to be
	a Package object. Damn global variables...

2006-02-25  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Config.pm: Add methods to check whether the bindist is available, based
	on the current distribution and prefix.
	* Engine.pm, PkgVersion.pm, Configure.pm: Replace existing checks for
	bindist availability with calls to the new methods in Config. Now if we
	want to allow UseBinaryDist for private dists, there's just one place to
	change.
	* Config.pm: Don't write the bindist entries to sources.list unless the
	bindist is actually available.

2006-02-25  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm: If buildlock is in an unfamiliar environment, allow
	removal. This can occur when injecting a new fink.

2006-02-24  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Engine.pm: A bit of cleanup on the termination of process().

2006-02-24  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: process() stashes its @ARGV in Config options.
	restart_as_root() uses this instead of a passed @ARGV list, and
	does its own check for whether it is already root.

2006-02-24  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm, Engine.pm: Change buildlock removal process. Now we check
	if any buildlocks appear stale before trying to remove them, so we don't
	make many redundant calls to dpkg.

2006-02-23  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: Use the gcc build number for the revision if
	possible; also make sure tests are using /usr/bin/gcc rather than
	some random gcc in the path (should speed things up a little if
	ccache or distcc are hanging around)

2006-02-23  Daniel Macks  <dmacks@netspace.org>

	* SelfUpdate.pm: Check for dev-tools using VirtPackage directly
	instead of using the full Package/PkgVersion database API.

2006-02-22  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Package.pm: 'find' should follow symlinks.

2006-02-20  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Configure.pm:  Add a list of existing binary distributions to the
	code.  If there is not (yet) a binary distribution corresponding to
	the current $distribution, UseBinaryDist is set to false.

2006-02-17  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Always parse Architecture field even if it will
	ultimately be ignored.

2006-02-16  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Revert UpdatePOD to old dpkg scriptlets. Use new
	multiline AutoDpkg field to control fink-instscript calls.
	Implement AutoDpkg:UpdatePOD subfield.

2006-02-15  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: recognize 10.4.5 (on both ppc and intel)

2006-02-08  Remi Mommsen <remigius.mommsen@cern.ch>

	* PkgVersion.pm: get_debpath() returns path with distribution, not
	using the symbolic link '%p/fink/dists'. The symbolic link from
	'%p/fink/debs' changed to relative using the distribution.

	* Engine.pm: Fix cleanup_debs to cope with new path format for
	debs. Add debfile to dumpinfo.

2006-02-08  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Bootstrap.pm, PkgVersion.pm: start moving pre/post inst/rm automatic
	logic to an external script, to avoid hardcoding bugs into .deb files

2006-02-08  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Teach dumpinfo about AppBundles

2006-02-07  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Add support for conditionals in the Architecture field.

2006-02-06  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Implement standard variant syntax in Architecture.

2006-01-31  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm, Validation.pm: Consider .info Architecture field
	case-insensitively.

2006-01-25  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Don't call _set_destdirs during object
	initialization (it's called during load_fields anyway).

2006-01-25  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: updated perl checks to ask perl what it's arch
	is, rather than assuming.  Because when you're assuming, you
	make an ass out of you and ming.
	* VirtPackage.pm: added a check to gcc to determine if the gcc
	binary being interrogated is capable of targetting the host on
	which it is being run.

2006-01-23  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: PatchFile and friends arrive in fink-0.24.12

2006-01-21  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: add an optional argument to check_host telling us
	whether we are bootstrapping or not; if bootstrapping, we allow
	the FINK_NOTRANS environment variable to override the default
	distribution in 10.4; if not bootstrapping, we stick with the
	existing disribution.
	* Bootstrap.pm: recognize darwin 8.4.1 (which is current on i386)

2006-01-19  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: handle universal SDK(s)

2006-01-19  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: merge the powerpc and i386 decision trees, where possible

2006-01-18  Daniel Macks  <dmacks@netspace.org>

	* Bootstrap.pm: made and then reverted some changes to OS
	detection if/elsif/elsif.

2006-01-13  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Fields are officially PatchFile and
	PatchFile-MD5, so the %-exp is %{PatchFile}.

2006-01-12  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Allow SetPATH also, not just NoSetPATH

2006-01-12  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Don't even give 'cleanup --obsoletes' as an
	option. Add PatchFile and PatchFile-MD5 to dumpinfo fields.

2006-01-09  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: pkgversions_from_info_file now takes %options,
	which are passed to ..._from_properties, which now supports
	"no_exlcusions" option.
	* Validation.pm: Allow validation of .info even if not matching
	local Architecture.

2006-01-11 Alexander Hansen:  <alexkhansen@users.sourceforge.net>

	* Bootstrap.pm:  Add 10.4.4 to supported OSes.

2006-01-09  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Fix weaked *Depends syntax check.

2006-01-06  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Check for duplication of package name in a .info
	file (under-varianted packages in variant sets).

2006-01-06  Daniel Macks  <dmacks@netspace.org>

	* Checksum.pm: parse_checksum: Don't spew diagnostics if passed undef.
	* PkgVersion.pm: Don't spew diagnostics if no Source-MD5 field.
	* Services.pm: Add missing import of CLI symbol.

2006-01-03  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Allow NoSetPATH

2006-01-03  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Downgrade .info *Script -v/-x check to "pedantic"

2006-01-03  Daniel Macks  <dmacks@netspace.org>

	* all: updated Copyright notice

2005-12-28  Daniel Macks  <dmacks@netspace.org>

	* VirtPackage.pm: Clarify diagnostics for broken-gcc

2005-12-28  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: New PatchFile and PatchFile-MD5 fields. If
	PatchFile field is present: check its checksum and readability,
	store its full path in %{patchfile}, add 'patch' command to apply
	it to the PatchScript %{default_script}, disable the Patch field.
	* Validation.pm: Check a lot of things about PatchFile.

2005-12-27  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: pkgversions_from_properties: ignore a %properties
	hash unless the current arch is listed in the Architecture or that
	field is absent.
	* Validation.pm: Check values of Architecture field.

2005-12-22  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Make sure %c accounts for packages
	installed/removed by the current fink process.

2005-12-20  Chris Zubrzycki <beren12@users.sourceforge.net>

	* Services.pm: remove $notifier, should never get to that error condition.

2005-12-20  Chris Zubrzycki <beren12@users.sourceforge.net>

	* Services.pm: Fix $notifier init and kernel version regex

2005-12-15  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: hide dpkg diagnostics during buildlock cleanup.

2005-12-13  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: .info validator warns if a .deb does not contain
	any files in %p (this situation confuses dpkg)

2005-12-13  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: .info validator warns if an explicit #!
	interpretter is used but -e and -v flags are not passed to it.

2005-12-09  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Milder warning when unable to remove buildlocks when
	cleanup_buildlocks is used internally.

2005-12-09  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Cleaner diagnostics during 'cleanup --bl'

2005-12-06  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Buildlocks remove their own lockfiles...no need to
	try to remove them ourselves. Inhibit buildlock cleanup if global
	no_buildlocks option used. Lay groundwork for Obsoletes removal.
	* PkgVersion.pm: Implement alternate %options syntax for
	phase_activate, phase_deactivate, phase_purge, and have them
	automatically clear stale buildlocks if called this way. Add POD.

2005-12-06  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Description beginning with [ are special, so
	don't allow them in .info.

2005-11-22  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Even cleaner *SetMACOSX_DEPLOYMENT_TARGET and *SetCXX
	handlers.

2005-11-29  Daniel Macks  <dmacks@netspace.org>

	* Bootstrap.pm: We require perl >= 5.8.1

2005-11-22  Daniel Macks  <dmacks@netspace.org>

	* Notify.pm, Notify/*.pm, SysState.pm: Return true to use and require

2005-11-22  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: factor constant install-info stuff out of loop,
	allow packages to call it manually instead of via InfoDocs field.

2005-11-22  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Clean up *SetMACOSX_DEPLOYMENT_TARGET and *SetCXX
	handlers.

2005-11-21  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Services.pm, Validation.pm: fix typo

2005-11-17  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm: Remove message for VirtPackages in resolve_depends.

2005-11-16  Alexander Hansen <alexkhansen@users.sourceforge.net>

	* Bootstrap.pm:  Support 10.4.3

2005-11-16  Daniel Macks  <dmacks@netspace.org>

	* SysState.pm: Fix wording of diagnostic messages.

2005-11-15  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Check if .deb mishandles texinfo InfoDocs field.

2005-11-11  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm, PkgVersion.pm: perpare_percent_c calls
	get_build_directory internally because %c might contain %b.

2005-11-11  Chris Zubrzycki  <beren12@users.sourceforge.net>

	* Bootstrap.pm, Engine.pm, Package.pm, PkgVersion.pm, Services.pm
	* VirtPackage.pm: get_sw_vers renamed to get_osx_vers_long and new
	get_osx_vers returns only Maj.Min (10.x). Also added
	get_darwin_equiv and get_kern_vers.

2005-11-09  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Set ownership of temp HOME dir to nobody when
	--build-as-nobody

2005-11-08  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Extend language-version orthogonality test to
	-pyXX packages

2005-11-01  Daniel Macks  <dmacks@netspace.org>

	* Status.pm: Don't read status file if "status" tree is exlcuded

2005-10-31  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Completely disallow use of new buildlock pkg's
	PreRm if old one's fails when installing a concurrent one. Hide
	fink's own unwinding msg too.
	* Engine.pm: No buildlock dir is not fatal to cleanup_buildlocks

2005-10-31  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* CLI.pm: Add die_breaking method to die with a nicely formatted message.
	* Engine.pm: Treat empty death messages nicely, to enable die_breaking to
	work.
	* PkgVersion.pm: Only warn that a package may need manual installation when
	we have a PkgVersion object to get the instructions from.

2005-10-31  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: overhaul buildlocks again. Now we set/unset lock
	on a timestamped lockfile before installing/removing lockpkg;
	lockpkg prerm fails if lockfile is locked.
	* Engine.pm: Rewrite cleanup_buildlocks for new implementation.
	* Package.pm: Remove no-longer-needed control_buildlocks.

2005-10-27  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: added proper URL for JavaAI and Java3D

2005-10-24  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* SelfUpdate.pm: Fix some scoping problems.

2005-10-24  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Add new buildlocks wiki URL to buildlock msgs.

2005-10-24  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Use local() instead of temp var when we need to
	swap %ENV temporarily to prevent runtime warning from certain
	versions of perl.

2005-10-24  Daniel Macks  <dmacks@netspace.org>

	* Checksum.pm: get_all_checksums: don't crash if a back-end isn't
	implemented.

2005-10-21  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Remember Fink::PkgVersion->dpkg_changed when calling
	dpkg directly.

2005-10-21  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm, PkgVersion.pm: Make buildlock lock-packages
	Essential:yes to prevent accidental or apt-get removal; use
	--force-remove-essential to remove them.

2005-10-19  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Switch get_description API to use named options.

2005-10-19  Daniel Macks  <dmacks@netspace.org>

	* Checksum/SHA1.pm, Checksum/SHA256.pm: don't try to -x if there
	is no command defined.

2005-10-17  Daniel Macks  <dmacks@netspace.org>

	* Checksum.pm: new class methods get_all_checksums and parse_checksum.
	NetAccess.pm, PkgVersion.pm: use get_all_checksums to look up
	actual checksum when it doesn't match expected.

2005-10-17  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Bootstrap.pm, Checksum.pm, Engine.pm, NetAccess.pm, PkgVersion.pm,
	Services.pm, Validation.pm, Checksum/*.pm: now handles MD5, SHA1,
	and SHA256 as plugins; packages using Source*-Checksum: now work
	properly; what's left to do is handle mirror URLs, and whether I
	care to do dep-checking.

2005-10-16  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Engine.pm, Services.pm, Checksum.pm, Checksum/MD5.pm: refactored the
	MD5sum stuff into a checksum module.  Still TODO: implement code to
	have each @ISA(Fink::Checksum) know where it should be in the mirror
	system (for when we have multiple checksum types for a package), also
	change the checksum code around to actually use this in a
	non-MD5-specific way (right now it's just a behind-the-scenes
	drop-in replacement for the existing MD5 code) but hey, it's a start.
	Now we just need to decide on a standard for the mirror servers
	w/ the OD folks.  ;)

2005-10-12  Daniel Macks  <dmacks@netspace.org>

	* SelfUpdate.pm: During finish(), only update "important" (but not
	Essential) packages if they are already installed.

2005-10-12  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm, Package.pm, PkgVersion.pm: New Package::control_buildlocks
	class method used to control access to whole buildlock system.
	* Engine.pm: During buildlock cleanup, only remove lockpkgs that
	are installed (indicated by presence of their .pid files).

2005-10-11  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Add a flock-based outer layer around the
	dpkg-based buildlocks. Now "the lock" automatically goes away when
	fink process dies, so buildlock pkgs don't need to prevent
	self-replacement.
	* Engine.pm: Buildlock cleanup can now check for flockable
	lockfiles instead of dealing with stored pids.

2005-10-07  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Quote --logfile as shell arg.

2005-10-07  Daniel Macks  <dmacks@netspace.org>

	* Config.pm, PkgVersion.pm: Implement --logfile cmdline flag to
	specify buildlog filename (with %-expansion)

2005-10-06  Daniel Macks  <dmacks@netspace.org>

	* Config.pm, PkgVersion.pm: Store copies of filehandles as
	PkgVersion package-globals instead of in Config. When setting
	STDERR tee filter, child process's STDERR is always fd 2 (don't
	use fd of parent's stashed copy of STDERR).

2005-10-06  Daniel Macks  <dmacks@netspace.org>

	* Config.pm: Never lower $^F.

2005-10-06  Daniel Macks  <dmacks@netspace.org>

	* Tie::OutputTee.pm: Removed.
	* Config.pm: Store dup's of STDOUT and STDERR file descriptors
	during initialization.
	* PkgVersion.pm: Rewrite log_output to just reopen STDOUT and
	STDERR as pipes to 'tee $logfile' (or reopen back to Config's
	saved original file descriptors) instead of messing with tied
	filehandles.

2005-10-06  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Configure.pm, Engine.pm: Add --mirrors option to 'fink configure', to
	allow configuring only the mirrors.

2005-10-06  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: OutputTee can't be chained, so current logging
	status must be package-global not instance data.

2005-10-06  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Use Fink::Tie::OutputTee for --log-output.
	* Tie::OutputTee.pm: Import from exp/dmacks IOFilter.pm. This new
	package enables one to "tee" a writable filehandle into a file.

2005-10-06  Daniel Macks  <dmacks@netspace.org>

	* Config.pm: Add --no-log-output (default).

2005-10-06  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Services.pm: Refactor get_options so it doesn't use ugly arrays so much.
	* Services.pm: Make get_options automagically deal with negative-options.
	* Config.pm, Engine.pm: Use negative options.

2005-10-06  Daniel Macks  <dmacks@netspace.org>

	* VirtPackage.pm: Add new "dev-tools" pkg representing presence of
	/usr/bin/{gcc,make} executables.
	* PkgVersion.pm: Make "dev-tools" an implicit BuildDepends of all
	packages.
	* Engine.pm: Make "dev-tools" not implicitly depend on
	essentials (avoids circular dep).
	* SelfUpdate.pm: Require "dev-tools" in order to to selfupdate via
	rsync of cvs.

2005-09-30  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm, PkgVersion.pm: log_output always creates new
	logfile (and crashes if it already exists).

2005-09-30  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Patch checks for %b and %d (%D) in .deb to remove
	%e from control Version field

2005-09-30  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Add check for .py[c] that hard-code %d.
	Early-exit from line-by-line checks once we find one match.

2005-09-30  Daniel Macks  <dmacks@netspace.org>

	* Config.pm: Add new --log-output|-l top-level flag.
	* Engine.pm: Allow logging of build process for each package.
	* PkgVersion.pm: Add log_output stub method that will log output
	iff --log-output.

2005-09-29  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Engine.pm: Sort before pre-fetching, for reproducibility.
	* Engine.pm: Fixup get_pkglist, so it doesn't barf on packages available
	only in the status db.

2005-09-26  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: Explain what goes into additional_packages

2005-09-26  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Make conditional_space_list remove
	leading/trailing whitespace.

2005-09-25  Alexander Hansen <alexkhansen@users.sourceforge.net>

	* PkgVersion.pm: Both of the axel versions that we have in Fink
	don't take --verbose.  Change flag to -v (which works) instead.

2005-09-21  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Make sure DocFiles targets are not
	group/world-writable but preserve execute bit.

2005-09-21  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: DocFiles handles conditionals, recursive copying
	of dirs, and implicit renaming dir1/dir2/file: to file.dir1.dir2

2005-09-21  Alexander Hansen <alexkhansen@users.sourceforge.net>

	* NetAccess.pm:	wget versions >= 1.10 use -no-verbose instead of
	--non-verbose (arguably more GNU-standard).  In order that we may release
	a 1.10.x package use the short flag (-nv) instead as that is usable by both
	wget < 1.10 and wget >= 1.10.

2005-09-16  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Notify.pm, Services.pm: Use generic way to find "sub-packages".

2005-09-14  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Use chowname_hr when reverting %i to root:admin.

2005-09-14  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* SysState.pm: Clean up documentation of private subs.
	* SysState.pm: Don't try to correct pre-existing dependency problems.
	* PkgVersion.pm: Just skip the dep-resolution if there's a fatal problem
	(eg: bad '<' in version spec inside the dpkg status file).

2005-09-13  Daniel Macks  <dmacks@netspace.org>

	* Command.pm: Implemented chowname_hr.

2005-09-11  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Services.pm: Allow spec2struct and spec2string to say where the error
	occurred.
	* SysState.pm: Take advantage of above feature. Also, if fatal error
	occurs always print why.

2005-09-10  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: Since gettext-tools is no longer a splitoff of an
	essential package, we do not need it on the update list.

2005-09-09  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* SysState.pm: Add Replaces support.

2005-09-09  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* SysState.pm: New module for examining the state of the installed packages,
	discovering and solving dependency problems.
	* PkgVersion.pm: Tie into SysState to solve bug in dpkg, see bug #992093.

2005-09-09  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Services.pm, Engine.pm: Allow get_options validate routine to request
	either help or error message. Add new option to specify width of option
	help.
	* Config.pm: New parse_options sub to deal with global options (moved from
	fink.in). Rewritten to use Services::get_options.

2005-09-08  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Engine.pm, Services.pm: Move get_options to Services.
	* Services.pm: Add some more features to get_options.

2005-09-08  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Config.pm, Engine.pm, Package.pm, PkgVersion.pm, Validation.pm:
	Get --trees working properly:
		- Config.pm: Allow both inclusion and exclusion of trees at the command
		line. Recognize 'magic trees': virtual, status.
		- PkgVersion.pm: Allow callers to check is_type('dummy') on an unloaded
		object. Only works for type 'dummy'! Also some minor refactoring.
		- Package.pm: Give 'dummy' packages from magic trees a subtype of
		'status' or 'virtual'. Also remove undocumented multiple
		return values from is_virtual().
		- Engine.pm: Make list and apropos respect whether or not user desires
		each magic tree. Other commands do *not* yet respect this, nor is it
		clear that there is any benefit to making them do so.
		- Validation.pm: Disallow type 'dummy' in .info files.

2005-09-07  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Package.pm: Remove stray references to Shlibs
	* Engine.pm: Remove duplicate --buildlocks help item for cleanup. Don't
	load package DB for cleanup unless needed.

2005-09-07  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: get_description needs to make a copy of the whole
	_expand struct

2005-09-06  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Add a new parameter to get_description to force
	parsing of DescDetail/DescUsage as if %p="/sw". Document the
	description accessors and formatting functions.

2005-09-06  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm, Valdiation.pm: use more descriptive tempdir names.

2005-09-05  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Services.pm: Fix up spec2struct and spec2string to conform to tests.

2005-09-05  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* CLI.pm, Engine.pm, PkgVersion.pm, Shlibs.pm: Podchecker fixes.
	* Services.pm: spec2string and spec2struct: Parse package specifications,
	eg: 'foo (>= 1.0-1)'.

2005-09-05  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* CLI.pm: Abstract out word-wrapping part of print_breaking into its own
	method.
	* Engine.pm: New get_options wrapper for Getopt::Long:
		- No more explicit @ARGV swapping.
		- Option definition and help text right next to each other, so they
		don't get out of sync.
		- Word wrap help nicely for screen width.

2005-09-02  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Invalidate dpkg cache after installing buildlock pkg

2005-09-02  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Implement cleanup_buildlocks

2005-09-01  Daniel Macks  <dmacks@netspace.org>

	* Validation: dpkg validation now performed on an unpacked archive
	with a wrapper to unpack a .deb (merge in val-unpack branch).
	* PkgVersion.pm: -m mode validates %d *before* constructing .deb.

2005-08-31  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm: Set invariant name *before* package name is expanded.

2005-08-31  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm: Don't error if .info file not in 'finkinfo'. For a
	regular index, it's enforced by only looking there. For scripts, we don't
	care anyhow.

2005-08-31  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm: Fix deb-building breakage.

	*** Rebuild your DB with 'fink index -f' if you used Fink from HEAD since
	2005-08-30 ***

2005-08-31  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Config.pm: Fixed bug causing 0 to be taken as array ref.

2005-08-31  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Config.pm: Allow filtering of treelist via command line option.
	* Package.pm: Don't use/store proxy db if using custom treelist.
	* Package.pm: Don't include Status packages that aren't installed in Fink's
	DB. It's confusing to do 'fink list blah' and find a package, and then
	'fink install blah' makes the dep engine get confused and die.
	* Engine.pm: Use *i* to indicate a package newer than the newest package
	fink knows about (not including status, of course!). Option 'toonew'
	needs decision on whether we keep it, and docs.

2005-08-31  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm: Add convenience method to get just one PkgVersion from
	a .info file.
	* PkgVersion.pm, Validation.pm, FinkVersion.pm.in: Info3 enhancements
	for pkglist fields:
		- Normalize whitespace
		- Allow comments (# to end of line)
		- Remove trailing comma

2005-08-30  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: allow overriding of bzip2 path in fink.conf

2005-08-30  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Base.pm: Allow initializers and constructors to have arguments.
	* PkgVersion.pm: Use initializer arguments to get metadata into PkgVersion
	rather than adding to $properties. Metadata include .info filename, InfoN
	and parent. This fixes the weirdness that we had with handle_infon_block.
	* Package.pm, PkgVersion.pm: Move the methods package_from_properties,
	package_from_info_file and handle_infon_block from Package to PkgVersion,
	since they have nothing to do with Package. Also rename them.
	* PkgVersion.pm: Move as much intialization code as possible into
	initialize, so random bits aren't left in package_from_*.

2005-08-29  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Services.pm: Force gcc_select in fix_gcc_repairperms to use a restricted
	PATH.
	* PkgVersion.pm: Improve handling of local apt repos:
		- Don't --print-uris unless we know to expect a local location.
		- Don't let apt print to stderr
		- Don't ignore debs that are a downgrade

2005-08-26  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Configure.pm: Mirror choosing improvements:
		- Really default to the second option when the current one is obsolete
		- Actually print all mirrors on the continent when the user asked for it
		- Sort by country name rather than by country code (eg: de -> Germany)
		- Don't show mirrors twice.

2005-08-26  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Engine.pm: Don't just promise to remove on-disk cache in 'index --full',
	actually do it.
	* Package.pm, PkgVersion.pm: Don't allow user to interrupt when Storable
	is loading part of the DB, to eliminate spurious warnings about corruption.
	* Package.pm, PkgVersion.pm: Remove dead code related to merging PkgVersions
	into the DB. Make new merge method to merge trees.
	* PkgVersion.pm: Add new methods to examine trees, also store trees in
	index.db.
	* Engine.pm: Use new in_tree method in list. Add 'trees' item to dumpinfo.

	*** DB FORMAT CHANGE, YOU WILL NEED A FULL REINDEX ***

2005-08-26  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Bootstrap.pm, Engine.pm, Package.pm, SelfUpdate.pm: Remove unneeded
	references to Shlibs.
	* PkgVersion.pm: Remove unused method for getting Depends from deb, a more
	general solution for all pkglists is needed, see bug #1249916.
	* PkgVersion.pm: When dpkg status changes, invalidate Shlibs.
	* PkgVersion.pm: Cleanup of Shlibs getting.
	* Shlibs.pm: Don't use a DB, since it the shlibs list needs to be
	regenerated so often (every time a package is installed or removed!).
	Instead re-generate on demand, like Fink::Status.
	* Shlibs.pm: Remove random autoflush until somebody tells me what it's for,
	or it's documented.

2005-08-26  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm: Abstract out invalidating caches when dpkg state changes.
	* Engine.pm: Remove redundant invalidate calls.

2005-08-26  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm: Document some methods, add is_locally_present.
	* Engine.pm: Revamp prefetching. Also make 'fink build' always build
	something unless there's a .deb presen that has been built by the local
	Fink.

2005-08-26  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Engine.pm: Attempt to make prefetching work the way it should, someone
	who knows the dep engine should look at this.

2005-08-26  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Package.pm: Don't exit method with 'next'.
	* Services.pm, FinkVersion.pm.in: Remove RFC-822 from Info3, yay!

2005-08-25  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: check version-dep syntax in .info pkglist lines.

2005-08-24  Dave Morrison  <dmrrsn@users.sourceforge.net>

	*  VirtPackage.pm: Add note about XCode Legacy Compilers to
	description of gcc virtual packages

2005-08-23  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Package.pm: New method to resolve the best version to install.
	* Engine.pm: Finish factoring out alternative-resolution code. Over 250
	lines are gone from real_install!

2005-08-22  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Engine.pm: Move some more parts of alternative resolution into functions.

2005-08-22  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Engine.pm: Use smaller scopes for variables, so code can be refactored
	without inadvertantly stomping on other code.

2005-08-22  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Package.pm: New convenience method get_latest_version, document
	is_virtual.
	* Engine.pm: Move asking for an alternative into a function.

2005-08-22  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Package.pm, Engine.pm: Make fink do the right thing when multiple
	version specs are encountered. Note that bad things can still happen if
	Fink processes a package's dependencies before a new spec modifies the
	version we should be looking at.
	* Engine.pm: Fix call to get_matching_versions.
	* Package.pm: Re-write get_matching_versions for brevity and correctness.
	Fixes @choose_from parameter not working.

2005-08-22  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Engine.pm: Sort initial queue of dependencies, so that bugs in dep
	engine are reproducible!

2005-08-22  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Engine.pm: Revert part of a separate patch that for some reason I
	let slip in.

2005-08-22  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Engine.pm, Package.pm: Make print_virtual_pkg a method of Package.
	* Engine.pm: Use print_virtual_pkg for descriptions of virtuals.
	* PkgVersion.pm: If a virtual package is found and virtuals are undesired,
	print a nice warning. This lets 'fink install something-virtual' and such
	behave more nicely.

2005-08-21  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Engine.pm: Refactor pretty-printing virtual packages into a function.

2005-08-21  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Command.pm: du_sk rounds up, just as du does.

2005-08-18  Matthew Sachs  <msachs@apple.com>

	* Don't fall through to 10.2 for i386-apple-darwin8.FOO for
	values of FOO which we don't know about.

2005-08-13  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Catch misuse of -Wl,-framework in .pc files.

2005-08-12  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Bootstrap.pm, Services.pm: fix some output redirect stuff on
	external commands.

2005-08-09  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Make BDO violations fatal in maintainermode.

2005-08-08  Daniel Macks  <dmacks@netspace.org>

	* Package.pm: Make handle_infon_block() return InfoN level
	out-of-band if called in array context.
	* Validation.pm: Don't allow literal "InfoN" field.

2005-08-05  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: .info fieldnames are canonically lower-case

2005-08-05  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Bootstrap.pm, Engine.pm, Package.pm, SelfUpdate.pm, Services.pm:
	Naively decouple Shlibs and Package.

2005-08-04  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Package.pm, Engine.pm, PkgVersion.pm: Incremental indexing improvements:
		- Race condition removal
		- Nice error messages if part of DB is missing or corrupt
		- Takes into account date of .info file, so should now work with
		selfupdate-rsync
		- Has db_valid_since method to be used by FinkCommander for caching DB
		- forget_packages should actually forget everything

2005-08-04  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Use a dummy HOME when running *Script.

2005-08-04  Daniel Macks  <dmacks@netspace.org>

	* Bootstrap.pm: Clean up darwin version check.

2005-08-04  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Configure.pm: Auto-detect user's country.

2005-07-30  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm: infon isn't always present.

2005-07-30  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Services.pm, PkgVersion.pm: Have read_properties* use an options hash
	rather than ordered parameters. Add an option for python-style whitespace
	removal on both top-level and heredocs.
	* Package.pm, PkgVersion.pm: Use new option for Info3+
	* PkgVersion.pm: Don't strip whitespace from SplitOffs if Info3+, let
	read_properties* do that.

2005-07-29  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Package.pm: Only use Info3 feature with Info3 or higher.

2005-07-29  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* FinkVersion.pm.in: Say hello to Info3.

2005-07-29  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm: Print a nicer message if someone calls match_package
	and gets a virtual package (but doesn't want virtuals).

2005-07-29  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm: Add 'provides' option to match_package, to find packages
	that are only virtual.
	* Engine.pm: Enable 'fink desc foo' finding provided packages, fixing bug
	#755128 .

2005-07-29  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Engine.pm: is_present() doesn't exactly check for any dependencies that
	could be pulled in with real_install. So restrict this to single packages
	and use phase_activate.

2005-07-29  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Package.pm: Remove leading whitespace in Info2, without breaking
	RFC-822. All of 10.4-transitional indexes fine with this. dmacks, please
	check that this is ok!

2005-07-29  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Engine.pm: Remove build-as-nobody warning, it's been well enough
	tested by now I'd say.

2005-07-29  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm: Document some functions.
	* PkgVersion.pm, Engine.pm: Replace 'parentessential' concept with
	built_with_essential function, which should make it possible for an
	essential package to be a splitoff.

2005-07-28  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Engine.pm: Separate dep checking and dep switching, so we don't switch
	unnecessarily.

2005-07-28  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Engine.pm: revised "switch debs during long builds" code: if a
	needed .deb exists but is not installed, we install it without
	asking.  (If it doesn't exist, we allow the process to continue --
	it will quit with an error, and the user must then start over.)

2005-07-28  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: cleanup_debs: don't delete .deb of pkgs that are
	installed but have no .info.

2005-07-27  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Stash the fink PID in the buildlock package.

2005-07-27  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Services.pm: Get rid of gensym, not needed in perl >= 5.6.0.

2005-07-26  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Fix cleanup_sources source filename parsing. Better
	diagnostics during cleanup_sources and cleanup_debs dead time.

2005-07-25  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: only provide default values for LD_PREBIND,
	LD_PREBIND_ALLOW_OVERLAP, and LD_SEG_ADDR_TABLE when the distribution
	is 10.4-transitional and earlier

2005-07-25  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: merge in cleanup_modes branch: orthogonal control
	for deb vs src, --dry-run flag.

2005-07-21  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: make the default value of LD_PREBIND depend on the
	distribution (1 for 10.4-transitional and earlier; 0 for 10.4 and
	later)

2005-07-21  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Package.pm: Use super-fast loading if DB hasn't changed. Still much
	cleanup needed.
	* PkgVersion.pm: Make shared_loads global for now.
	* Engine.pm: Adapt to changes in Package

2005-07-20  Daniel Macks  <dmacks@netspace.org>

	* NetAccess.pm: prompt_selection API fix for wrong-checksum

2005-07-19  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Configure.pm: Forward-port the obsolete-mirrors handling.

2005-07-17  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: ...but don't break continuation option.

2005-07-16  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Make failed unpacking of source a fatal error.

2005-07-13  Daniel Macks  <dmacks@netspace.org>

	* CLI.pm: Improve POSIX symbol imports.

2005-07-13  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Bootstrap.pm: Support 10.4.2.

2005-07-13  Daniel Macks  <dmacks@netspace.org>

	* CLI.pm: flush STDIN before reading each user input.

2005-07-12  Matthew Sachs  <msachs@apple.com>

	* Services.pm: Looser checking of GCC version in enforce_gcc;
	we don't want to differentiate between 4.0.0 and 4.0.1.

2005-07-12  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Bootstrap.pm: Install exactly the version that's being injected.

2005-07-12  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Services.pm: Reimplement Repair Permissions bug fix using gcc_select
	--force, for better reliability (we hope!)

2005-07-11  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm: Note g++-wrapper code duplication.

2005-07-11  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Bootstrap.pm: Put path-prefix	stuff in Fink's .deb.

2005-07-07  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Services.pm, PkgVersion.pm: Automagically fix bug caused by Repair
	Permissions on Tiger.

2005-07-06  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Engine.pm: Use apt-get-lockwait for AutoScanpackages.

2005-07-05  Peter O'Gorman  <ogorman@users.sourceforge.net>

	* Bootstrap.pm (bootstrap): Remove tar from phase 1 of bootstrap.

2005-07-04  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Package.pm: Er, make the info-list caching actually work. I'll be taking
	that out soon anyhow.

2005-07-02  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Notify/Growl.pm: move event registration out of the constructor,
	for the purposes of speed.

2005-07-01  Daniel Macks  <dmacks@netspace.org>

	* CLI.pm: Implement new function rejoin_text().
	* PkgVersion.pm: Improve error message when buildlock fails.

2005-06-30  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm: We need to set %p in disable_bootstrap. This should fix
	the gettext bootstrapping bug.

2005-06-30  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Call prepare_percent_c whenever we assign %d and
	other path-related _expand keys

2005-06-29  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* VirtPackage.pm: If old XCode is not removed on upgrade to Tiger, a
	gcc3 (version 3.1) still remains. This causes Fink to add a virtual
	package which will overwrite a real gcc3.1 package, which confuses
	apt-get. Now virtual gcc packages will no longer overwrite real ones.

2005-06-29  David H. <dmalloc@users.sourceforge.net>

	* VirtPkg.pm: Added 10.3.9 SDK

2005-06-25  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm: Refactor the destdir re-setting code into a method, so
	the same effective code isn't in three places!
	* PkgVersion.pm: Make chown'ing the destdir conditional on not-bootstrap.

2005-06-20  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Engine.pm: If a candidate to satisfy a virtual dep has multiple siblings
	to be installed, that's just as good as ne sibling.
	* PkgVersion.pm: _ensure_splitoffs should be called on the parent, not the
	splitoff.

2005-06-19  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Engine.pm, PkgVersion.pm: POD fixes.
	* Package.pm, PkgVersion.pm: Package DB no longer stores reference to
	package objects inside other packages, all references are now done using
	unique specifiers.

2005-06-19  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Sort dumpinfo -pall output.

2005-06-19  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Fix dumpinfo %b to give actual value not dummy db value.

2005-06-19  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Engine.pm: Fix bug with params_matching in dumpinfo. Also add
	'-p all' option for all percent expansions.

2005-06-18  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: chgrp->admin (->nobody if build-as-nobody) %d and
	builddir (more secure and deterministic, because "files are always
	created with group of their parent dir")

2005-06-14  Rob Braun <bbraun@opendarwin.org>

	* VirtPackage.pm: Be slightly more robust on what outputs (if any)
	are accepted from executing /usr/bin/gcc*.

2005-06-12  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm: Stop --build-as-nobody from leaving nobody-owned symlinks.

2005-06-08  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: we no longer support 10.2

2005-06-01  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: work around an apple java installer bug

2005-05-26  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Configure.pm: Fix Spotlight warning.

2005-05-26  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Better err if qpkg-query fails while removing buildlock

2005-05-26  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Convert "reinstall" to "rebuild" if no .deb present.

2005-05-25  Peter O'Gorman  <ogorman@users.sourceforge.net>

	* Bootstrap.pm: Maybe allow bootstrap on darwin8.

2005-05-24  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Config.pm, Validation.pm: Make default buildpath %p/fink/src/fink.build
	* Configure.pm, Engine.pm: Warn about Spotlight indexing builds.
	* Config.pm: New *_flag API.

2005-05-24  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm: Insert the priority into .debs.
	* Engine.pm: Try not to put everything into the override. On first run,
	find all the debs without prio inside, and for the future put only them
	into override.

2005-05-24  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm: Empty perllocal.pod when the last perlmod is removed.

2005-05-24  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: Give more details when a dependency on a virtual fails.

2005-05-24  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* SelfUpdate.pm: changed CVS to only check out $distribution
	(or whatever is set in SelfUpdateCVSTrees in fink.conf) rather
	than everything under dists.

2005-05-24  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Package.pm: Don't leave .lock files around.
	* PkgVersion.pm: Don't break index if buildpath changes.

2005-05-23  Daniel Macks  <dmacks@netspace.org>

	* Bootstrap.pm, CLI.pm, Services.pm: Roll back last two commits.

2005-05-23  Daniel Macks  <dmacks@netspace.org>

	* Bootstrap.pm, CLI.pm, Services.pm: Adjust Fink:: importing to
	match what is used.

2005-05-23  Daniel Macks  <dmacks@netspace.org>

	* Config.pm: Use new_from_properties as back end for new_with_path

2005-05-22  Dave Morrison  <dmrrsn@sourceforge.net>

	* Bootstrap.pm: recognize 10.4.1; also, say that 10.4 is "supported
	and tested"

2005-05-20  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Finish fieldname all-lc fixes.

2005-05-20  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Move .info Shlibs syntax check into
	validate_info_component. Move Provides and Shlibs checks out of
	field loop. Control scoping of $field. Remember read_properties
	returns all-lc keys. Better pkglist-field syntax warning.

2005-05-20  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Fix pkglist-field syntax check when no conditional.

2005-05-20  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Check pkglist-field syntax.

2005-05-19  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Engine.pm: Fix bug with is_aptgetable changing $_.

2005-05-18  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm, Package.pm: Load apt DB as needed, don't try caching it.

2005-05-18  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Services.pm, Package.pm: Move store_rename into Services.

2005-05-16  Daniel Macks  <dmacks@netspace.org>

	* *: verbosity_level() is now a $config object method

2005-05-16  Daniel Macks  <dmacks@netspace.org>

	* Config.pm: Refactor and make a more coherent verbosity_level

2005-05-14  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Bootstrap.pm: Disable copyfile when creating tarballs (otherwise we get
	nasty dot-underscore files if we expand them with Fink's tar).

2005-05-11  Dave Morrison  <dmrrsn@sourceforge.net> (thanks to msachs)

	* PkgVersion.pm: better checking for SetCXX
	* Bootstrap.pm: use 10.4 distro instead of 10.4-transitional if
	the environment variable FINK_NOTRANS is set

2005-05-10  Daniel Macks  <dmacks@netspace.org>

	* Text/ParseWords.pm: import Text::ParseWords-3.23 from perl5.8.6
	into Fink:: package namespace.
	* PkgVersion.pm: Use our own ParseWords (perl5.8.1's is buggy)

2005-05-08  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm, Validation.pm: Add support for conditional
	License options.


2005-05-06  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm: Call to get_mirror() should be get_license().

2005-05-06  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm, PkgVersion.pm: Added new get_license() accessor.

2005-05-06  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* CLI.pm: Add SkipPrompts ability.
	* Engine.pm: Create SkipPrompts category 'virtualdep'.
	* Mirror.pm, NetAccess.pm, PkgVersion.pm: Create SkipPrompts category
	'fetch'.

2005-05-05  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Don't bother fixing "=" for single-char 'fink list' flags

2005-05-05  Daniel Macks  <dmacks@netspace.org>

	* Base.pm: param_default: Don't sanitize $default unless it's
	actually needed.

2005-05-05  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Delay loading of all fields until we need them

2005-05-04  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: fix up gimp-print stuff for 10.4

2005-05-02  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Engine.pm, Notify.pm, Notify/*.pm: Update notifications plugins
	to enumerate a short description and optional URL describing the
	plugin, as well as a command to list the available plugins and their
	versions.  We could use "fink plugin" in the future to list other
	plugins if there is such a thing later on...

2005-04-29  Daniel Macks  <dmacks@netspace.org>

	* Package.pm: Remove hardcoded /sw from .info search path.

2005-04-27  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: include gettext-tools among the additional pkgs

2005-04-28  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Mirror.pm: When master is first, and fails twice, assume it's a file
	that hasn't yet gotten sync'ed to the masters and just move to the next
	set.

2005-04-28  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Services.pm: Add no_block (non-blocking) ability to lock_wait.
	* Package.pm: Use multi-dir finkinfodb system to avoid accidentally
	deleting another Fink's DB.

2005-04-27  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: New lockwait_executable (with better PATH
	searching) back-end for *_lockwait()

2005-04-27  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Services.pm: Don't restrict dpkg/apt-get to %p/bin.

2005-04-27  Daniel Macks  <dmacks@netspace.org>

	* Package.pm: Typo in cache param.

2005-04-27  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Package.pm: Always use new cache files.

2005-04-27  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Bootstrap.pm, Engine.pm, PkgVersion.pm, SelfUpdate.pm, Services.pm: Use
	-lockwait versions of dpkg and apt-get.

2005-04-27  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Better accessor usage in dumpinfo

2005-04-26  Ben Hines <benh57@users.sourceforge.net>

	* Config.pm: Properly handle Verbose set >= 3.

2005-04-26  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Services.pm, Package.pm: Fix up lock_wait a bit.
	* Engine.pm: Lock-synchronize scanpackages.

2005-04-26  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Package.pm, Services.pm: Generalize do_lock(). It's now in Services and
	called lock_wait().

2005-04-26  Daniel Macks  <dmacks@netspace.org>

	* Package.pm, PkgVersion.pm: Add new accessor get_epoch().

2005-04-26  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Package.pm, Engine.pm: Revamp update_db args, make cmd_index reject the
	cached infolist.

2005-04-26  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Package.pm: But they do invalidate the infolist cache.

2005-04-26  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Package.pm: Changes to fink.conf should no longer invalidate the PDB
	cache.

2005-04-26  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: reverting vasi's path-prefix change of 4/25: we
	don't want to force a default gcc after all

2005-04-26  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Package.pm, Engine.pm, SelfUpdate.pm: Fix up forget_packages().

2005-04-25  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Engine.pm: Have cmd_scanpackages() use apt-ftparchive with caching if it
	is available, for greatly sped-up scanpackages. Enable the fink.conf option
	AutoScanpackages, to automatically run scanpackages whenever a new .deb
	is built.

2005-04-25  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm: What the fark is ccc? oops!

2005-04-25  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Package.pm: Move message to better place

2005-04-25  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm: Use the g++ prefix for gcc as well.

2005-04-25  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Package.pm: Retry load if files are missing

2005-04-25  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Package.pm: Remove silly warning

2005-04-25  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Package.pm: Make info-file-searching respect NoAutoIndex

2005-04-25  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Bootstrap.pm: Stop installing path-prefix dirs
	* PkgVersion.pm: Create path-prefix dirs dynamically, so they work even
	during bootstrap.

2005-04-23  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm, Package.pm, Engine.pm: Make folks use get_parent instead
	of $pkg->{parent}
	* PkgVersion.pm, Package.pm: Use proxy objects to make package info read
	on-demand only. See comment near the top of PkgVersion.pm

2005-04-23  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm, Bootstrap.pm: use two possible path prefixes,
	path-prefix-g++-3.3 and path-prefix-g++-4.0, depending on the
	current Distribution

2005-04-21  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm: Yet another splitoffs fix.

2005-04-22  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm: Fix another get_splitoffs error.

2005-04-22  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm: Fix get_splitoffs error.

2005-04-22  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: More intelligent warning if parsing a file with CVS
	conflicts.

2005-04-22  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Package.pm: Timeout using alarm, rather than busy-waiting.

2005-04-22  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Package.pm: Make locking nicer.

2005-04-22  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm, Engine.pm: Fix some relatives and splitoffs calls.

2005-04-22  Daniel Macks  <dmacks@netspace.org>

	* Config.pm, Engine.pm, Package.pm, PkgVersion.pm, SelfUpdate.pm:
	Convert binary_requested() from a function to an object method.

2005-04-22  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Engine.pm: Add options to index command.

2005-04-22  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Package.pm: Put index files in multiple dirs.
	* PkgVersion.pm, Engine.pm: Clean up splitoffs and relatives.

2005-04-22  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Package.pm: Incremental indexing. Not well tested, some operations
	still kinda slow.

2005-04-21  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Reduce direct access to private {_*} fields that
	have their own accessor methods. Remove private fields that can
	easily be generated on-the-fly by their accessor methods.

2005-04-21  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Package.pm, SelfUpdate.pm: Finished cleanup, consolidated globals.

2005-04-21  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Package.pm: Indexing doesn't break now.

2005-04-21  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Package.pm: More cleanup.

2005-04-21  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Engine.pm: Remove 'rescan' command, nobody knows what it's for and
	nobody uses it.
	* Package.pm, PkgVersion.pm: Cleanup and document. More cleaning to come!

2005-04-21  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Package.pm, Shlibs.pm: Stop Shlibs inheriting from Package, for it is
	silly.

2005-04-21  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm: Put g++-3.3 as g++ and c++ at the front of the PATH.
	* Bootstrap.pm: Include path-prefix in install files.

2005-04-19  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: backed out the default value for CXXFLAGS, added
	a default value for CXX instead
	* Bootstrap.pm:  recognize 10.3.9
	* PkgVersion.pm: make sure NoSetCXX still works

2005-04-19  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: put an actual file in the buildlock package.

2005-04-19  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Whine if a perl-versioned package installs a file
	whose path does not encode the version.

2005-04-16  Daniel Macks  <dmacks@netspace.org>

	* Bootstrap.pm, PkgVersion.pm, Services.pm: Overhauled enforce_gcc
	error messages.

2005-04-16  Chris Zubrzycki  <beren12@users.sourceforge.net>

	* PkgVersion.pm: Allow passing of TERM to build env (colorgcc)

2005-04-16  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm, Services.pm: Improved error when no gcc_select present.

2005-04-15  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: No interruption of buildlock pkg lookup

2005-04-11  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: add a default for CXXFLAGS for recent distributions

2005-04-08  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Optimize 'fink list' with globs or multiple args.

2005-04-05  Daniel Macks  <dmacks@netspace.org>

	* Package.pm, Shlibs.pm: warn but continue if any exceptions
	during update*_db

2005-04-05  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm: Started work for auto-switching depends inbetween builds

2005-04-04  Daniel Macks  <dmacks@netspace.org>

	* Package.pm, Shlibs.pm: Check defined($FH) not defined(fileno($FH))

2005-04-04  Daniel Macks  <dmacks@netspace.org>

	* Package.pm, Shlibs.pm: Only enforce non-concurrent indexing when
	cache is writable.

2005-03-30  Daniel Macks  <dmacks@netspace.org>

	* Package.pm, Shlibs.pm: Switch to flock()-based concurrent-index lock

2005-03-30  Daniel Macks  <dmacks@netspace.org>

	* Package.pm, Shlibs.pm: only use concurrent-index-run results if
	we have Storable

2005-03-25  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Fix PostInst creation of /Applications/Fink
	symlinks (patch by AIDA Shinra)

2005-03-23  Daniel Macks  <dmacks@netspace.org>

	* VirtPackage.pm: Use the gcc* FAQ for all gcc* Homepages.

2005-03-23  Daniel Macks  <dmacks@netspace.org>

	* Shibs.pm: Scattered code cleanups.
	* Package.pm, Shlibs.pm: reduce Package/Shlibs differences.

2005-03-22  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm, Package.pm, Shlibs.pm: Fixed scoping of $SIG{INT}

2005-03-21  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: Implemented 'ignore_INT' option for execute().
	* PkgVersion.pm: Added ignore_INT for all dpkg calls.

2005-03-18  Daniel Macks  <dmacks@netspace.org>

	* CLI.pm: Better sanity-check of user input to prompt_selection
	and prompt_boolean
	* Package.pm: Improved diagnostics when dup %f with different %e.

2005-03-14  Daniel Macks  <dmacks@netspace.org>

	* SelfUpdate.pm: Fix prompt for CVS username.

2005-03-11  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm: fix double display of shlibs library reading

2005-03-11  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Fix warning when another process has removed buildlock

2005-03-10  Daniel Macks  <dmacks@netspace.org>

	* VirtPackage.pm: Use opendir() for reading a dir.

2005-03-10  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: add a check for /Developer/SDK

2005-03-09  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: add a check for cups

2005-03-08  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Build all dpkg scripts concurrently in memeory
	instead of looking over them one at a time.

2005-03-08  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Package.pm: refactoring require_packages and forget_packages
	* Bootstrap.pm, Engine.pm, Selfupdate.pm: Removing calls to
	Fink::Shlibs->require_packages, Fink::Shlibs->forget_packages

2005-03-08  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Bootstrap.pm, Engine.pm: Adding missing calls to rebuilt the
	shlibs.db
	* Package.pm: Fixed require_packages from 2005-02-23 commit to
	combine duplicate code

2005-03-07  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Config.pm: Added new $dbpath var
	* Shlibs.pm, Package.pm, Selfupdate.pm: Moved db files to
	%p/var/lib/fink and changed to use new $dbpath var

2005-03-07  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: remove app link in /Applications/Fink if it
	still exists.

2005-03-03  Daniel Macks  <dmacks@netspace.org>

	* Configure.pm: Invert meaning of choose_mirrors return (true
	means unchanged)

2005-03-03  Daniel Macks  <dmacks@netspace.org>

	* Configure.pm: Add boolean return value to choose_mirrors, indicating if mirror selections are changed

2005-03-02  Daniel Macks  <dmacks@netspace.org>

	* VirtPackage.pm, Notify.pm: Fix $VERSION for emacs paren balancer.

2005-03-01  Daniel Macks  <dmacks@netspace.org>

	* Notify/QuickSilver.pm: thought it was the Say module. Corrected
	to QuickSilver.
	* Notify/Growl.pm: Simplify do_notify
	* Notify/*.pm: Fix $VERSION for emacs paren balancer.
	* Notify/QuickSilver.pm, Notify/Say.pm, Notify/Syslog.pm: use
	package global variable for Unix command. Improved error checking
	during writing to pipe.

2005-02-28  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Improved wording for scorllkeeper misuse warnings.

2005-02-28  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Services.pm: Repair dumpinfo under perl 5.6 (thanks to Martin
	Costabel for the fix)
	* PkgVersion.pm: Improved error message for buildlock failure.

2005-02-28  Justin F. Hallett  <thesin@users.sourceforge.net>

	* VirtPackage.pm: Added Growl 0.6 detection

2005-02-27  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Engine.pm: Enable BuildConflicts when running "fink install" (not
	just when running "fink build")

2005-02-27  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm, PkgVersion.pm: Better scoping and more flexible
	handling of Config options for automatic validation with -m
	* Engine.pm: Allow -m for 'fink update'. Allow synonyms for fink
	cmds when checking whether -m is allowed.

2005-02-27  Daniel Macks  <dmacks@netspace.org>

	* VirtPackage.pm: add Homepage to the install script failure for
	virtual packages.

2005-02-26  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Validation.pm: check RuntimeVars for DYLD_LIBRARY_PATH: %p/lib
	and error if it exists.

2005-02-25  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: add DescDetail to the install script failure for
	virtual packages.

2005-02-25  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Validation.pm: added runtimedepends and addshlibdeps to accepted list
	of fields, and added addshlibdeps to boolean list.
	* PkgVersion.pm, Shlibs.pm: Added some maintainer output

2005-02-25  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm, PkgVersion.pm: Adding maintainer mode, -m|--maintainer,
	which will enable extra output for maintainers and will self validate
	the info and deb files.

2005-02-25  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: add return values for validate_*_file

2005-02-25  Daniel Macks  <dmacks@netspace.org>

	* VirtPackage.pm: Make InstallScript output stand out better

2005-02-25  Daniel Macks  <dmacks@netspace.org>

	* Package.pm: More-compatible syntax for open().

2005-02-24  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: When a compile fails, point the user at the FAQ
	and mailing lists *before* having them e-mail the maintainer
	directly.

2005-02-23  Daniel Macks  <dmacks@netspace.org>

	* CLI.pm: Added new "intro" param to prompt_selection
	* Configure.pm, Engine.pm, PkgVersion.pm, SelfUpdate.pm: use new
	"intro" param to prompt_selection

2005-02-24  Dave Morrison  <dmrrsn@users.sourceforge.net>

	*VirtPackage.pm: perl packages now Provide digest-pm (when >= 5.8.0)

2005-02-23  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Engine.pm, Package.pm, SelfUpdate.pm, Shlibs.pm: refactored some
	of the code so that there's less duplication.  Shlibs.pm now
	ISA Package.pm.

2005-02-23  Daniel Macks  <dmacks@netspace.org>

	* Notify.pm, Notify/Growl.pm, Engine.pm: Canonicalize notification
	event names to /(Passed|Failed)$/

2005-02-23  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Test length instead of logical value of strings.
	Overhaul DocFiles handler.

2005-02-23  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Shlibs.pm: removed old comments and fixed all print commands to use
	STDERR

2005-02-23  Justin F. Hallett  <thesin@users.sourceforge.net>

	* all files: Merged in Shlibs branch.

2005-02-22  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: protect pkgnames when used as regex patterns.

2005-02-22  Daniel Macks  <dmacks@netspace.org>

	* Config.pm, Configure.pm: Removed Verbosity:4 (pedantic) level.
	* Engine.pm: Added --(no-)pedantic flag to 'fink validate'.
	* Validation.pm: Use --pedantic flag instead of verbosity level to
	control display of pendantic warnings

2005-02-22  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Package.pm: Lock indexing so multiple indexes don't step on
	each other and/or fail.  If one is indexing, other fink processes
	will wait for it to finish and then just re-load the package
	hash from storable.

2005-02-21  Daniel Macks  <dmacks@netspace.org>

	* Package.pm: overhaul search_comparedb: stop as soon as find one
	newer file, use piped open() so don't have to wait for `` to
	finish before beginning to process outout.

2005-02-21  Daniel Macks  <dmacks@netspace.org>

	* Package.pm: overhaul update_db, including warning immediately if
	cannot update cache

2005-02-20  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: backing out 'snapshot' until after 0.24

2005-02-18  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: dpkg script #! test: fix fieldnames, be louder if
	mismatch.

2005-02-18  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Also store $timestamp in _lockpkg; *always*
	verify timestamp before removing lockpkg.

2005-02-17  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: if buildlock installation fails, only remove
	residue if it is from the same lock.

2005-02-17  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Catch %n (and related) in Description

2005-02-17  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: be sure that the pre-expansion of conditionals
	is only applied to ones containing "%{Distribution}"
	* Bootstrap.pm, SelfUpdate.pm: move the list of additional packages
	to be installed to a new function in Bootstrap.pm, which can be
	shared by both modules.  Add a warning when "fink selfupdate" is
	run with an unsupported version of perl.
	* Bootstrap.pm: update modules needed for bootstrapping in 10.2-gcc3.3
	* Bootstrap.pm: remove "storable-pm" from the list of additional
	packages

2005-02-15  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: add new general-purpose get_depends method,
	rewrite set_buildlock to use it
	* Engine.pm: rewrite show-deps functions to use get_depends

2005-02-13  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* NetAccess.pm: Remove code whose only obvious purpose is to cause
	breakage.

2005-02-13  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: allow the creation of several .info
	files from a single .info.in, depending on %{Distribution};
	reorganize some functions to accomodate dist-module.pl

2005-02-12  Peter O'Gorman  <ogorman@users.sourceforge.net>

	* Bootstrap.pm (check_host): We work on 10.3.8.

2005-02-09  Chris Dolan <chrisdolan@users.sourceforge.net>

	* Engine.pm: improvements for snapshot command

2005-02-09  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: lol_remove_self(): skip clusters after removing them

2005-02-09  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Rewrite show_deps_display_list using lol_remove_self().
	* PkgVersion.pm: Implement lol_remove_self() (also handles Provides).
	* Services.pm: Implement cleanup_lol().

2005-02-08  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Fix plural in package count msg.
	* Configure.pm: Rework proxy prompting: consolidate whole msg into
	$prompt, add note about value visibility, clean up variable usage.
	Ignore whitespace in answers. Add msg if skipping UseBinaryDist.

2005-02-08  Daniel Macks  <dmacks@netspace.org>

	* CLI.pm: don't export obsoleted prompt_selection_new
	* PkgVersion.pm: fixed a prompt*() API-change straggler.

2005-02-08  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* CLI.pm: Rename prompt_selction_new prompt_selection. Switch
	prompt, prompt_boolean, and prompt_selection to use named
	parameters.
	* *.pm: Adjust prompt*() calls for new API.

2005-02-06  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Bootstrap.pm: Replacing ncurses with libncurses5 for bootstraping

2005-02-06  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Fix .deb-creation error checking.

2005-02-05  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: ...which it now does, so reviving it

2005-02-05  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm: backing out last change till it's complete and works

2005-02-05  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: first arg to process() is ref to original @ARGV not
	scalar concat of canonical getopt flags. First restart_as_root arg
	is no longer handled as specially-preprocessed text.

2005-02-05  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Alphabetize and remove duplicates in output of show-deps.

2005-02-04  Chris Dolan <chrisdolan@users.sourceforge.net>

	* Engine.pm: Add snapshot command

2005-02-03  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Change set_buildlock so that Depends are not
	included. Implement get_family_parent().

2005-02-03  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Notify/Growl.pm: add support for new images, and sticky defaults

2005-02-02  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Engine.pm: Only notify on success if Fink has been around for a
	miniumum time period.

2005-02-02  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Warn if used debconf but no Depends:debconf.

2005-02-02  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Notify.pm: Fixed dmacks' breakage, plus better test for new() failure.
	* Notify.pm, Engine.pm: Add notifications for complete success, failure.

2005-02-02  Daniel Macks  <dmacks@netspace.org>

	* Notify.pm: Improved handling of failures of notifier new().
	* Notify/*.pm: test for file executability/readability, not just
	its existence.

2005-01-31  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Notify.pm, PkgVersion.pm, Services.pm, Notify/*.pm:
	updated to a more modular notification system, including plugins
	for growl, apple text-to-speech, quicksilver, and syslog.

2005-01-31  Justin F. Hallett  <thesin@users.sourceforge.net>

	* VirtPackage.pm: Added Growl virtual pkg

2005-01-31  Daniel Macks  <dmacks@netspace.org>

	* VirtPackage.pm: No 64-bit-specific gcc* pkgs exist at this time.

2005-01-31  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Warn for "Provides: foo (versiondata)"

2005-01-31  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Implemented --recursive for fetch mode. Implemented
	--dry-run in the engine (only available with fetch --recursive so
	far). Improved pkgspec constants usage in real_install.

2005-01-30  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm, Services.pm: Changed "growl" to notify.  This
	  will be replaced with something more configurable post-0.24.

2005-01-30  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* *.pm: Updated POD validation errors.

2005-01-30  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm:  Slightly rearrange order of functions, for clarity;
	expand documentation of inject_package.

2005-01-29  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm:  Add documentation

2005-01-27  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Warn if %p/lib/charset.alias in .deb other than libgettextN.

2005-01-27  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm, Package.pm, Engine.pm: Clean up aptdb (UseBinaryDist)
	stuff:
		- Normal usage of regexes, safe use of 'open', OO usage in
		apt-cache parsing.
		- Moved aptgetable status into regular fink DB.
		- Fixed bug where fink would try to use apt-get to fetch a .deb when
		the apt-cache info comes from dpkg status (not a real repo).
		- Removed Package::is_in_apt and fixed all uses thereof.
		- Make fink complain if two packages have the same fullname.

2005-01-27  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Fix conditional_pkg_list whitespace removal again.
	* Services.pm: collapse_whitespace and pkglist2lol now remove
	leading/trailing whitespace.

2005-01-26  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Make sure conditional_pkg_list always removes
	leading/trailing whitespace.

2005-01-25  Daniel Macks  <dmacks@netspace.org>

	* VirtPackage.pm: gen_gcc_hash() now includes dpkg status, uses
	%r=0 for absent pkg.

2005-01-24  Daniel Macks  <dmacks@netspace.org>

	* SelfUpdate.pm: Remove ncurses-dev from "important" (implied
	dependency) list.

2005-01-24  Daniel Macks  <dmacks@netspace.org>

	* VirtPackage.pm: Extract core of gcc* pkg data into new
	gen_gcc_hash(). All expected gcc* pkgs now always exist in
	pdb (marked "uninstalled" if not present).

2005-01-24  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Extract core of cmd_fetch_all() and
	cmd_fetch_all_missing() into a new do_fetch_all(), which uses
	call_queue_*(). Fix spacing on parse_fetch_options() help. Reorder
	some subs. Move BuildConflicts removal to after src/deb download.

2005-01-23  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* VirtPackage.pm: Don't print messages when not in debug mode (they
	will be seen every time apt/dpkg is run!). Eliminate repetition of
	path to cc1plus.

2005-01-23  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm, Services.pm: Replace do_calls() with
	call_queue_clear() and call_queue_add().

2005-01-22  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm:  Disallow bootstrapping with perl 5.8.4

2005-01-22  Peter O'Gorman  <ogorman@users.sourceforge.net>

	* Bootstrap.pm:  Allow bootstrapping with perl 5.8.6 (maybe).

2005-01-20  Daniel Macks  <dmacks@netspace.org>

	* NetAccess.pm: Un-quotemeta std URL chars that aren't shell metas.

2005-01-20  Daniel Macks  <dmacks@netspace.org>

	* NetAccess.pm: quotemeta() Source values when used in shell cmd.

2005-01-19  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: New do_calls() function processes a list of method
	and function calls.
	* Engine.pm: cmd_fetch, cmd_fetch_missing, and real_install now
	use do_calls() to handle phase_fetch*() calls.

2005-01-18  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: add new param to expand_percent() to reduce
	unknown-% from die to warn+ignore or silent+ignore.
	* PkgVersion.pm: param_expanded() silently ignores unknown %-exp.
	* Engine.pm, PkgVersion.pm: allow unknown % in DescDetail and
	DescUsage.

2005-01-17  Daniel Macks  <dmacks@netspace.org>

	* VirtPackage.pm: Add "system-xfree86-manual-install" as a
	(non-installed) catch-all for all of Apple X11*.pkg

2005-01-17  Daniel Macks  <dmacks@netspace.org>

	* CLI.pm: (Re)introduce prompt_selection() with timeout; remove
	timeout from prompt_selection_new().
	* PkgVersion.pm: Fix error msg for buildlock failure.

2005-01-16  Daniel Macks  <dmacks@netspace.org>

	* CLI.pm: Add $timeout param to prompt() and prompt_selection_new().

2005-01-14  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Re-add missing \n in get_description.

2005-01-14  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm, PkgVersion.pm: Do percent-expansion in DescDetail and DescUsage.

2005-01-13  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: Fixed handling of delete_tempfile flag for execute().

2005-01-12  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Change buildlock to always lock on parent pkg.

2005-01-09  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Patch dumpinfo to display "b" if --use-binary and
	.deb is downloadable (based on Patches #1062085).

2005-01-09  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Put off variable assignments in loop until after
	checking abort conditions.
	* Package.pm: Add is_provided() method (Patches #1053414).
	* Engine.pm: 'fink list' shows "p" for virtual that is installed;
	'fink listpackages' says YES for provided pkgs (Patches #1053414).

2005-01-09  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: rewrite execute() build_as_nobody to use recursive
	wrapper (cuts down on system.log polution and fixes pipelines).

2005-01-06  Christian Schaffner  <chris01@users.sourceforge.net>

	* Configure.pm: Add conf_file_compat_version constant to indicate the
	  current compatibility version of the fink.conf file.
	  Set the ConfFileCompatVersion to that value during configure.

2005-01-05  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Fixed processing of execute() return-code.

2005-01-05  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Try not to leave partially-installed buildlock pkg.

2005-01-05  Daniel Macks  <dmacks@netspace.org>

	* SelfUpdate.pm: Do 'apt-get update' *before* rebuilding aptdb.

2005-01-05  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: Added a delete_tempfile flag for execute().

2005-01-05  Christian Schaffner  <chris01@users.sourceforge.net>

	* PkgVersion.pm: Change wording for failed 'fink remove'.

2005-01-02  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* all: updated Copyright notice

2004-12-28  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Don't crash validator when given unknown filetypes.

2004-12-28  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: rewrote execute() to use sudo to drop to user="nobody"

2004-12-27  Chris Zubrzycki <beren12@users.sf.net>

	* PkgVersion.pm: Better description for removing stuck build locks

2004-12-22  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: Fixed prepare_script() removal of blank lines from
	middle of $script. Removed no-longer-needed hack from execute().

2004-12-21  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: prepare_script() may be leaking blank lines, so
	skip them in execute()'s execution loop.

2004-12-21  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm, Services.pm: Replace execute_nonroot_okay()
	wrapper around execute() with an %options flag to execute().

2004-12-20  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: fix error which prevented &enforce_gcc from working
	properly on 10.2.
	* Configure.pm: existing users who run "fink configure" get a default
	answer of "no" for the UseBinaryDist question.

2004-12-20  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: unify execute() and execute_script() into execute().
	Scrap execute_script_nonroot_okay().
	* PkgVersion.pm: Adjust run_script() for new execute().

2004-12-20  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Warn is pkgname field of shlibs looks like a
	version-number.

2004-12-20  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: Add import for POSIX functions. Move parsing of
	scripts from execute_script() into new prepare_script() function.

2004-12-19  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: recognize 10.3.7

2004-12-18  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm, PkgVersion.pm, Services.pm: Move the code which
	verifies that the gcc version is correct to a new &enforce_gcc
	function in Services.pm.  Make sure that this function does what
	we want it to do for future versions of OS X.

2004-12-15  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: Change execute*() to take option=>value hash of
	options instead of parameter-ordered values. Only option is
	'quiet'.
	* Engine.pm: Convert to new Services::execute*() API.

2004-12-09  Daniel Macks  <dmacks@netspace.org>

	* Config.pm, Configure.pm: Verbose=1 *is* desired default.

2004-12-07  Daniel Macks  <dmacks@netspace.org>

	* Config.pm: Default to Verbose=3.

2004-12-07  Daniel Macks  <dmacks@netspace.org>

	* Config.pm, Configure.pm: New Verbose=4 setting.
	* Configure.pm: Default to Verbose=3 (sync with fink.conf manpage).
	* Validation.pm: Require Verbose>3 to do pedantic Description checks.

2004-12-06  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Config.pm, Engine.pm, Package.pm, PkgVersion.pm, SelfUpdate.pm:
	Refactor 'UseBinaryDist' to use a new binary_requested function
	which takes into account the per-package -b and -c flags as well
	as the global UseBinaryDist option.
	* Bootstrap.pm: Disable 'UseBinaryDist' during bootstrap
	* Configure.pm: Set 'UseBinaryDist' to be false if we are not
	installed in /sw

2004-12-06  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Also catch libtool files pointing to %i and %I

2004-12-03  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Fix 'entries that end in "/"' msg.
	Fix regex in libtool %b test.

2004-12-03  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Remove test for Depends:pkgconfig when
	lib/pkgconfig files exist.

2004-12-02  Rob Braun <bbraun@opendarwin.org>

	* Engine.pm: Make 'fetch' support the same arguments as 'fetch-all'.

2004-11-30  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Fixed &execute() result-code handling when
	--build-as-nobody reverts %i ownership to root.

2004-11-28  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: Implement execute_nonroot_okay and
	execute_script_nonroot_okay as wrappers that obey fink's
	--build-as-nobody flag.
	* PkgVersion.pm: New fourth argument to run_script(): boolean
	whether okay to run as non-root.
	* PkgVersion.pm: --build-as-nobody causes unnpack, patch, compile,
	and install phases to run as user nobody, then install dir is
	chowned back to root before setting up .deb,
	* Engine.pm: Big fat warning if using --build-as-nobody.

2004-11-24  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Do not include "$epoch:" in buildlock pkgname.

2004-11-24  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Remove timestamp from buildlock pkgname; use
	lockpkg's dpkg preinst scripts to prevent concurrent builds.

2004-11-22  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: fixed .la check to look for %b/%N not %b/%n

2004-11-22  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Allow .deb to have files in %p/Applications

2004-11-22  Christian Schaffner  <chris01@users.sourceforge.net>

	* Validation.pm: Check for overwritten system symlinks (e.g. /var).

2004-11-21  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Check for .la files that point to their build dir.

2004-11-21  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Refactor .info validation to consolidate
	parent/splitoff common checks.

2004-11-21  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: nicer formatting for growl

2004-11-19  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Error if dpkg install-time scripts use %i

2004-11-19  Christian Schaffner  <chris01@users.sourceforge.net>

	* Validation.pm: Check all fields for non-ascii characters.

2004-11-19  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Use uname(0) instead of hardcoding kernel=darwin
	when setting Depends for the kernel pkg.
	* VirtPackage.pm: Use uname(0) instead of hardcoding kernel=darwin
	for kernel pkg, and have this pkg Provides:kernel

2004-11-18  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: add support for --version in fink-virtual-pkgs

2004-11-18  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: Fixed some annoyances in growl notification
	and AppBundles: handling

2004-11-18  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: Make the failure message more friendly

2004-11-18  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: Apparently gcc4 is *not* binary-compat with
	gcc3.3, even though it's supposed to be.  At least, not right
	now.  :(

2004-11-16  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Use Config option no_buildlock to skip build-locking
	* Bootstrap.pm: no_buildlock during phase 3

2004-11-16  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: disable UseBinaryDist during bootstrap

2004-11-16  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Config.pm, PkgVersion.pm, Services.pm: Added some hooks to
	allow using bits of the Fink framework with external scripts on
	Linux.

2004-11-15  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm, PkgVersion.pm: Implemented build-time locking
	of dependencies via fink-buildlock-* packages.

2004-11-15  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Simplify %type test for main, correct it for
	SplitOffs; implement dpkg install-time script interpretter check
	for SplitOffs.

2004-11-14  Daniel Macks  <dmacks@netspace.org>

	* NetAccess.pm: Fix my fix to regex.

2004-11-14  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Error if %type_ *anywhere* but not InfoN>=2.

2004-11-14  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm, CLI.pm: More comprehensive trapping of SIGINT.
	* NetAccess.pm, Package.pm, Services.pm, Validation.pm: Use \#
	instead of # and \Z instead of $ in some regex to make emacs paren
	balancer happy.

2004-11-12  Daniel Macks  <dmacks@netspace.org>

	* CLI.pm: Refactored gathering of user input. All prompt_*() now
	hand off to new get_input() (semi-revival from Services.pm from
	before CLI/Services split), which propagate control-C and other
	exceptions correctly during blocking and non-blocking input.

2004-11-12  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* SelfUpdate.pm: Don't automatically update gettext-bin

2004-11-09  Daniel Macks  <dmacks@netspace.org>

	* Mirror.pm: Re-reworded menu b/c must match /^Custom/
	* CLI.pm: During blocking user input, propagate control-C as die()

2004-11-08  Daniel Macks  <dmacks@netspace.org>

	* Mirror.pm: Clarified menu wording for CustomMirror set.

2004-11-07  Peter O'Gorman  <ogorman@users.sourceforge.net>

	* Bootstrap.pm: We work with 10.3.6.

2004-11-06  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Corrected regex in dpkg install-time script
	interpretter check.

2004-11-05  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Complain about writing (Pre|Post)(Inst|Rm)Script
	with explicit #! call. Use \Z instead of $ so can remove emacs
	paren balancing hack.

2004-11-04  Christian Schaffner  <chris01@users.sourceforge.net>

	* Engine.pm: Add a '--recursive' option to the remove and purge commands,
	  which makes fink use 'apt-get remove'.
	* PkgVersion.pm: Added two new phases: 'phase_deactivate_recursive'
	  and 'phase_purge_recursive'.

2004-11-02  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: run SplitForks on AppBundles

2004-11-02  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Bootstrap.pm, PkgVersion.pm: make gcc 4.0 count as gcc 3.3

2004-11-01  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: make the AppBundles: stuff be smarter about
	linking things around in a way that people can move them

2004-10-29  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm, Validation.pm: Implemented AppBundles:
	which does essentially what JarFiles does, copies an application
	bundle to a known directory (%p/Applications)

2004-10-25  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Services.pm, PkgVersion.pm: support for growl notifications if
	Mac::Growl is available.

2004-10-25  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Use named constants for fink list/apropos option bits.

2004-10-22  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: Fixed ignoring of null OR clusters in lol2pkglist.

2004-10-19  David Höhn <dmalloc@users.sourceforge.net>

	* Configure.pm: Use print_breaking for the extremely long
	prompt that used to be the proxy configure prompt. This is more
	readable and looks better.


2004-10-17  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: lol2pkglist code cleanup.

2004-10-16  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Engine.pm: Fix bug in code for broken gcc warning; also, add pause
	after warning.

2004-10-16  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: Implemented pkglist2lol and lol2pkglist, to convert
	Depends-like fields between Debian string and a list-of-lists of
	pkgname atoms.
	* PkgVersion.pm: Convert conditional_pkg_list to use the new
	Services functions. Fix check for Depends:darwin to allow pkgnames
	to contain "darwin". Optimize BDO violation check.

2004-10-15  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: conditional_pkg_list: Fix parsing so no extra whitespace.

2004-10-15  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Engine.pm: Warn users with the broken gcc, whenever they compile
	something.

2004-10-14  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: Add the broken-gcc package, currently detects
	XCode 1.5 build 1666.

2004-10-14  Christian Schaffner  <chris01@users.sourceforge.net>

	* Engine.pm: Introduce new column in the commands matrix indicating if
	  a command needs apt-get or apt-get with the --ignore-breakage option
	  if the UseBinaryDist option is enabled. This requirement is then
	  checked before the command is executed.
	  Also use full path to call apt-get and apt-cache.
	* Package.pm: Use full path to call apt-get.
	* PkgVersion.pm, SelfUpdate.pm: Remove obsolete tests for apt-get.
	  Use the full path to apt-get.

2004-10-12  David Höhn <dmalloc@users.sourceforge.net>

	* Configure.pm: Chnage the prompt for proxy selection slightly.
			Some clean up of phrases. I thinkt his prompt is
			too long, we can easily revert if, should people
			dislike it.

2004-10-12  Daniel Macks  <dmacks@netspace.org>

	* Package.pm: Obey flock when reading db files via Storable

2004-10-12  Christian Schaffner  <chris01@users.sourceforge.net>

	* Engine.pm: Implement 'UseBinaryDist' option that causes fink
	to download pre-compiled binary packages from the binary distro if
	available and the deb is not yet on the system. The cleanup cmd will
	also call 'apt-get autoclean' if the 'UseBinaryDist' option is enabled.
	* Package.pm: add is_in_apt sub to find a specific package in aptdb.
	Add update_aptdb sub to update the apt-get db file which is called
	from	update_db
	* PkgVersion.pm: Add is_aptgetable sub that checks if a package is
	available via apt-get. find_debfile now also finds debs in
	'$basepath/var/cache/apt/archives/' if the 'UseBinaryDist' option
	is enabled. Add subs 'phase_fetch_deb' and 'fetch_deb' to fetch the
	debs from the binary distro. This uses the '--ignore-breakage' option
	of apt-get added in apt >= 0.5.4-51 (or >= 0.5.4-41 for 10.2-gcc3.3)
	* SelfUpdate.pm: Call 'apt-get update' during finish if the
	'UseBinaryDist' option is enabled.
	* Configure.pm: Add configuration for 'UseBinaryDist'.
	* Services.pm: Add new sub 'count_files' to count files in a directory.
	Used in Engine.pm to count how many files were deleted during cleanup.
	Don't output the cmd in execute if quite is set to 1.
	(Patches: #1037296)

2004-10-08  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Check ConfigureParams for hardcoded /sw.

2004-10-05  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: show-deps: Conflicts are *not* considered BuildConflicts.
	* PkgVersion.pm: resolve_depends(): Documented parameters and most
	internal variables. Improved ordering of variable declarations.

2004-09-28  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Implemented 'fink show-deps' (cmd_show_deps() and
	show_deps_print_pkglist()).

2004-09-27 Chris Zubrzycki <beren12@users.sourceforge.net>

	* Engine.pm: Implemented --keep-src for fink cleanup.

2004-09-23  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Implemented Type:bundle and Type:dummy support in
	get_script. Adjusted phase_install to use get_script even for Type:bundle.

2004-09-21  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: Documented all of the tests, did a little
	rearranging to facilitate a sensible order in the docs, and
	added system-java-dev.

2004-09-21  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: fix regex for Package and Version to prohibit commas
	(Patches #1010229)

2004-09-19  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion,pm, Validation.pm: Add deprecated-feature warning for
	implicit Source to indexing loop and validator.

2004-09-19  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: remove extraneous quotes in read_properties_lines err msg.

2004-09-10  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: Handle xorg in system-xfree86 checks.

2004-09-09  Daniel Macks  <dmacks@netspace.org>

	* VirtPackage.pm: only set cctools_single_module version if it exists.

2004-09-06  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm, VirtPackage.pm: Some tweaks to the way
	system-java and $JAVA_HOME work.

2004-08-31  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Do not save raw SplitOffN in parent pkg.

2004-08-22  Daniel Macks  <dmacks@netspace.org>

	* CLI.pm, Engine.pm: remove refs to non-existent function.
	* Engine.pm: fix passing of help_list_apropos callback.
	* PkgVersion.pm: fix phase_fetch on splitoff to download parent.

2004-08-21  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Extract list/apropos help into separate function.
	Pass $cmd through fetch-* to make help cmd-specific.

2004-08-20  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: sync helpscreen and Getopt flag names.

2004-08-19  Daniel Macks  <dmacks@netspace.org>

	* SelfUpdate.pm: Fix Tree matching (revert r1.67->1.68 in part).

2004-08-18  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Typo in is_fetched() for Type:bundle.

2004-08-16  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm, PkgVersion.pm: Fixed %-expansion on Files.

2004-08-16  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Unify get_*script() into new get_script().
	* Engine.pm: update dumpinfo for new get_script().

2004-08-15  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Implement conditionals for Files field.
	conditional_space_list: trim leading/trailing whitespace in return
	value.
	* Engine.pm: update dumpinfo for new conditionalized Files.

2004-08-14  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: support for newer (and 64-bit)  versions of gcc

2004-08-13  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Remove 'fink checksums'.

2004-08-09  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: Recognize darwin 7.5.0.

2004-08-09  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: disable caching for get_env if in bootstrapping mode.

2004-08-09  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: catch "%p\/src\/" also, not just "%p/src/".

2004-08-08  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Rename parse_configureparams() to prepare_percent_c()
	and: no longer consider %c cacheable and re-protect % in %c.
	* Engine.pm: fixes for prepare_percent_c().

2004-08-08  Max Horn <max@quendi.de>

	* Engine.pm: Fix list command with regards to virtual packages.

2004-08-05  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Config.pm: correct the regex for parsing Trees in write_sources_list

2004-08-05  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: cleaner form of the existing code for detecting
	the cctools version that doesn't use `strip`  =)

2004-08-03  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: merge from cond_config_params: Activate
	conditionals in ConfigureParams.
	* Text/DelimMatch.pm: merge from cond_config_params: import
	Text::DelimMatch-1.06 from CPAN into Fink:: package namespace.

2004-08-01  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: eval_conditional: do not proceed if bad syntax

2004-07-29  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: more modularization, to allow inject.pl in 10.3
	directory to call some modules; eliminate local/bootstrap; injected
	packages now go into local/injected
	* Config.pm: new function write_sources_list which writes an
	appropriate file $basepath/etc/apt/sources.list .  (Called
	automatically by $config->save().); move the hook to old pre-10.2
	debs from postinstall script to Config.pm; allow local modifications
	at both the top and bottom of the sources.list file, and preserve
	them when the file is re-generated
	* FinkVersion.pm.in: the VERSION file and the stamp-* files will
	now live in /sw/fink/dists, not /sw/fink
	* SelfUpdate.pm: manipulate stamp-* files in new location; rsync must
	include DISTRIBUTION and README files; change the VERSION when
	rsyncing to reflect rsync; store the website and cvs-repository
	addresses in /sw/lib/fink/URL via the fink-mirrors package, and use
	the addresses stored there rather than hard-wired ones

2004-07-29  Daniel Macks  <dmacks@netspace.org>

	* VirtPackage.pm: switch to perl5.6.x-safe use of constants.
	* Validation.pm: consolidate system calls for reading .deb fields.

2004-07-28  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Parse .deb control early; make data available in
	$deb_control. For scrollkeeper-update check: make sure it's called
	by *both* control scripts; remove circular dependency requirement
	for scrollkeeper.deb.

2004-07-28  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: handle newer cctools that don't contain the
	cctools version in the "what" information anymore

2004-07-28  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: For .deb, check scrollkeeper-update usage: must
	be run by .deb control scripts (Post{Inst,Rm}), not in pkg build
	phase; needs Depends:scrollkeeper

2004-07-27  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: fixes to my allowed-dirs changes.

2004-07-27  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Add --prefix to 'fink validate'.
	* Validation.pm: Allow user-speficied alternate prefix (%p other
	than $config->basepath). Added error checking when reading .info
	and .patch.

2004-07-27  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Check that files are in allowed dirs of .deb,
	not just not-in disallowed dirs.

2004-07-27  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Move @bad_dirs check early so don't miss things
	that get special handling (but not validation) by other matches.
	Replace @bad_dirs explicit loop with grep {}.

2004-07-18  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: _Un_restrict use of %a to PatchScript.

2004-07-19  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Run CompileScript (if one is explicitly defined)
	for dummy packages instead of just crashing.
	* VirtPackage.pm: Add CompileScript field: crash with with error
	message explaining to RTFDescDetail.

2004-07-18  Max Horn <max@quendi.de>

	* Configure.pm: Fix default value for the master mirror configure option.

2004-07-18  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Change get_tarball to return undef (instead of
	"none") if no such suffix. Fix get_checksum to really return undef
	if field not in .info.

2004-07-18  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Restrict use of %a to PatchScript.

2004-07-17  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: make sure a minimum of java versions are filled
	in so we don't get warnings.

2004-07-16  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm, Services.pm, Status.pm, VirtPackage.pm: import
	branch:virt_always_exists: virtual packages of non-installed
	things now appear as "uninstalled" rather than not even existing.

	* VirtPackage.pm (dmacks): Replaced dpkg "status" strings with
	constants.  Changed query_package to respect "status" (parallel to
	that method in Status.pm) instead of assuming presence of package
	entry is equivalent to it being installed.
	* PkgVersion.pm (rangerrick): Check whether VirtPackage's return
	value is undefined, since "0" is a true version, undefined is a
	non- existent one.
	* Services.pm (rangerrick): Treat undefined values passed to a
	version compare as a false value.
	* Status.pm (rangerrick): Simplify status checking.
	* VirtPackage.pm (rangerrick): Change all virtuals to exist even
	if they're not installed, with status "purge ok not-installed".

2004-07-14  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: add some jdbc stuff to the provides

2004-07-14  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: get_source_suffices now omits suffices for which
	value=none.
	* Engine.pm: fix dumpinfo for new get_source_suffices behavior.

2004-07-14  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Change get_checksum to return undef (instead of
	"-") if MD5 for requested suffix is not defined.
	* Services.pm: Make file_MD5_checksum die if checksum pipe
	output could not be parsed.
	* NetAccess.pm: fetch_url_to_file now takes undef instead of "-"
	as $checksum arg meaning "do not check".
	* Engine.pm, PkgVersion.pm: Changes for new get_checksum behavior.

2004-07-12  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: convert set_env (which alters ENV) to get_env
	(which just returns what env should be); fix run_script	accordingly.
	* Engine.pm: dumpinfo: add 'env' pseudo-field.

2004-07-09  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: set_env: simplify handling of NoSetENVVAR and
	SetENVVAR; implement caching of results; factor out path (string
	constant) for Type:java.

2004-07-08  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: system-java
	* PkgVersion.pm: support for Type: java

2004-07-02  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm:  Allow bootstrapping with perl 5.8.2 and perl 5.8.4.

2004-07-02  Daniel Macks  <dmacks@netspace.org>

	* SelfUpdate.pm: Remove redundant variable usage. Replace regex-
	match with string-equality to prevent accidental substring matches.

2004-06-30  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: Just a little rearranging to make things easier.

2004-06-29  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Mention which SourceN failed if missing SourceN-MD5.

2004-06-28  Daniel Macks  <dmacks@netspace.org>

	* NetAccess.pm: Add checksum argument to fetch_url_to_file; if it
	doesn't match, consider download a failure and continue through
	mirror list.
	* PkgVersion.pm: Pass $checksum to fetch_url_to_file in phase_fetch.

2004-06-27  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Move PatchScript processing into new get_patchscript
	method and enable %default_script (which is blank) in that field.
	* Engine.pm: Use new get_patchscript accessor for dumpinfo.

2004-06-26  Daniel Macks  <dmacks@netspace.org>

	* Base.pm: param_boolean now returns undef if field is not present.
	* Engine.pm, PkgVersion.pm: update to use new tristate param_boolean.

2004-06-25  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm: Stop ccache from making root-owned files in
	$HOME/.ccache/ of user running fink.

2004-06-25  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Slurp .deb contents first instead of checking
	line-by-line. Verify presence and execute-flag on daemonicfile
	executable and dependency on daemonic.

2004-06-25  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Check for hardcoded /sw in DaemonicFile.

2004-06-23  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Very strict check of Shlibs formatting.

2004-06-23  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: If have %type_*[*] in Package, error if not InfoN>=2.

2004-06-22  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm, Validation.pm: One more tweak to BuildDependsOnly:
	we now write out the value "Undefined" to the .deb if it wasn't
	defined in the .info, and test for that value when deciding whether
	or not to warn.

2004-06-22  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Use new accessors for CompileScript and InstallScript.
	* PkgVersion.pm: Added parameter to run_script to control whether
	%-expansion should be performed. Moved parsing of CompileScript
	and InstallScript (including defaults) into new get_compilescript
	and get_installscript accessors. Added support for %default_script
	in these fields.

2004-06-21  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Validation.pm: Check that BuildDependsOnly is a boolean field.
	* Validation.pm: Fix the validation check for boolean fields.

2004-06-21  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: When writing the contents of the BuildDependsOnly
	field into the .deb file, only write the contents if the field
	exists.
	* Validation.pm: Warn if headers are present (as well as a dylib)
	but BuildDependsOnly is not set to any value.

2004-06-20  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Disable Shlibs format check, and all Shlibs
	checks if not in single-pkg format).

2004-06-20  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm Make "NoSetLD_PREBIND:false" not disable prebinding.
	* Validation.pm: Warn if have pkg-config files but not depend on
	pkgconfig package. In .info SplitOff sections, note all problems,
	not just first. Check formatting of Shlibs field.

2004-06-20  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Validation.pm: Modify regex so that xemacs-base, xemacs-efs
	and xemacs-sumo are allowed to install .elc files.

2004-06-17  Dainel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Add final newline to generated daemonic .xml file.

2004-06-17  Dainel Macks  <dmacks@netspace.org>

	* Engine.pm: Made 'dumpinfo -fdaemonicfile' use multiline format.

2004-06-16  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Validation.pm: If BuildDependsOnly is not true, allow the directory
	/sw/include/ or any subdirectory of it, but do not allow *files*
	within that directory.

2004-06-15  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Validation.pm: Don't warn when the xfree86 package installs files
	outside /sw, as long as it installs them in the right place.
	Also, fixed the regex which lets (x)emacs install .elc files without
	the warning.

2004-06-04  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: Recognize darwin 7.4.0.

2004-06-03  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: When extracting tarballs, the optional flags
	which cause permissions and ownership not to be preserved
	should not be invoked during bootstrap (because the Apple-supplied
	gnutar is too old to know about these flags, in 10.2 and earlier).

2004-06-02  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm, Validation,pm: Write the contents of the
	BuildDependsOnly field into the .deb file, and when validating a
	.deb, verify that BuildDependsOnly is true whenever things are
	installed into /sw/include.

2004-05-26  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: dumpinfo: don't print fields that don't apply to
	splitoffs for splitoff pkgs.
	* PkgVersion.pm: get_source: no default Source for splitoff
	pkgs. get_source_suffices: no sources for splitoff pkgs.

2004-05-23  Daniel Macks  <dmacks@netspace.org>

	* PkgVerison.pm: get_source_suffices: Ignore SourceN for Type "bundle", "nosource", "dummy".

2004-05-21  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* VirtPackage.pm:  adjust the Provides in the system-perl packages

2004-05-13  Daniel Macks  <dmacks@netspace.org>

	* Command.pm: Fixed rm_f to not return failure for non-existent	files.
	Made _expand omit globs that match nothing, undefs, and blanks.

2004-05-13  Peter O'Gorman  <ogorman@users.sourceforge.net>

	* Command.pm: Fix Failed: can't symlink package due to perl's -e
	returning false if a file is a dangling symlink. Thanks to Ben Hines.

2004-05-11  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: Fixed problem where any commented-out line ending
	with "<<" in a heredoc was treated as the beginning of a nested
	heredoc.

2004-05-10  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: overhauled Source(N) <-> *(N)* correspondence checks.

2004-05-10  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: dumpinfo: status, allversions: note if binary avail.

2004-05-04  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Fixed bug in Depends processing where packages
	with version requirements could get dropped if field had conditionals.

2004-05-03  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: dumpinfo: status: add "have-deb", allversions: add
	"b" if .deb file is present.

2004-05-03  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: dumpinfo: fixed display of SourceN in all-fields
	mode, fixed display of -f sources, added "status" mode (is latest?
	is installed?), added "allversions" mode (list all versions and
	whether installed), all typically multiline fields always
	displayed multiline and indented 1 additional space, all typically
	single-line fields always displayed in-line, documented
	pseudofields.
	* Services.pm: version_cmp: added "<=>" op, added warning for
	unknown op. Implemented sort_versions.

2004-04-27  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* VirtPackage.pm: add Provides to system-perl packages >= 5.8.0

2004-04-26  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: dumpinfo: corrected printing of Desc* fields and
	of splitoffs for SplitOff packages, improved handling of -p keys,
	better error message for %-expansion.

2004-04-26  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Grr...committed wrong file. Fixing...

2004-04-26  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Pushed processing of ConfigureParams (including
	Type-specific default and setting %c expansion) into a new
	parse_configureparams() method. Disabled ConfigureParams
	conditionals processing. Removed processing of ConfigureParams out
	of indexing loop; now call parse_configureparams at the start of
	phases where %c might conceivably be used (patch/compile/install).
	* Engine.pm: Updated cmd_dumpinfo in accordance with new
	PkgVersion::*_configureparams(). Allow optional leading % in
	dumpinfo -p values.

2004-04-25  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: New 'dumpinfo' is live (--all, --field, --percent).
	Switched back to using Getopt.
	* CLI,pm: Removed parse_cmd_options b/c it was very slow. Removed
	print_optionlist since it is no longer used.

2004-04-25  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: New flags for 'fink dumpinfo' (not live yet),
	implemented using parse_cmd_options instead of Getopt (and simple
	print for help).

2004-04-22  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: .deb/control Source field corrected to contain
	parent pkg (if there is one) instead of always same as pkg itself.
	See fink-devel "Source field in var/lib/dpkg/available" April 2004

2004-04-22  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm, Services.pm: Move eval_conditional() from an
	instance method in PkgVersion to a package function in Services.

2004-04-22  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Move actual logical evaluation of conditional
	expression (Depends, etc.) into its own eval_conditional() method.
	Implemented get_configureparams() accessor, and enabled
	conditional syntax (same as Depends, etc.). Moved definition of %c
	in _expand later b/c need _expand (at least %type_*[]) for
	get_configureparams() conditionals.

2004-04-19  Daniel Macks  <dmacks@netspace.org>

	* CLI.pm: Use actual screen width in print_breaking(), not
	hardcoded value. Extract option/desc 2-column printing from
	parse_cmd_options() into new print_optionlist(). Display flag
	value type (or optional specified string) in parse_cmd_options().
	Remove stray debugging.

2004-04-19  Daniel Macks  <dmacks@netspace.org>

	* CLI.pm: Implement new parse_cmd_options() to process 'fink'
	subcommand options (handles --help including pretty-printing).

2004-04-18  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: All Type are now converted to all-lowercase. Make
	sure Type has been parsed into _type_hash during is_type() and
	get_subtype() calls.
	* Engine.pm: Simplified initial command routing.

2004-04-11  Daniel Macks  <dmacks@netspace.org>

	Engine.pm: dumpinfo improvements: list parent or splitoff
	packages, indicate which fields are from parent, both parent and
	splitoff InstallScript are displayed, only print field names if
	field is present.

2004-04-11  Daniel Macks  <dmacks@netspace.org>

	* NetAccess.pm: Drop any leading / in Source:mirror: pathname.

2004-04-11  Daniel Macks  <dmacks@netspace.org>

	* VirtPackage.pm: Added relevant FAQ entry as Homepage for gcc2
	and the system-* packages.

2004-04-11  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Perform %-expansion on Description (during indexing).
	* Validation.pm: When constructing allowed .info filenames, clear out
	strings of multiple hyphens or hyphens at the end. Also resolve some
	some "use of uninitialized value" warnings when certain fields are
	missing from the .info.

2004-04-09  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Fix dumpinfo so when run on a SplitOff package it
	gives the parent's fields for fields that don't make sense to have
	in a SplitOff.

2004-04-09  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Remembered to handle %ni and %Ni in $expand map.

2004-04-08  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Fixed parsing of .info that do not have a Type field.

2004-04-08  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Correctly expand %type_ for single-subtype
	types. For all multi-subtype types, use the single subtype ".".

2004-04-07  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: fix dumpinfo to give Source(N) field, not (renamed) tarball filename.

2004-04-07  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm: Implemented 'fink dumpinfo'

2004-03-30  Daniel Macks  <dmacks@netspace.org>

	* Bootstrap.pm: Recognize darwin 7.3.0.

2004-03-30  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: Be careful about permissions when creating directories

2004-03-28  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: When extracting tarballs, do not preserve
	permissions or ownership.

2004-03-26  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: handle SplitOff(N) in numerical order.

2004-03-23  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: %ni and %Ni instead of %in and %IN.

2004-03-23  Daniel Macks  <dmacks@netspace.org>

	* Package.pm: always expand_percent invariant portion of Package.
	* PkgVersion.pm: %in is invariant portion of Package, %IN is
	invariant portion of parent Package; %n reverted to whole Package.

2004-03-23  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: get_custom_mirror() now takes $suffix param.

2004-03-22  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* PkgVersion.pm: Allow non-consecutive SourceN (and related
	fields). Renamed get_param_with_expansion => param_expanded to
	fit naming convention, and added param_default_expanded.
	Distinguishing between SourceN fields is now done by suffix,
	using get_source_suffices().
	* Engine.pm: Modified to use suffix-indexed SourceN.

2004-03-18  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Forgot to include SplitOff (i.e., N=[null]).

2004-03-18  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Fixed regex error in params_matching for SplitOffN.

2004-03-18  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: %p/src isn't reliable (FetchAltDir and Buildpath
	in fink.conf), so warn if it's used.

2004-03-18  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Prohibit SourceN:none (Source:none still okay).

2004-03-18  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Hacks to keep emacs paren balancing from getting
	confused. Changed regex match m#pattern# to /pattern/ so it
	doesn't look like a comment, and added POD line containing a dummy
	closing ")" where a pattern had $) which looks like a variable.

2004-03-18  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: improve regex to find SplitOffN fields
	* Validation.pm: For *N* fields, improve checking of N to allow
	any number of digits but no N=1 or leading zeros. Consolidate
	Source* vs. Source*-MD5 correspondence checks (all Validation.pm
	and PkgVersion.pm from or based on Comments in Patches #913842)
	* Services.pm: check for `uname` in /bin if not in /usr/bin

2004-03-16  Ben Hines <benh57@users.sourceforge.net>

	* PkgVersion.pm: Add get_filename to get the info file name (used by FinkCommander)

2004-03-16  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: Change from pathsetup.command to pathsetup.sh

2004-03-16  Dave Vasilevsky  <vasi@users.sourceforge.net>

	* Command.pm, PkgVersion.pm: New &du_sk replacement for 'du -sk'.
	This changes the meaning of Installed-Size in .deb's from bytes to
	KB, in accordance with Debian policy. Apt and dpkg should now
	understand it correctly.

2004-03-14  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Validation.pm:  it's now OK to install files directly into
	/sw/share/emacs/site-lisp, so we no longer check for this

2004-03-12  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: Only display the warnings about BuildDependsOnly
	if we are more verbose than the default

2004-03-11  Daniel Macks  <dmacks@netspace.org>

	* Command.pm: Pass third param TRUE (more secure, according to
	File::Path docs).

2004-03-11  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: SplitOff(N) no longer have to be consecutive (now
	use all fields matching /splitoff\d*/), but must still be unique.
	add_splitoff() now returns the PkgVersion objects so that the
	_splitoffs instance variable is handled in fewer different places.

2004-03-10  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Warn if CVS or RCS directories in a .deb

2004-03-07  Daniel Macks  <dmacks@netspace.org>

	* Service.pm: expand_percent: allow braces to explicitly delimit keys.

2004-03-06  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Move handling of Source(N) and Source(N)Rename
	default-handling and percent-expansion from the initialization
	loop to the accessor methods.
	* Package.pm, PkgVersion.pm: Implement pkglist(), has_pkglist(),
	pkglist_default() that are analogous to the param(), has_param(),
	param_default() methods but also do percent-expansion and
	conditional-clause parsing. Remove this functionality from object
	initialization. Convert all *param*() for package-list fields to
	*pkglist*() calls.

2004-03-05  Daniel Macks  <dmacks@netspace.org>

	* Package.pm: Remove needless {...} block syntax from frequently-
	called function.
	* PkgVersion.pm: Streamline handling of Vn for %-expand mapping.

2004-03-04  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: provide all gcc's in /usr/bin (based on the
	output of foo --version)

2004-03-04  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: provide system-perlXXX

2004-03-03  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: typo in get_source_count shortcut for SplitOffs.
	* Package.pm, PkgVersion.pm: %n is now non-variant portion of
	Package (i.e., %type_*[] blanked out). %Vn is full (with %type_*[]
	already expanded) Package. %N is %Vn of parent.

2004-03-02  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: fix error message for missing Package: in
	SplitOffN:. Caching by object ref is not safe so revert to
	_sourcecount internally in get_source_count() (but must not be
	used in other places b/c may not be saved to package db).

2004-03-02  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Implement get_source_count() accessor. Remove
	is_multisource() accessor (leftover from long-gone SourceItems).
	* Engine.pm, PkgVersion.pm: abolish _sourcecount instance
	variable; useg get_source_count() instead.

2004-03-01  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Took out parsing of Type into %type_*[] b/c don't
	have a way to get a single subtype from the subtype list. This
	means %type_*[] will cause an error if used in Patch: value.

2004-03-01  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Rip out old Type: validation code. Fix other
	checks to use new multivariant Type. This is slightly fragile.
	Remembered to switch _info_level property to infon

2004-03-01  Daniel Macks  <dmacks@netspace.org>

	* Package.pm, PkgVersion.pm: Remove special meaning of "". 'Type:
	foo (boolean)' now gives 'Type: foo (foo .)'. The %type_pkg has
	periods removed so still can get null for Package: substitution.

2004-03-01  Daniel Macks  <dmacks@netspace.org>

	* Package.pm: Added missing support for %type_raw[] in Package
	field.

2004-02-29  Daniel Macks  <dmacks@netspace.org>

	* Package.pm, PkgVersion.pm: Full multivariant support. 'Type:
	foo, bar' allowed (means package is of both types). 'Type: foo
	thing' allowed for arbitrary type and subtype (no longer limited
	to languages and lang-versions; any strings of \S+ will do (but no parens or commas).
	Subtype "" means null string. If no subtype is given, the type is
	used ('Type: foo' means 'Type: foo foo'). 'Type: foo (thing1
	thing2)' allowed (autogenerates two packages, one with 'Type: foo
	thing1' one with 'Type: foo thing2'). 'Type foo (boolean)' is a
	synonym for 'Type: foo (foo "")'. Subtype list expansion is
	recursive ('Type: foo (a b), bar (c d)' gives all 4 combinations).
	All subtypes (as entered and with periods removed) are available
	for percent expansion: 'Type: perl 5.8.1' gives
	%type_raw[perl]=5.8.1 and %type_pkg[perl]=581 using %type[foo].
	* FinkVersion.pm: Bumped InfoN -> N=2 so can handle %-expansion in
	Package and multiple Type values.

2004-02-29  Daniel Macks  <dmacks@netspace.org>

	* Package.pm: stash InfoN value as 'infon' not '_info_level' since
	elements with leading _ are lost during new_from_properties().

2004-02-28  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: expand_percent: protect regex metachars in % keys.

2004-02-27  Daniel Macks  <dmacks@netspace.org>

	* Engine.pm,Package.pm,PkgVersion.pm: convert all checking of
	package type from directly comparing {_type} to using a new
	PkgVersion::is_type() accessor.

2004-02-27  Daniel Macks  <dmacks@netspace.org>

	* Command.pm: rm_f now succeeds if try to remove non-existent
	file. symlink_f now uses native rm_f to remove a pre-existing
	target (so doesn't fail if it doesn't exist). Fixed doc about
	$dest being a full filename.
	* PkgVersion.pm: fixed usage of symlink_f to include filename in
	$dest.
	* SelfUpdate.pm: fixed accidental hardlink/softlink swap from last
	commit.

2004-02-27  Daniel Macks  <dmacks@netspace.org>

	* Command.pm: finish gaborit's patch from 841381 to cat().
	* Bootstrap.pm,Engine.pm,NetAccess.pm,PkgVersion.pm,SelfUpdate.pm:
	use Fink::Command calls instead of system() or &execute whenever
	possible (based on 841381).

2004-02-24  David Höhn  <dmalloc@users.sourceforge.net>

	* SelfUpdate.pm: changed the rsync command to
	explicitly preserve the timestamps using -t
	For more information see:
		1.) http://article.gmane.org/gmane.os.apple.fink.devel/7592
		2.) http://article.gmane.org/gmane.os.apple.fink.devel/7597
		3.) http://article.gmane.org/gmane.os.apple.fink.devel/7598
	All credit goes to Rob Braun.

2004-02-24  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: Enable warning for RFC-822 multiline format.

2004-02-22  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm:  Stop supporting bootstrap/upgrade on 10.2 when
	the new Developer Tools are not installed (i.e., no more non-gcc3.3
	10.2 tree).

2004-02-19  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Changed conditional depends syntax for "equals"
	to "=" (like Debian version dependency syntax).
	* PkgVersion.pm: Activated conditional depends parsing (during
	indexing). Fixed to use accessor methods.
	* PkgVersion.pm: Moved removal-of-self-from-Conflicts/Replaces
	code into a new clear_self_from_list method. Fixed to use accessor
	methods. Switch to calling it during indexing instead of .deb
	construction (dependency engine may need Conflicts info).
	* PkgVersion.pm: Remove more remnants of my _source_item stuff.
	* Services.pm: Revert accidental commit of debugging code.

2004-02-18  Rob Braun  <bbraun@opendarwin.org>

	* Bootstrap.pm: Update the i386 distribution detection code to
	understand i386-apple-darwin 7.0.1 as 10.3 distribution.

2004-02-17  Daniel Macks  <dmacks@netspace.org>

	* all: add emacs tags to get perl-mode (even for .pm.in) and set
	tab-width to 4 chars (in accord with fink coding style).

2004-02-16  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: *Script parsing improvements for non-#!-specified
	scripts: fix removal of leading whitespace, implement use of \ at
	end of line to allow wrapping of long lines. (by Rohan Lloyd; see
	"Folding long lines in scripts" on fink-devel)

2004-02-14  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: Added "debug" mode to show what's going on while
	searching for various virtual bits.  (Good idea, Martin!)

2004-02-12  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: conditional_pkg_list: optimized initial field
	parsing and fixed consecutive puctuation replacement. Remembered
	to save value back to hash. Changed syntax to:
	  Depends: (string1 op string2) foo
	where op is one of (<< >> <= >= == !=) for string comparison or:
	  Depends: (string) foo
	where string must be non-null.

2004-02-11  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Wrote conditional_pkg_list which processes
	conditionals in Depends (and similarly formatted fields) according
	to 'Depends: (a b) foo', where foo is only a dependency if a and b
	are stringwise equal. Will probably need to bump max_info_level.
	Tested and seems to work, but not actually calling it from main
	code yet.

2004-02-11  Daniel Macks  <dmacks@netspace.org>

	* Services.pm, Packages.pm, Validation.pm: Changed handle_infon_block
	from being a function in Services to being a class method in Packages.

2004-02-10  Daniel Macks  <dmacks@netspace.org>

	* FinkVersion.pm.in: Implemented max_info_level(): returns largest
	.info version this fink can handle. Initial value is 1 (same
	format as non-InfoN file).
	* Services.pm: Implemented handle_infon_block: Reprocess .info to
	account for it consisting entirely of a InfoN: multiline field. If
	N larger than max_info_level, warn and scrap the file.
	* Package.pm, Validation.pm: Call handle_infon_block after reading
	.info.

2004-02-04  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm:  Stop supporting bootstrap/upgrade on 10.1, and
	warn users that support will soon cease for non-gcc3.3 10.2.

2004-02-03  Peter O'Gorman  <ogorman@users.sourceforge.net>

	* Engine.pm: Only choose a splitoff if the candidates contain
	only one splitoff. Fixes bug reported by chris01 on irc.

2004-02-01  Daniel Macks  <dmacks@netspace.org>

	* CLI.pm: Implemented print_breaking_stderr, a wrapper around
	print_breaking that causes output to go to STDERR.
	* Package.pm: For all diagnostic/status messages from 'fink list',
	send to STDERR. For all that are not critical, don't output unless
	output is a  terminal (i.e., hide if a Unix pipeline).

2004-02-01  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: Resuscitated RangerRick's idea from CVS r1.95 of
	adding line numbers to parser error messages.

2004-02-01  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm, Services.pm, Validation.pm: finished implementing
	splittoffN (etc.) passing to read_properties_var() and fixed
	quotation mark placement in its messages.

2004-01-30  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Added second parameter to add_splitoff() for
	splitoff #, and pass it as part of $file to read_properties_var()
	so parsing-error error messages note which splitoff is broken.

2004-01-28  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Error if Version or Revision contain forbidden
	characters (according to Debian docs).

2004-01-26  Rob Braun  <bbraun@users.sourceforge.net>

	* Selfupdate.pm: rsync with the -r flag instead of the -a flag.
	the difference is that -r will not preserve ownership/groups,
	permissions, links, times, and device files.  None of this
	matters for .info and .patch files, since there are no links
	or device files, and the ownership, permissions, and times
	on the server don't matter to the client.  However, we will
	continue using -a on the TIMESTAMP file to preserve the time
	on that.

2004-01-21  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: If a package lists itself in its own Conflicts or
	Replaces, remove it from that list (needed for writing mutually
	exclusive variants).

2004-01-21  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: Added new $err_info parameter to expand_percent that
	will be printed if there's an expansion error. Remembered \n in
	that die to prevent stack backtrace. Doc-cleanup expand_percent.
	* PkgVersion.pm: Implemented new get_param_with_expansion and
	get_info_filename methods.
	* Package.pm, PkgVersion.pm: added $err_info to expand_percent calls.

2004-01-19  Daniel Macks  <dmacks@netspace.org>

	* Package.pm: Treat typo of %n in SplitOff:Package: as %N. Remove
	debugging.
	* PkgVersion.pm: Remove remnants of my _source_item stuff.

2004-01-16  Daniel Macks  <dmacks@netspace.org>

	* Package.pm, PkgVersion.pm: Consolidated common code for
	instantiating a package into a new Package->setup_package_object
	function. Moved Type inheiritance and %-expansion in Package there
	also. Evaluate SplitOff Package in SplitOff scope instead of
	parent scope. Added support for multiple language versions: 'Type:
	perl (5.6.1 5.8.1)' gives a clone of the .info that has
	each (single) Type.

2004-01-14  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Empirically determined that 79 chars is the
	maximum safe line length for DescDetail.
	* Package.pm: Dumb hack to keep emacs paren balancing happy (was
	interpretting # in a few lines before as comment symbol).

2004-01-13  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Fix for regex /$file/ not do what we want if
	$file is the literal filename when it contains regex
	metacharacters. (bugs #875876).

2004-01-12  Daniel Macks  <dmacks@netspace.org>

	* Base.pm: params_matching() now defaults to case-insensitive.

2004-01-11  Daniel Macks  <dmacks@netspace.org>

	* PkgConfig.pm: Improved get_source_items_count(). Improved
	construction of _source_items. Disabled construction of
	_source_items for now.

2004-01-11  Daniel Macks  <dmacks@netspace.org>

	* CLI.pm: Removed antiquated prompt_selection(). Improved
	fink-code error checking by use of Carp::confess.

2004-01-10  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Added get_source_items_count() and
	sanity-checking for get_source_items_list().

2004-01-10  Daniel Macks  <dmacks@netpace.org>

	* Base.pm: Added params_matching, a method to return the names of
	all parameters that match a passed regex.
	* PkgVersion.pm: Added _source_items, a ref to a list of refs to
	uniformly-keyed hashes of all info pertaining to each source for a
	package. Added accessor method get_source_items_list() to return a
	(deep) copy of this list.

2004-01-09  Remi Mommsen  <remigius.mommsen@cern.ch>

	* PkgVersion.pm: get_source: Do not return the default source name
	if there exists no source. Instead return 'none' as expected
	elsewhere. get_source_list and get_tarball_list return an empty
	list if there are no sources.

2004-01-09  Daniel Macks  <dmacks@netpace.org>

	* CLI.pm: Fixed a bug in print_breaking: was treating an embedded
	newline as an ordinary entity (printable character), not adjusting
	the wrapping for starting a new line.

2004-01-09  Daniel Macks  <dmacks@netpace.org>

	* Bootstrap.pm, SelfUpdate.pm: Swiched `cat` to Fink::Command::cat.
	* PkgVersion.pm: Improved check for failure when creating
	seg_addr_table file. Switched one system("mkdir") to &execute.

2004-01-08  Daniel Macks  <dmacks@netpace.org>

	* Validation.pm: Warning for DescDetail and DescUsage that will
	look bad in Terminal window (long lines and non-ASCII chars).
	Warning for oddly formatted Maintainer.

2004-01-06  Max Horn  <max@quendi.de>

	* PkgVersion.pm: Fixed resolve_depends code.
	* Engine.pm: Do not use BuildConflicts for packages which are not going to
	  be built!

2004-01-06  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: Left this file out of the giant CLI commit.

2004-01-06  Max Horn  <max@quendi.de>

	* Engine.pm: Partially undid Justin's change from Dec 23 (revision 1.144).
	  Relatives of a package can't (and mustn't) be build dependencies of the
	  package, since they are built at *exactly the same time*.

	* Engine.pm: Fixed a case where fink would rebuild a package twice. Also
	  clarified some comments.

	* Validation.pm: BuildDepends and BuildConflicts are actually not valid in
	  splitoffs.

2004-01-05  Daniel Macks  <dmacks@netspace.org>

	* all: Moved CLI functions from Services.pm into a new CLI.pm package.

2004-01-04  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Services.pm:  Use eval{} instead of a subroutine to implement the
	timeout  (and remove superfluous function stdin_timeout.)

2004-01-04  David Höhn <dmalloc@users.sourceforge.net>

	* Package.pm: Changed Storable method from store() to lock_store()
	This should help use phase out problems when a fink index tries to write
	almost at the same time

2004-01-03  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Services.pm: Add a (non-exported) function stdin_timeout to
	prompt for input but timeout if no answer.  Use this to construct
	a (new) optional third argument to prompt_boolean which specifies
	a timeout interval.

	* Configure.pm: Use a 60 sec. timeout in the question being asked in
	choose_mirrors, when called from the fink-mirrors postinstall script.

2004-01-02  Remi Mommsen  <remigius.mommsen@cern.ch>

	* PkgVersion.pm: Modified method get_splitoffs to return list of
	splitoff packages, not just names. No need for passing package
	name to method belonging to a package. Moved method to other
	accessor methods.
	* Engine.pm: Modification to use changed get_splitoffs method.

2004-01-01  Remi Mommsen  <remigius.mommsen@cern.ch>

	* PkgVersion.pm: Added two methods to access lists of sources and
	tarballs used by given package

2004-01-01  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* all: updated Copyright notice

2003-12-30  Daniel Macks  <dmacks@netspace.org>

	* Configure.pm,Engine.pm,Mirror.pm,NetAccess.pm,PkgVersion.pm,SelfUpdate.pm:
	Completed prompt_selection -> prompt_selection_new migration.
	* Services.pm: prompt_selection deprecated in favor of ..._new so
	don't export.

2003-12-29  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: prompt_selection_new(): forgot to deal with
	unspecified or invalid default choice.
	* Configure.pm: Switch from using prompt_selection to
	prompt_selection_new.

2003-12-28  Daniel Macks  <dmacks@netspace.org>

	* PkgVersion.pm: Type:splitoff is redundant: switch to checking
	for presence of parent link. Now okay to use Type in splitoffs
	(else inherits from parent). Added Type:none to clear.
	* Validation.pm: Allow Type:none. Allow Type and UpdatePOD in
	splitoffs.

2003-12-26  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Services.pm: *don't* export "read_properties_lines".
	Instead, introduce new subroutines "read_properties_multival_var"
	and "read_properties_multival_lines", the first of which is exported.
	* Mirror.pm: use "read_properties_multival_var" when setting
	default values for mirrors.

2003-12-26  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Mirror.pm: setting default values for rsync and sourceforge
	mirror sets, as well as master mirror set, in case the mirror
	directory is absent or damaged.

2003-12-24  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Services.pm: export "read_properties_lines"
	* Mirror.pm: set a default value for Master mirror, if config file
	not present

2003-12-23  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Configure.pm: export "choose_mirrors", and enlarge the dialogue
	with users at the beginning of choosing the mirrors.  (This will
	be used in the 	postinstall script of the fink-mirrors package.)
	Also check for the existence of mirror/_keys and mirror/_list,
	and bail with a warning to install fink-mirrors if these are not
	found.

	* Bootstrap.pm: don't install the mirror directory (or its files)
	in the fink package (this is being moved to the fink-mirrors
	package)

2003-12-23  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm: Fixed fink list --help output since some of it was wrong.
	* Engine.pm: Fixed fink build only checking builddepends: this can't
	happen since -shlibs are needed at build time as well as other things.

2003-12-23  Daniel Macks <dmacks@netspace.org>

	* PkgVersion.pm: Support %lV and %lv as raw and punctionation-free
	values of Type version string (if provided).
	* Package.pm: Support %lv in Package.
	* Validation.pm: Allow %lv in Package (for info filename check).

2003-12-23  Daniel Macks <dmacks@netspace.org>

	* Validation.pm: Added support for Type java (version mandatory).

2003-12-22  Daniel Macks <dmacks@netspace.org>

	* Validation.pm: Added support for Type python, guile, ruby
	(version optional, except mandatory for python).

2003-12-22  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: move inject.pl code into Bootstrap.pm, and
	separate out the common code from inject.pl and bootstrap.pl
	into subroutines that can be used by both

2003-12-22  Daniel Macks <dmacks@netspace.org>

	* Validation.pm: All patch file tests now also applied to files
	used in PatchScript. Hardcoded /sw test fixed to skip diff
	context- and being-replaced lines.

2003-12-22  Daniel Macks <dmacks@netspace.org>

	* Validation.pm: Was only checking first line of .patch. Fixed.

2003-12-22  Daniel Macks <dmacks@netspace.org>

	* Validation.pm: Check for hardcoded /sw in patch file (as loaded
	by Patch, not as by PatchScript).

2003-12-21  Daniel Macks <dmacks@netspace.org>

	* Services.pm: Gave prompt_selection_new more flexible default-
	choice behavior. Not gonna change API any more so okay to use.

2003-12-20  Remi Mommsen  <remigius.mommsen@cern.ch>

	* Engine.pm: Extended MatchPackageRegEx which resorts the
	candidate list so that packages matching the regex are at the top
	in case that multiple packages match the regex.

2003-12-19  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: Detect Java3D and Java Advanced Imaging

2003-12-19  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: Recognize darwin 7.2.0.

2003-12-19  Daniel Macks <dmacks@netspace.org>

	* PkgVersion,Validation.pm: Support for "Source: none" as synonym
	for "Type: NoSource".

2003-12-19  Daniel Macks <dmacks@netspace.org>

	* Validation.pm: Added error if there is a source or MD5 for type
	Bundle.

2003-12-19  Daniel Macks <dmacks@netspace.org>

	* Validation.pm: Added errors if there is an MD5 without a
	corresponding source, if no MD5 and using the implicit/default
	source, or if there is a source or MD5 for type NoSource.

2003-12-17  Daniel Macks <dmacks@netspace.org>

	* Services.pm: Added prompt_selection_new (like prompt_selection
	except parameters are less redundant and more logical). Rewrote
	prompt_selection to be just a wrapper around prompt_selection_new.

2003-12-16  Daniel Macks <dmacks@netspace.org>

	* Validation.pm: Remembered that Type doesn't always exist

2003-12-16  Daniel Macks <dmacks@netspace.org>

	* PkgVersion.pm: Change to a more generic way of parsing perl
	version info from Type
	* Validation.pm: Change to a more structured definition of allowed
	Type values

2003-12-15  Justin F. Hallett  <thesin@users.sourceforge.net>

	* PkgVersion.pm: Changed the warning about missing packages in multi
	depends line to still display but only at verbose 4

2003-12-15  Justin F. Hallett  <thesin@users.sourceforge.net>

	* PkgVersion.pm: Stop warning about missing packages in depends line
	if an other pkg in the expression is found to statisfy it.

2003-12-15  Daniel Macks <dmacks@netspace.org>

	* Services.pm: Changed expand_percent to do the automatic %% => %
	with regexps instead of the @PERCENT@ sentinel

2003-12-11  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm: Made BuildConflicts effective, it doesn't just tell you
	 now, it's acctually remove and reinstall after the build.

2003-12-10  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm: Fixed a problem in the dep engine where if a dep was
	installed but it's deb file was missing, fink would fail.

2003-12-10  Peter O'Gorman  <ogorman@users.sourceforge.net>

	* Engine.pm: If the package name is being truncated in list/apropos
	print an ellipses ("...") so that the user knows about it.

	* Selfupdate.pm: Don't try to su or chown to an undefined $username.

2003-12-09  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Validation.pm: Rearranged the list of allowed fields and added
	some comments to make it easier to compare this list to the
	packaging manual.

2003-12-08  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm: Adding "fink splitoffs", shows parent and splitoffs in a
	package. Adding "fink showparent" which will return the parent package
	of a package.
	* PkgVersion.pm: Adding sub get_splitoffs() has two switches, to
	include self in list and include parent.

2003-12-08  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm: Properly fixed essential and builddependsonly checks in
	cmd_remove.

2003-12-07  Justin F. Hallett  <thesin@users.sourceforge.net>

	* PkgVersion.pm: Added force switch to resolve_depends so duplicate
	WARNINGS for the same depend won't show twice on sub depend checks.
	* Engine.pm: Added $forceoff switch to resolve_depends calls.

2003-12-04  Daniel Macks <dmacks@netspace.org>

	* Services.pm: Fixed latest_version to continue past (and ignore)
	undef values rather than ignoring the rest of the passed list.
	* Services.pm: Finished PODifying the docs.

2003-12-04  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: Add file-spec-pm, test-harness-pm, and test-simple-pm
	when bootstrapping under perl 5.6.x.

2003-12-04  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm: Fixed double building issue in my dep check code. And
	removed a few more prints on secondary builds.

2003-12-03  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm: made it so fink can't remove or purge essential pkgs
	and added warnings for it and not installed packages.
	Also made it so if the pkgs to be removed are the same as the ones
	in ARGV then don't ask first.  And added a print_breaking for long
	package listings. Disabled parent essential params on splitoffs.
	Changed BuildDependsOnly and Essential checks from has_param to
	param_boolean, in case it's there and set to false. Fixed the not
	installed warning, and prints and exits if nothing to do instead of
	dieing. Enabled the check each depend's depends before build.
	VERY EXPERIMENTAL please test.

2003-12-03  Daniel Macks <dmacks@netspace.org>

	* Services.pm: Initial go at PODifying the docs.

2003-12-03  Daniel Macks <dmacks@netspace.org>

	* Services.pm: Shuffled @EXPORT_OK to be in same order as the subs
	appear in the file.

2003-12-02  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm: Added --buildonly to fink list command, to list all
	packages that have a BuildDependsOnly tag. Added --buildonly to
	remove and purge as well. And Fixed fink list with virtuals, so
	if is_virtual returns 2 treat like normal pkg in listing. Added
	initial BuildConflicts code.
	* Package.pm: Fixed is_virtual so new virtuals (as of
	VirtPackage.pm) now work again, but since they have descriptions
	and version, they return 2.
	* PkgVersion.pm: Changed resolve_depends in order to enable
	proper BuildConflicts, now requires a second param "field".
	* validator.pm: Added BuildConflicts as a valid field.

2003-12-01  Daniel Macks <dmacks@netspace.org>

	* Services.pm: Actually, my entry would fail (fink crash) if there
	were no map, not if no expanding was needed. Fixed. thesin's
	modification is a nice optimization, but seems orthogonal to the
	actual problem.

2003-11-29  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Services.pm: With Daniel Macks entry on 11-26 expand_percent would
	fail if no expanding was needed.  Added a check to identify
	if it was needed to continue and if not just return the original
	string.

2003-11-27  Dave Morrison <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: test to see if the package being currently built
	violates any "BuildDependsOnly: true" directives, and if so,
	issue a warning.

2003-11-26  Daniel Macks <dmacks@netspace.org>

	* Services.pm, PkgVersion.pm: expand_percent handles %% using a
	temporary sentinel value, but that was defined in two different
	places (in expand_percent itself and in the caller of
	it). Consolidated into expand_percent.
	* Services.pm: Factored definition of a constant string out of a
	tight loop.

2003-11-25  Michael G Schwern <schwern@pobox.com>

	* Config.pm: new_with_path() now takes default parameters.
	* Services.pm: read_config() now takes default parameters to pass
	through to Config->new_with_path().

2003-11-25  Michael G Schwern <schwern@pobox.com>

	* Config.pm: Error message wrong when Basepath not in config file
	or config file missing entirely.  Tested.

2003-11-21  Daniel Macks <dmacks@netspace.org>

	* Services.pm: Re-improved early-escape from recursive percent
	expansion. The main regex isn't much heavier than this check, so
	we lose in the case where multiple passes are needed but avoid
	loop overhead in the more common one-pass-needed case. May as well
	leave my "|| last" (helps sometimes, doesn't hurt, will avoid
	wheel spinning if we go to higher pass-count limit and have
	unknown %vars).

2003-11-21  Michael G Schwern <schwern@pobox.com>

	* Command.pm: rm_rf() not returning false when it deletes some
	directories but fails to delete another.  Tests were incorrect.

2003-11-21  Michael G Schwern <schwern@pobox.com>

	* FinkVersion.pm.in: Fixed ":ALL" target.  Changed from using
	/bin/cat to Fink::Command::cat().  Tested.

2003-11-21  Justin F. Hallett  <thesin@users.sourceforge.net>

	* PkgVersion.pm: Fixed conffiles with new expansion code, needed to
	move the trailing new line to be added after calling expand_percent.

2003-11-21  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: Changed the X11 tracking to return major.minor.mini
	if using an XFree86 snapshot (ie, if the version has more than 3
	components)

2003-11-21  Daniel Macks <dmacks@netspace.org>

	* Services.pm: Improved early-escape from recursive percent
	expansion.

2003-11-21  Daniel Macks <dmacks@netspace.org>

	* Services.pm: Conversion to using only print_breaking
	(removal of print_breaking_prefix/print_breaking_twoprefix)
	changed the meaning of $prefix1 and $prefix2 (defined
	vs. logically true). Changed it back.

2003-11-20  Michael G Schwern <schwern@pobox.com>

	* FinkVersion.pm.in: Removing hard coded @BASEPATH@.  Using Fink::Config
	instead.

2003-11-20  Michael G Schwern <schwern@pobox.com>

	* FinkVersion.pm.in: Documenting Fink::FinkVersion.  Removing module
	template cruft.

2003-11-20  Michael G Schwern <schwern@pobox.com>

	* Config.pm: Document exported variables.  Document that you need
	a Fink::Config object for them to work and that its a Bad Idea
	to have two Fink::Config objects.

2003-11-20  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Service.pm: Make is so expand_percent ignores commented line so
	we can have % in comments.  Also added the ability to have escaped
	%, e.g. when trying to patch using perl -pi on a sprintf string that
	uses %s or such.
	* PkgVersion.pm: Added expansion for %%.

2003-11-19  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: Don't generate prebinding references if the package
	is forcibly not prebound. (and some general cleanup and whitespace
	fixes)
	* Validation.pm: Added some missing Set* flags to the validation,
	related to LD and prebinding.

2003-11-19  Justin F. Hallett  <thesin@users.sourceforge.net>

	* PkgVersion.pm: Adding initial code to add 'Installed-Size' to
	CONTROL, should be converted to a perl code instead of using du.

2003-11-19  Peter O'Gorman  <ogorman@users.sourceforge.net>

	* Package.pm (is_any_present): Add new subroutine, returns 1 if a deb
	is available locally, 0 if not.
	* Engine.pm (real_install): Allow use of a regex in fink.conf to auto-
	choose which package to install. When asking the user to make a choice
	set the selection to an available deb, if there is only one.

2003-11-18  Michael G Schwern  <schwern@pobox.com>

	* Package.pm: Write the new index atomicly to avoid a corrupted
	index should fink be killed in the middle of reindexing.

2003-11-16  Rob Braun <bbraun@users.sourceforge.net>

	* SelfUpdate.pm: Fix a problem with syncing the crypto/ directory,
	  since it doesn't have subdirectories like main/ does.

2003-11-16  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: When installing into a pre-release darwin 7.x, say
	that it "should work".

2003-11-16  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: More changes, split up system-xfree86 into
	  system-xfree86, system-xfree86-shlibs, and system-xfree86-dev.

2003-11-16  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: Totally reworked the provides of the system-xfree86
	  virtual packages, so that "x11" is provided when the shared libraries
	  and an X server are present, and "x11-dev" is provided when headers
	  and development libraries are present.  This will require changes to
	  the BuildDepends: of all x11-using packages.  This is a major change
	  (considering how many files it will end up touching) so this change
	  is going into HEAD.

2003-11-16  Rob Braun <bbraun@users.sourceforge.net>

	* SelfUpdate.pm: Add --delete since it is not implied by
	  --delete-after on older versions of rsync (10.2).

2003-11-14  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Services.pm: reverted the "Simplified code" changes from 11-12,
	since they were apparently causing extra carriage returns in
	prompts to the user.

2003-11-14  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: More checks for X version for system-xfree86.
	  this will find 4.3.99 cvs without having to run -version.

2003-11-14  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: Change the thread test to use grep -a, so as not to
	  depend on nm from the dev tools.

2003-11-14  Michael G Schwern <schwern@pobox.com>

	* Command.pm: Adding insufficient argument checks to cp and mv
	(from Paul Gaborit, see 841381).  Tested.

2003-11-14  Daniel Macks <dmacks@netspace.org>

	* Validation.pm: Fixed typo in my previous change.

2003-11-13  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: Small tweak to UpdatePOD in case two files are
	being catted together
	* PkgVersion.pm: Revise get_perl_dir_arch() and the places where it
	is used, correcting some errors in UpdatePOD in case of Type: perl,
	and guaranteeing that the correct perl command is used when needed.

2003-11-13  Max Horn  <max@quendi.de>

	* Services.pm: Improve the caching of version_cmp in Fink::Services;
	some cleanup (Patch #841031).

2003-11-13  Justin F. Hallett  <thesin@users.sourceforge.net>

	* PkgVersion.pm: Fix UpdatePOD when using a Custom build/installscript
	as it may not be installing into the normal $perlarch dir.

2003-11-13  Michael G Schwern <schwern@pobox.com>

	* Command.pm: Make sure functions fail quietly and with the
	proper return value and errno setting.  Tested.

2003-11-13  Michael G Schwern <schwern@pobox.com>

	* Command.pm: Created to replace execute() of common shell commands
	like rm -rf and mkdir -p.  Tested.

2003-11-12  Daniel Macks  <dmacks@netspace.org>

	* Services.pm: Clarified "unable to parse..." warning message.

2003-11-12  Michael G Schwern <schwern@pobox.com>

	* Package.pm: Does not use execute() so don't import it from
	Fink::Services.

2003-11-12  Max Horn  <max@quendi.de>

	* Services.pm: Simplified code a bit.

2003-11-12  Rob Braun <bbraun@users.sourceforge.net>

	* SelfUpdate.pm: Add rsync mirroring fallback with prompting, similar
	  to distfiles mirroring/fetching.

2003-11-12  Daniel Macks <dmacks@netspace.org>

	* Validation.pm: Changed warnings about fields in splitoffs to say
	in which splitoff they occurred (could be multiple splitoffs, and
	some warnings could occur in the parent as well).

2003-11-11  Michael G Schwern <schwern@pobox.com>

	* PkgVersion.pm: "uninitialized value in chomp" warning below
	  because get_perl_dir_arch()'s attempt at reading the system perl's
	  Config.pm wasn't working.  Forgot a print.  chomp() now unnecessary.

2003-11-11  Rob Braun <bbraun@users.sourceforge.net>

	* SelfUpdate.pm: Recurse down multiple directories, to get
	  libs/perlmods

2003-11-11  Max Horn  <max@quendi.de>

	* PkgVersion.pm, Validation.pm: Allow 'Homepage' field in splitoffs.
	  This actually matches what our packaging docs say.

2003-11-11  Peter O'Gorman  <ogorman@users.sourceforge.net>

	* Selfupdate.pm: Minor bugfix. Now properly does su to the user.
	* PkgVersion.pm: Fix "uninitialized value in chomp" Seems to be popular
	  these days.

2003-11-10  Rob Braun <bbraun@users.sourceforge.net>

	* SelfUpdate.pm: Add a TIMESTAMP check when using rsync.
	* SelfUpdate.pm: Remove support for a Distribution in Trees.
	* SelfUpdate.pm: Do rsync updates with a single rsync command.

2003-11-10  Michael G Schwern <schwern@pobox.com>

	* PkgVersion.pm: Change below broke get_perl_dir_arch(), didn't
	  parse the output from -V:archname.  Fixed by using Config.pm
	  instead.  Tested.

2003-11-10  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage: fall back to XFree86 -version if we can't figure
	  it out from man pages.

2003-11-10  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Services.pm: No point in continuing to search through the path if
	  we have a match.
	* Package.pm: Fix version spec checking to allow epochs.
	* PkgVersion.pm: Ask perl what it's arch directory is, rather than
	  assuming based on version.

2003-11-10  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Make the check for package-name in Description:
	case-insensitive.

2003-11-09  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Validation.pm: Warn when Files: entries have / at the end (messes
	  up panther mv sometimes)

2003-11-09  Max Horn  <max@quendi.de>

	* Validation.pm: Minimal validation of splitoffs. This definitely should be
	  improved ASAP, though.
	* PkgVersion.pm: Propagate epoch to splitoffs.
	* Validation.pm: Improved validation of splitoffs. Check more fields for
	  hardcoded /sw.
	* PkgVersion.pm: Factored out duplicated perl handling code into a new
	  method get_perl_version_dir_arch().
	* Validation.pm: Allow type "perl 5.8.1". Allow "License" in splitoffs.
	* Package.pm, PkgVersion.pm, SelfUpdate.pm: Invoke 'find' as /usr/bin/find;
	  fixed potential data loss issue when volume/directory names contains
	  whitespaces.

2003-11-08  Max Horn  <max@quendi.de>

	* Services.pm: Remove trailing empty lines in heredocs (Bug #670712). Also
	  made .info parsing stricter, which discovers more illegal .info files.
	* Validation.pm: When checking whether a field contains the package name
	  or version, only report a warning if they occur as full words (and not
	  just as substring of a longer name/version).

2003-11-07  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: Moved fink-prebinding environment-setting stuff
	  to the fink runtime so it doesn't sit in the users' environments.

2003-11-07  Max Horn  <max@quendi.de>

	* Engine.pm: Fix bug causing incorrect installation of 'relatives' when
	  rebuilding splitoff packages (Bug #645841).
	* Package.pm: Fink::Package %package_hash -> $packages (Patch #831573).
	* Base.pm, Config.pm: Fink::Config cleanup & documentation (Patch #832063).
	* Validation.pm: Validate emacs packages (Patch #748665).
	* Base.pm: Fink::Base docs and cleanup (Patch #832828).

2003-11-06  Ben Hines <benh57@users.sourceforge.net>

	* Bootstrap.pm: Support Mac OS X 10.3 / Darwin 7.0.0

2003-11-06  Peter O'Gorman <ogorman@users.sourceforge.net>

	* SelfUpdate.pm: Make this work with rsync-hfs.

2003-11-05  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* SelfUpdate.pm: Always regenerate the index on a
	"fink selfupdate".

2003-11-03  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Bootstrap.pm, Engine.pm, FinkVersion.pm.in, NetAccess.pm,
	PkgVersion.pm, SelfUpdate.pm: just being pedantic, updating
	our external calls to system versions, for safety.

2003-11-03  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Config.pm: Bomb if Distribution isn't set.

2003-11-02  Daniel Macks  <dmacks@netspace.org>

	* Validation.pm: Add polite feedback if a .deb is okay in analogy
	to behavior for .info (cf. exiting silently). (Patch #822456)

2003-10-31  Michael G Schwern <schwern@pobox.com>

	* Mirror.pm: Mirror doesn't have fetch_url or fetch_url_to_file
	functions, yet was exporting them.

2003-10-29  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: check for threaded X, and check for the file
	before trying to read the xterm man page.

2003-10-25  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: make system-xfree86 virtual complain if you're
	missing important SDK bits.  =)

2003-10-25  Mohammad A. Haque  <batmanppc@users.sourceforge.net>

	* Engine.pm: Patch 828653 fix fink cleanup and improve user feedback

2003-10-25  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Service.pm: Added an get_path function that is a perl version
	of the command util which, you give it a file name and it returns
	the first match in the path of that file with it's full path.
	* PkgVersion.pm: Changed which call in for perl$version to use
	new get_path function.

2003-10-24  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* SelfUpdate.pm: Modify the rsync command to only remove
	CVS directories in trees that are updated through rsync.

2003-10-23  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* SelfUpdate.pm: Modify the "point" selfupdate method so that the
	version number information which it retrieves from the Fink
	website is specific to which distribution is the current one
	(e.g., whether we are running 10.2 or 10.2-gcc3.3).

2003-10-21  Justin F. Hallett  <thesin@users.sourceforge.net>

	* PkgVersion.pm: Fixed a problem with perlmodules where when
	PERL=<perlbinary> it would try and run ../<perlbinary> this is
	fixed by using the full path to <perlbinary>.

2003-10-20  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: Test for the presence of gcc 3.3, and the correct
	version of gcc 3.3, in order to decide between the 10.2 and
	10.2-gcc3.3 distributions.

2003-10-18  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm, Engine.pm, PkgVersion.pm, SelfUpdate.pm, Shlibs.pm:
	The shlibs code is giving trouble, so we move it to its own branch
	again.  New branch is called "shlibs-20031018".

2003-10-18  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: Add an automatic dependency on the current version
	of darwin, whenever building a package.  (This is so that packages
	which have MACSOX_DEPLOYMENT_TARGET set by default in 10.3, don't
	get built in 10.3 but then installed in 10.2 by accident.)

2003-10-18  Peter O'Gorman <ogorman@users.sourceforge.net>

	* VirtPackage.pm: New virtual package for gcc2 (needed for 10.3)

2003-10-17  Michael G Schwern <schwern@users.sourceforge.net>

	* Package.pm, Services.pm: Optimizations to speed up
	some common operations.

2003-10-17  <dmalloc@users.sourceforge.net>

	* SelfUpdate.pm: Change default rsync host from
	rsync://fink.opendarwin.org/finkinfo/ to
	rsync://master.us.finkmirrors.net/finkinfo/

2003-10-12  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Config.pm, Configure.pm: Change the default verbosity level from
	"3" (high) to "1" (low)
	* Shlibs.pm: change the DEBUG output from the Shlibs package, to
	output which is only shown at verbosity level 3

2003-10-11  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Config.pm: make sure Trees line doesn't have absolute paths
	or ../'s in it.

2003-10-11  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* ChangeLog, Bootstrap.pm, Engine.pm, Package.pm, PkgVersion.pm,
	SelfUpdate.pm, Shlibs.pm: merge in the "shlibs" branch from July

2003-10-10  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: make the gcc_select error a bit more user
	friendly.

2003-10-10  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* SelfUpdate.pm: Enable the Trees: hack for rsync'ing multiple
	dists inside a fink dists tree.

2003-10-10  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* SelfUpdate.pm: Check that a directory exists on the server
	before trying to rsync it.  Also some more quoting to make
	things a bit more sane.

2003-10-10  Peter O'Gorman <ogorman@users.sourceforge.net>

	* VirtPackage.pm: PATH paranoia. Always use full paths here.

2003-10-09  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Services.pm, PkgVersion.pm, VirtPackage.pm: move the system
	  perl stuff from PkgVersion.pm to Services.pm so it can be used
	  by other things (and then use it in VirtPackage.pm to make a
	  system-perl virtual)

2003-10-09  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Services.pm: make sure get_sw_vers() is EXPORT_OK.
	* PkgVersion.pm: make sure we know what the system perl
	  version is on unversioned Type: perl info files.

2003-10-09  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: handle panther 5.8.1 perl modules properly.

2003-10-09  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* SelfUpdate.pm: Added some bounds-checking to paths in the
	dists tree and such for rsync, also changed all mkdir's to
	mkdir -p, and change ownership of files so that rsync can pass.

2003-10-06  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm:  Temporary change for the 0.14.1 beta release:
	enables the 10.2-gcc3.3 and 10.3 trees

2003-10-05  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Engine.pm, SelfUpdate.pm: Further tweaks to the user interface
	for selfupdate commands.  Also, ensure that the SelfUpdateMethod
	conf option is properly reset when selfupdate-rsync is invoked.

2003-10-04  Peter O'Gorman  <ogorman@users.sourceforge.net>

	* FinkVersion.pm.in, Selfupdate.pm: Give the user some choice of
	update method; use a stamp-rsync-live file when using the rsync
	method.

2003-10-02  Rob Braun <bbraun@users.sourceforge.net>

	* SelfUpdate.pm: Add updating of the VERSION file when using
	selfupdate-rsync.

2003-10-01  Rob Braun <bbraun@users.sourceforge.net>

	* SelfUpdate.pm, Engine.pm:  Add selfupdate-rsync option for
	updating via rsync instead of cvs.

2003-09-30  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Package.pm: reformat a few fields so that they can have
	carriage returns and such without confusing things

	* Services.pm: cleaned up some rare cases where uninitialized
	values can show up.

2003-09-27  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: don't do update-prebinding on files that are
	actually linking to things in /usr/lib!

2003-09-27  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm, Services.pm, VirtPackage.pm: Refactored the
	sw_vers code so it can be used for setting
	MACOSX_DEPLOYMENT_TARGET as well as making the virtual macosx
	package.  Also, set MACOSX_DEPLOYMENT_TARGET in packages that
	don't specify SetMACOSX_DEPLOYMENT_TARGET to the target arch
	unless it's 10.2 (special-cased to set to 10.1 for compatibility
	purposes).

2003-09-23  Peter O'Gorman  <ogorman@users.sourceforge.net>

	* PkgVersion.pm: die if no md5 specified. You were warned!

2003-09-22  Ben Hines <benh57@users.sourceforge.net>

	* Bootstrap.pm: Support 10.2.8.

2003-09-14  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: Fix regex parsing when unusual characters are
	in the filename.

2003-09-11  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: Implement java virtuals.

2003-09-08  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: Implement system-xfree86 as a list of provides,
	instead of the system-xfree86-foo packages.

2003-09-08  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: Some cleanup/performance updates to the X11 detect.

2003-09-08  Peter O'Gorman  <ogorman@users.sourceforge.net>

	* VirtPackage.pm: Autodetect X11 (I hope, maybe, Please test/fix)

2003-09-06  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: Allow prebinding whenever the distribution is
	greater than or equal to 10.2-gcc3.3 .

2003-09-06  Dave Morrison <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm:  Temporary change on the "test_10_3" branch: if
	this is run on 10.2, it will set up the 10.2-gcc3.3 distribution.

2003-09-04  Justin F. Hallett  <thesin@users.sourceforge.net>

	* PkgVersion.pm: Changed the way Type: perl works, it now can use
	ConfigureParams and makes ue of %c like normal builds, this will
	standarize how perlmodules and normal packages are packaged.

2003-08-28  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: fix regex for detecting OS X version

2003-08-27  Justin F. Hallett  <thesin@users.sourceforge.net>

	* PkgVersion.pm: fix my mistake of using has_param instead of
	param_boolean like I should have the first time
	* Validate.pm: Added NoPerlType to valid field list and boolean list

2003-08-27  Justin F. Hallett  <thesin@users.sourceforge.net>

	* PkgVersion.pm: Added NoPerlTests field to info file for Type: perl
	this will make it easier fo rthe maintainers to keep the pkgs compat
	since you will nolonger need to manually type the configure params to
	remove the make test proceedure.

2003-08-20  Peter O'Gorman  <ogorman@users.sourceforge.net>

	* PkgVersion.pm: Print the expected an actual checksums when comparison
	fails. Saves me typing "md5 /sw/src".

2003-08-19  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: Check gcc_select when the GCC field is present,
	and exit with an error if the wrong version of gcc has been selected.

2003-08-14  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: Disable the prebinding code unless the distribution
	is > 10.2.
	* Bootstrap.pm, SelfUpdate.pm: Add gettext-bin to the bootstrap and
	update lists (in preparation for making it non-essential)
	* Bootstrap.pm: Move the code which enables the 10.3 distribution to
	a new branch, "test_10_3"

2003-07-29  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm: added second option to resolve_depends call to specify
	  the operation
	* PkgVersion.pm: enabled the second option checking in resolve_depends
	  to force dep reading from the info if rebuild is the operation

2003-07-17  Justin F. Hallett  <thesin@users.sourceforge.net>

	* shlibs.pm: removed my debug line, left RangerRick's for now
	* shlibs.pm: added more space filtering in the inject_shlibs sub
	* PkgVersion.pm: added verbosity level for output in 'resolve_depends'

2003-07-17  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* VirtPackage.pm: Don't print the output of linking the
	-single_module test we only care about pass/fail.

2003-07-16  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm: added verbosity level for output for 'fink depends'

2003-07-15  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Engine.pm: Adding 'fink depends' to give a list of expanded depends
	  good for maintainers since it'sll expand ${SHLIB_DEPS} if the pkg
	  is built.

2003-07-15  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm, SelfUpdate.pm: Add bzip2-dev, gettext-dev,
	libiconv-dev, ncurses-dev to the bootstrap and update lists

2003-07-14  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Shlibs.pm: Evil, scary voodoo to remove duplicates in dependency
	  specifications.  I tried to document the heck out of it, but it's
	  still pretty freakish.  Handle with care.  :)

2003-07-14  Max Horn  <max@quendi.de>

	* VirtPackage.pm: Explicitly check for the existence of 'what' and 'cc'
	before invoking them. This is necessary for the PDB, which runs on a
	non-darwin system currently, but also for any system which has no compiler.

2003-07-11  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Shlibs.pm: Added new file to deal with all the shlibs functions
	* Bootstrap.pm: Added call to require_shlibs
	* Selfupdate.pm Added call to forget_shlibs and require_shlibs (in case
	  we use selfupdate to populate override.shlibs)
	* Engine.pm: added forget, and require for shlibs to enable auto index
	* Package.pm: removed a \n to clean up the output since the shlibs
	  index code is always called after the pkg index code
	* PkgVersion.pm: adding ${SHLIB_DEPS} replace code, had to ignore
	  ${SHLIB_DEPS} in resolve_depends
	* PkgVersion.pm: added check in resolve_depends for deb file, if deb
	  file call get_debdeps
	* PkgVersion.pm: added get_debdeps function to read the deps from a
	  deb file and return the comma delimited string

2003-07-09  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: switch from BSD tar to /bin/pax for the
	implementation of TarFilesRename.

2003-07-06  Peter O'Gorman <ogorman@users.sourceforge.net>

	* VirtPackage.pm, Config.pm, Engine.pm, Package.pm, PkgVersion.pm,
	Bootstrap.pm, Status.pm:
	Move all virtual package stuff to one file, add fink-virtual-pkgs file.

2003-07-05  Dave Morrison <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: Revision of "Type: perl" to handle changes in 5.8.0
	(thanks to JF Mertens)

2003-07-04  Peter O'Gorman <ogorman@users.sourceforge.net>

	* Validation.pm: Check for hardcoded /sw in the scripts and set fields.

2003-07-02  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: Removed some unnecessary debug stuff

2003-07-01  Benjamin Reed  <rangerrick@users.sourceforge.net>

	* Config.pm, Status.pm: added cctools-single-module
	  (cctools-<version>-1 is deprecated)
	  It is better to test capabilities than versions

2003-06-27  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Bootstrap.pm: Added checks for 10.3 tree
	* PkgVersion.pm: Adding RangerRick's patch for prebinding for 10.3 only

2003-06-19  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm:  Bootstrapping with perl 5.6.1 also requires
	storable-pm561.

2003-06-14  Max Horn  <max@quendi.de>

	* Bootstrap.pm: Allow bootstrapping with perl 5.6.1; cleaned up code; show
	  more user friendly error message in case of an unknown perl version.

2003-06-13  Ben Hines <benh57@users.sourceforge.net>

	* NetAccess.pm: Support file:// and bare tarball names without choking

2003-06-12  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: allow bootstrapping with perl 5.8.1 too

2003-06-11  Ben Hines <benh57@users.sourceforge.net>

	* Services.pm: Clarify nesting too deep error.

2003-06-11  Justin F. Hallett <thesin@users.sourceforge.net>

	* Selfupdate.pm: added -q to cvs commands based on verbosity level
	from the config file and/or command line.

2003-06-09  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Bootstrap.pm: allow bootstrapping with either perl 5.6.0 or
	perl 5.8.0

2003-06-07  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Engine.pm, PkgVersion.pm:  Allow an essential package to have a
	splitoff which is not essential.  (However, the parent of an
	essential package must be essential.)  Uses a new virtual field
	_ParentEssential.

2003-06-04  Chris Zubrzycki <beren12@users.sourceforge.net>

	* Engine.pm: Add fink list limit by maintainer or tree.

2003-05-26  Ben Hines <benh57@users.sourceforge.net>

	* Engine.pm: Fix alternate depends on splitoffs.

2003-05-23  Ben Hines <benh57@users.sourceforge.net>

	* Services.pm: Use full path to uname to prevent build problems.

2003-05-23  Benjamin Reed <rangerrick@users.sourceforge.net>

	* Bootstrap.pm: Handle (Open)Darwin 6.6.

2003-05-23  Peter O'Gorman <ogorman@users.sourceforge.net>

	* Validation.pm: Allow <package>.info.

2003-05-16  Ben Hines <benh57@users.sourceforge.net>

	* Engine.pm: Cache arch to minimize uname calls.

2003-05-14  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Validation.pm: Check the .deb file for the presence of a .bundle
	in a non-versioned subdirectory of /sw/lib/perl5; if present, warn
	about a possible perl XS module installed incorrectly.

2003-05-12  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm, Validation.pm: Introduce new versioned variants
	of "Type: perl".  (Patch #725425)

2003-05-10  Max Horn  <max@quendi.de>

	* NetAccess.pm: Don't default to MasterFirst, but rather to MasterLast
	  (using MasterFirst as long as the master mirror has not all files is
	  causing more pain than it helps).

2003-05-10  Rob Braun <bbraun@users.sourceforge.net>

	* PkgVersion.pm: When doing a fetch-* --dry-run, and the source
	  doesn't have a URL, ignore the entry.

2003-05-07  Ben Hines <benh57@users.sourceforge.net>

	* Bootstrap.pm: support 10.2.6

2003-05-07  Rob Braun <bbraun@users.sourceforge.net>

	* Config.pm, Engine.pm, Package.pm, PkgVersion.pm,
	  Services.pm, Validation.pm: Remove hard coded references
	  to 'powerpc'.  (Patch #732058)

	* PkgVersion.pm, Validation.pm: Add %m for machine architecture
	  string expansion.

2003-05-04  Max Horn  <max@quendi.de>

	* Bootstrap.pm: Added check_host and check_files, used by bootstrap.pl and
	  postinstall.pl (Patch #731980).

	* PkgVersion.pm: Explicitly invoke get_bsbase with its full qualified name,
	  Fink::Bootstrap::get_bsbase (Patch #731980).

2003-05-03  Max Horn  <max@quendi.de>

	* Validation.pm: Check for bad (DOS or Mac) line endings in .info / .patch
	  files, and also check for empty .patch files (Patch #731791).

2003-05-02  Max Horn  <max@quendi.de>

	* Validation.pm: Do not allow arbitrary license combinations, rather only a
	  fixed set (which we can extend as needed). See bug #670788.

	* Services.pm: Warn if an .info file uses a field more than once (will soon
	  be turned into an error).

2003-04-26  Max Horn  <max@quendi.de>

	* PkgVersion.pm: Fix multi line Depends/BuildDepends fields, and slightly
	  improve detection of malformed dependencies.

2003-04-15  Ben Hines  <benh57@users.sourceforge.net>

	* SelfUpdate.pm: Allow distribution upgrades to work (append fake revision)

2003-04-08  Ben Hines  <benh57@users.sourceforge.net>

	* Services.pm: Allow comments (#) in fink Script fields

2003-04-05  Ben Hines  <benh57@users.sourceforge.net>

	* Many Files: Implement fink master mirroring (Patch #700260).

2003-04-04  Max Horn  <max@quendi.de>

	* PkgVersion.pm (set_env): Fix for environment variables that contain a '='
	  in their value (fix by Daphne Pfister).

2003-03-30  Max Horn  <max@quendi.de>

	* Validation.pm: There are no NoSourceNDirectory fields (i.e. with a
	  number).

2003-03-20  Max Horn  <max@quendi.de>

	* PkgVersion.pm (run_script): Backup the environment before clearing it
	  via set_env; then after running the script, restore it.

2003-03-07  Ben Hines  <benh57@users.sourceforge.net>

	* Engine.pm: Add 'ignore-restrictive' option to "fetch-missing",
	  to support creating fink mirrors.

2003-03-05  Ben Hines  <benh57@users.sourceforge.net>

	* PkgVersion.pm: Add section to dpkg control file (should prevent "unknown
	  section" for unstable locally built binaries in dselect) and correct root
	  dir error typo.

2003-02-28  Max Horn  <max@quendi.de>

	* Package.pm: Reverting a "fix" from 2003-01-27 (no ChangeLog entry was
	  made) which causes the package DB file to grow ad infinitum (unless a
	  manual "fink index" is performed). A proper fix for the issue this was
	  meant to fix has yet to be added.

2003-02-27  Max Horn  <max@quendi.de>

	* Engine.pm: Fixed "fink list" output (some whitespaces were converted to
	  tabs but shouldn't have been).

	* All files: Changed from indent/tab style 2/8 (strange emacs style) to
	  the more common 4/4 style.

	* Engine.pm: Seperated the help texts for "fink list" and "fink apropos".
	  Also clarified and unified their wording.

2003-02-17  Dave Morrison <dmrrsn@users.sourceforge.net>

	* Config.pm, Status.pm: provide virtual package for cctools (Patch #687178).

2003-02-16  Ben Hines <benh57@users.sourceforge.net>

	* Services.pm: Use /sbin/md5 for md5sums if present (Patch #675893).

2003-02-16  Max Horn  <max@quendi.de>

	* Package.pm, PkgVersion.pm, SelfUpdate.pm, Services.pm: Added Ben Hines
	  patch for epoch support (Patch #607742).

	* Validation.pm: Make package validator recognize the new Epoch field.

2003-01-29 Ben Hines <benh57@users.sourceforge.net>

	* Package.pm: Do not require storable to create index (Bug #676512).

2003-01-28  Dave Morrison <dmrrsn@users.sourceforge.net>

	* Engine.pm: Adjust dependencies when working with multiple
	splitoffs at the same time (Bug #641462).

2003-01-24  Max Horn  <max@quendi.de>

	* Package.pm: Carsten Klapp's patch to speed up search_comparedb and
	  update_db, which speeds up many fink commands a bit (Patch #674313).

	* Services.pm: Tiny optimization in expand_percent.

	* Validation.pm: Fix validation if not BuildPath is specified in fink.conf.

2003-01-23  Max Horn  <max@quendi.de>

	* Services.pm: Added Paul Gaborit's patch to speed up expand_percent and
	  hence index building.

2003-01-22  Ben Hines <benh57@users.sourceforge.net>

	* Engine.pm, Package.pm: Match "fink list" & "install/remove/etc"
	  items case-insensitively (Patch #622663).

2003-01-22  Max Horn  <max@quendi.de>

	* Various files: Applied Chris Zubrzycki's build directory patch which
	  allows the use of an alternate build dir (Patch #658682).

2003-01-18  Dave Morrison  <dmrrsn@users.sourceforge.net>

	* Validation.pm:  Allow a new license "Restrictive/Distributable"
	  to indicate that distribution of binaries is allowed even though
	  the license is restrictive.

2003-01-15  Max Horn  <max@quendi.de>

	* Validation.pm: Putting stuff inside /sw/src is illegal for a .deb,
	  but just containing /sw/src is fine (as long as it is empty).

2003-01-14  Max Horn  <max@quendi.de>

	* Engine.pm, Services.pm: Fixing problems with exit codes (Patch #662894).

	* Engine.pm: 'fink apropos' command now also matches the package name,
	  not just the package description (Patch #661169).

	* Services.pm: Added terminal width fix from patch #598402.

2003-01-13  Finlay Dobbie <finlay@users.sourceforge.net>

	* PkgVersion.pm (merge): Added warning to if we try to merge a
	non-dummy package.

2003-01-12  Dave Morrison <dmrrsn@users.sourceforge.net>

	* all files: updated copyright notice to include 2003

2003-01-12  Finlay Dobbie <finlayd@users.sourceforge.net>

	* PkgVersion.pm: Fix splitoff dependency problem (Bug #641466).
	Also removed the really old "pkg <blah> version ###" text, finally.

	* Package.pm: Moved to custom find code for scan_packages. Hopefully
	safer, possibly slightly faster, but I doubt it.

2003-01-07  Max Horn  <max@quendi.de>

	* Validation.pm: Warn if MD5 field(s) is/are missing.

2003-01-05  Justin F. Hallett <thesin@users.sourceforge.net>

	* Engine.pm:  Added sub phase_purge

	* PkgVersion.pm:  Added sub cmd_purge and change fink purge to
	acctually do a dpkg purge

2003-01-02  Benjamin Reed <rangerrick@users.sourceforge.net>

	* Services.pm:  One-liner fix to get rid of an undefined warning

2002-12-24  Dave Morrison <dmrrsn@users.sourceforge.net>

	* Validation.pm:  Perl syntax fixes (thanks to Randal Schwartz)

2002-12-23  Dave Morrison <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm:  Back out the proposed changes to default values
	for the environment variables CPPFLAGS, LDFLAGS, LIBRARY_PATH, and
	DYLD_LIBRARY_PATH, which have been moved to the CVS branch "isystem"
	for further testing.

2002-12-23  Dave Morrison <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm, Validation.pm:  Allow the MACOSX_DEPLOYMENT_TARGET
	environment variable to be set in Fink. (Patch # 652716).

2002-12-22  Dave Morrison <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: Fix bootstrapping problem caused by giving full
	path-name to install-info.

2002-12-19  Ben Hines <benh57@users.sourceforge.net>

	* Services.pm: Allow whitespace after here-document separators.

2002-12-11  Ben Hines <benh57@users.sourceforge.net>

	* Services.pm, PkgVersion.pm: Pass filename to read_properties_var to
	  clarify here-document error.

2002-12-11  Benjamin Reed <rangerrick@users.sourceforge.net>

	* PkgVersion.pm: Added a key to the package object to track the
	"siblings" of a package.

	* Engine.pm: Added some code to check for sibling packages that are
	already installed or due to be installed, so that the user does not
	get asked to install something unless necessary (ie, if libungif-shlibs
	is already installed, it won't ask to choose between giflib and libungif).
	Also changed some of the other code to use the new "sibling" attribute
	from the PkgVersion.pm change above.

2002-12-04  Dave Morrison <dmrrsn@users.sourceforge.net>

	* SelfUpdate.pm: Modify the test used during the non-CVS version of
	fink selfupdate to check CURRENT_VERSION and download the file named
	dists-###.tar.gz (rather than LATEST_VERSION and
	packages-###.tar.gz)

2002-11-18  Max Horn  <max@quendi.de>

	* PkgVersion.pm: Patch #608920: Add --keep-root-dir and --keep-build-dir.

2002-11-14  Justin Hallett <thesin@users.sourceforge.net>

	* Engine.pm: fixed scanpackage default section to use proper value.

2002-11-13  Max Horn  <max@quendi.de>

	* Engine.pm: Install build dependencies when doing a rebuild (bug #637689).

2002-11-13  Chris Zubrzycki <beren12@users.sourceforge.net>

	* PkgVersion.pm: Fix the path of install-info. It is in %p/sbin, not %p/bin

2002-11-12  Max Horn  <max@quendi.de>

	* PkgVersion.pm: Apparently the install-info of texinfo is incompatible with
	 the dpkg one. Hence we reverse the previous change and instead harcode the
	 location of our install-info.

2002-11-11  Max Horn  <max@quendi.de>

	* PkgVersion.pm: Use "--info-dir" instead of "--infodir" as argument to
	  the install-info command (this should prevent problems with texinfo
	  version of install-info).

2002-10-31  Max Horn  <max@quendi.de>

	* Engine.pm: When we we build a package which we are not going to install
	  (e.g. as consequence of a 'fink build foo'), only resolve the build time
	  dependencies, not install-time deps (currently this only affects splitoffs
	  which depends on a sibling).

	* PkgVersion.pm: Build deps of a splitoff are equivalent to the parent's.

	* PkgVersion.pm: Fixed typos, clarified/extended some comments.

	* PkgVersion.pm: Set DYLD_LIBRARY_PATH, too. This  allows libtool to find
	  its *.la files in /sw/lib again.

2002-10-27  Max Horn  <max@quendi.de>

	* Mirror.pm: Never use "retry same mirror" as initial default choice if
	  there are other mirrors.

	* PkgVersion.pm: CPPFLAGS=-no-cpp-precomp + CPATH doesn't work correctly
	  with tar and probably many other packages. With -isystem, everything seems
	  fine now.

2002-10-25  Max Horn  <max@quendi.de>

	* PkgVersion.pm: Fixed bootstrap (my last change broke it).

	* PkgVersion.pm: Instead of the old default values for CPPFLAGS and LDFLAGS,
	  we now set CPATH and LIBRARY_PATH to point to the Fink include/lib dirs.
	  This should avoid many problem encountered in the past. However, it may
	  also break a few existing packages.
	  Since the Apple C preprocessor seems to ignore CPATH, we also set
	  by default -no-cpp-precomp (many packages need this anyway).

	* Validation.pm: recognize (No)SetCPATH and (No)SetLIBRARY_PATH fields.

2002-10-21  Ben Hines <benh57@users.sourceforge.net>

	* Services.pm: Fix typo in nesting too deep error.

2002-10-15  Max Horn  <max@quendi.de>

	* Engine.pm: Fixed a wrong 'circular dependencies' error caused by my
	  recent changes.

2002-10-14  Max Horn  <max@quendi.de>

	* Validation.pm: Recognize Tar??FilesRename field

	* Engine.pm: Once more install all splitoffs with a single call to dpkg
	  (this is done to avoid certain update troubles with splitoffs).

	* PkgVersion.pm: Allow percent expansion in CustomMirror field
	 (patch #621175, thanks to Ben Hines)

	* Engine.pm: Rewrote parts of real_install to hopefully make it cleaner,
	  easier to understand, and less buggy when it comes to splitoffs.

2002-10-12 Dave Morrison <dmrrsn@users.sourceforge.net>

	* PkgVersion.pm: When a Shlibs field is present, write its contents
	into DEBIAN/shlibs when building the deb

	* Validation.pm: Added Shlibs field

2002-10-10  Max Horn  <max@quendi.de>

	* Validation.pm: Added RunTimeVars field; warn if description ends with "."

2002-10-04  Benjamin Reed <rangerrick@users.sourceforge.net>

	* Engine.pm: Another small patch to the splitoff code.  This patch
	  changes the checking for flags (reinstall, rebuild, etc.) to match
	  the code used for installing the primary package, and it makes
	  sure that the parent splitoff is the last one installed on the
	  dpkg command-line to fix goofy dpkg ordering issues.

2002-09-28  Ben Hines <benh57@users.sourceforge.net>

	* PkgVersion.pm, NetAccess.pm: Patch 612681: Allow "continue"
	  for bad MD5 during "fink install... "

	* PkgVersion.pm: Fix Axel problem with partial downloads

	* PkgVersion.pm: Change some tarballs to "file"s

2002-09-28  Benjamin Reed <rangerrick@users.sourceforge.net>

	* Engine.pm: small patch to fix 'fink rebuild' and possibly some other
	  buglets that could sneak through.  If a package has splitoffs, it was
	  sometimes getting marked as "already activated" even if it was set to
	  be explicitly reinstalled.

2002-09-25  Benjamin Reed <rangerrick@users.sourceforge.net>

	* Engine.pm: fixed so that the rest of a splitoff doesn't get
	  reinstalled if just one package from the splitoff is being installed

	* PkgVersion.pm: fixes the get_fullname bug when a dependency
	  doesn't exist

	* PkgVersion.pm: moved the code that checks for existing versions
	  in the package tree when resolving dependencies -- in some cases
	  it could die because a package that wasn't supposed to exist was
	  getting marked as being there

2002-09-25  Ben Hines <benh57@users.sourceforge.net>

	* PkgVersion.pm: Patch #614133: fix gnome mirror

2002-09-19  Max Horn  <max@quendi.de>

	* Engine.pm, Package.pm, PkgVersion.pm: Patch #610249: fix for the 'node
	  exists' bug (bug #60016)

2002-09-08  Dave Morrison <dmrrsn@users.sourceforge.net>

	* Config.pm: adds $distribution (read from the config file) as
	  an exported item

	* SelfUpdate.pm: now checks out the "dists" CVS module rather
	  than the "packages" one (still as the "fink" directory).
	  This contains a "10.2" subdirectory.  Users using 10.1 also
	  get a second checkout: "packages/dists" is checked out as
	  "fink/10.1".

	* Validation.pm: added the new "gcc" field

2002-08-21  Max Horn  <max@quendi.de>

	* Engine.pm: Fixed "fink remove" command

2002-08-19  Max Horn  <max@quendi.de>

	* Engine.pm, PkgVersion.pm: Changed the data path for "fink remove" a bit

	* Engine.pm, PkgVersion.pm: Patch #596239 (fink splitoff install changes)
	  incorporated, improves splitoff handling

	* Validation.pm: Added JarFiles and TarFilesRename fields.

2002-08-11  Max Horn  <max@quendi.de>

	* PkgVersion.pm: Enhanced how the Files field (in splitoffs) is handled:
	  if the given path starts with a slash, we treat it as relative to %d/%D
	  otherwise as relative to %i/%I (as we do currently anyway).

	* Services.pm: Fix for bug #545155 (it was possible to cause infinite
	  recursion during percent expansion).

2002-08-10  Max Horn  <max@quendi.de>

	* SelfUpdate.pm: Only force a second rebuild of the package database, and
	  also only restart Fink if the package manager is being updated.

2002-08-05  Max Horn  <max@quendi.de>

	* Engine.pm (cmd_cleanup): Improved the "fink cleanup" command to also clean
	  files in /sw/src (only files not directories - removing directories in
	  /sw/src is dangerous as it can interupt running builds etc.)

	* Mirror.pm: Don't use mirror timestamp as a mirror (Bug #563182).

2002-08-04  Max Horn  <max@quendi.de>

	* Config.pm, Configure.pm: Fixed verbosity level selection.

	* PkgVersion.pm: Patch #588476 (Java support) by Sylvain Cuaz.

	* Fixed bug #548373 (package DB read thrice). It is not only read twice
	  (the new package manager may support new features, and thus must rebuild
	  the database once more)

	* Engine.pm: Patch #588705: Automates passing on the options
	  (by Sylvain Cuaz)

2002-08-03  Max Horn  <max@quendi.de>

	* Services.pm: Fixed read_properties_multival, it was broken by the
	  RuntimeVars patch.

	* PkgVersion.pm, Services.pm: Patch #579210: RuntimeVars field added
	  (thanks to Sylvain Cuaz for this)

2002-07-31  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Small fix to Configure.pm for the verbosity level selection,
	  which was reported not working. Should be fine now.

2002-07-28  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Added /sbin and /usr/sbin to the clean env since some pkgs need
	  stuff like chown or chmod to install properly.

2002-07-26  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Changed spacing in fink list easier to use with awk or cut
	* added a space before pkg list for better seperation of info

2002-07-26  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Services.pm: Fix for the Jag Argument "M-?M-^?M-X" isn't numeric
	  in numeric eq (==) at /sw/lib/perl5/Fink/Engine.pm line 330, <SW_VERS>
	  line 2. Bug.  But COLUMNS needs to bet exported in init.{csh, sh}

2002-07-25  Justin F. Hallett  <thesin@users.sourceforge.net>

	* Services.pm: Temp Fix for the Jag Argument "M-?M-^?M-X" isn't numeric
	  in numeric eq (==) at /sw/lib/perl5/Fink/Engine.pm line 330, <SW_VERS>
	  line 2. Bug.  Need better fix in future, maybe read $ENV{COLUMNS}

2002-07-25  Max Horn  <max@quendi.de>

	* PkgVersion.pm: Fixed Bootstrap (use /usr/bin/gnutar if %p/bin/tar is missing)

	* Engine.pm: Little fix that ensures Fink runs even if not on a terminal.

2002-07-24  Max Horn  <max@quendi.de>

	* Incorporated patch #504498 by Justin F. Hallett which adds the
	  TarFilesRename and TarNFilesRename field.

	* Incorporated patch #577882 by Sylvain Cuaz which cleans the environment
	before building packages.

2002-07-22  Max Horn  <max@quendi.de>

	* Various files: Applied Justin's multi-level verbosity patch.

2002-07-06  Max Horn  <max@quendi.de>

	* Package.pm (scan_all, update_db): Fixed index'ing bug.

2002-06-09  Max Horn  <max@quendi.de>

	* Engine.pm (cmd_cleanup): Added a "fink cleanup" command, still unfinished,
	but already usable to clean up .deb files.

2002-06-08  Max Horn  <max@quendi.de>

	* Bootstrap.pm (bootstrap): Added apt-shlibs to the list of packages that are
	automatically installed during bootstrap.

	* Engine.pm (cmd_scanpackages): Made apt-shlibs an "important" package.

	* Package.pm: Implemented use_cache flag - can later be used to add an
	option to turn off the package cacher temporarily.

	* SelfUpdate.pm (finish): Include apt-shlibs in the list of packags that are
	updated upon a selfupdate.

2002-05-28  Max Horn  <max@quendi.de>

	* Services.pm (file_MD5_checksum): Fixed bug caused by certain special
	characters occuring in filenames passed to this function.

2002-05-28  Max Horn  <max@quendi.de>

	* PkgVersion.pm (phase_patch, phase_compile, phase_install): Now use the new
	run_script method; single-shell scripts are now actually usable inside
	InstallScript and PatchScript.

	* PkgVersion.pm: New method run_script that encapsulates running a script.

2002-05-27  Max Horn  <max@quendi.de>

	* Validation.pm: Accept Source-MD5/SourceN-MD5 as legal fields.

2002-05-26  Max Horn  <max@quendi.de>

	* Engine.pm (do_real_list): Fixed bug that occured when output of 'fink list'
	was not going to a terminal and --width=auto was specified.

2002-05-25  Max Horn  <max@quendi.de>

	* PkgVersion.pm: Added Source-MD5/SourceN-MD5 fields.

	* Services.pm: Added file_MD5_checksum function.

	* PkgVersion.pm: Make use of the new execute_script function.

	* Services.pm: Added execute_script function (based on patch #534121 by
	Benjamin Reed).

2002-05-25  Alexander Strange <MrVacBob@mac.com>

	* SelfUpdate.pm (setup_direct_cvs): The hardlink-support test works now.

2002-05-23  Max Horn  <max@quendi.de>

	* Engine.pm (real_install): Under certain condition, splitoffs could have
	been activated more than once. This problem fixes this.

2002-05-16  Max Horn  <max@quendi.de>

	* Engine.pm (real_install): Fixed 'fink rebuild' to honor BuildDepends.

2002-05-16  Max Horn  <max@quendi.de>

	* Bootstrap.pm (bootstrap): Fixed bootstraping (YASB).

2002-05-11  Max Horn  <max@quendi.de>

	* Engine.pm (cmd_scanpackages): Fixed very stupid bug.

	* Validation.pm (validate_info_file): missing description field now is an
	error instead of a warning.

2002-05-05  Max Horn  <max@quendi.de>

	* PkgVersion.pm (enable_bootstrap, disable_bootstrap): fixed for splitoffs
	(thanks to Sylvain Cuaz for this patch).

2002-05-04  Max Horn  <max@quendi.de>

	* SelfUpdate.pm (do_tarball): Replaced prdownloads URL with mirror 'sourceforge'.

2002-05-02  Max Horn  <max@quendi.de>

	* PkgVersion.pm (resolve_depends): Fixed bug that made building splitoffs that
	depend on their master impossible (affects kdebase package).

2002-05-01  Max Horn  <max@quendi.de>

	* PkgVersion.pm (get_description): Don't display DescPort and DescPackaging,
	they are unimportant for the avarage user and developers must look at the
	.info file anyway.

2002-04-25  Max Horn  <max@quendi.de>

	* Engine.pm (real_install): Fixed bug #546315

2002-04-19  Max Horn  <max@quendi.de>

	* Bootstrap.pm, Engine.pm, SelfUpdate.pm: Made storable-pm an "important"
	package like apt, i.e it will be installed during bootstrap and updated on
	on selfupdate.

2002-04-15  Max Horn  <max@quendi.de>

	* all: updated copyright notice.

2002-03-31  Max Horn  <max@quendi.de>

	* Package.pm: Now works again if the Storable perl module is not installed.

2002-03-31  Finlay Dobbie <finlayd@users.sourceforge.net>

	* Package.pm: Added support for caching of info files.

	* Engine.pm: Added an index command to update the cache.

	* SelfUpdate.pm (do_finish): added hook to update package cache.

2002-03-26  Justin F. Hallett <thesin@southofheaven.net>

	* PkgVersion.pm: Fixed Type: perl to install the execs into
	the proper dir and not directly into BASEPATH.

2002-03-21  Max Horn  <max@quendi.de>

	* PkgVersion.pm: added get_tree function

	* NetAccess.pm (download_cmd): Added another download method, "axel"
	(thanks to Alexander Strange)

2002-03-19  Max Horn  <max@quendi.de>

	* Config.pm (initialize): No macosx pseudo package if we are not on
	Mac OS X!

	* Status.pm (initialize): Fixed macosx version detection on Darwin
	(obviously there is no Mac OS X version on a pure Darwin system)

2002-03-16  Max Horn  <max@quendi.de>

	* PkgVersion.pm (resolve_depends): Yet another attempt to fix splitoff
	build dependencies, hopefully more succesful this time.

2002-03-16 Dave Morrison <dmrrsn@users.sourceforge.net>

	* Validation.pm: Added "SplitOff" to the list of known fields, and
	parsing for SplitOff2-SplitOff9

	* Engine.pm: When fink prompts users for a decision about a
	dependency, it now displays the Descriptions of the packages involved
	in the decision.

2002-03-16  Max Horn  <max@quendi.de>

	* Validation.pm: Added "BuildDependsOnly" to the list of known fields

	* PkgVersion.pm (resolve_depends): Fixed this so that splitoffs and
	splitoff masters always return the same (correct) build dependencies.

	* PkgVersion.pm (add_splitoff): Removed annoying debug output ("Found a
	splitoff")

	* Services.pm (read_properties_lines): Handle nested heredocs
	correctly, and if errors are encountered, once more output the
	affected filename.

2002-03-13  Peter O'Gorman <ogorman@users.sourceforge.net>

	* Engine.pm (do_real_list): Don't read package info first, wait and
	see if it is needed. Fixed a mistake in the help text.

2002-03-13  Max Horn  <max@quendi.de>

	* PkgVersion.pm (phase_build): Fix so that root-dirs of splitoffs are
	properly removed again.

2002-03-13  Peter O'Gorman <ogorman@users.sourceforge.net>

	* Engine.pm: Support for options in apropos and list commands.

	* Services.pm: Added a get_term_width function.

2002-03-09  Max Horn  <max@quendi.de>

	* Engine.pm (cmd_apropos): Fixed apropos commands for strings like "gtk+"

2002-03-07  Max Horn  <max@quendi.de>

	* Engine.pm (real_install): Fix to make rebuilding splitoffs and splitoff
	master packages work correctly.

	* PkgVersion.pm (initialize): Expand percents in even more fields now:
	Suggests, Enhances, Recommends and Pre-Depends.
	(expand_percent_if_available): First converts field parameter to lower case.
	(phase_install): Fixed some issues with the Files field, and changed the
	order in which it is processed (now comes before DocFiles, not after)

2002-03-06  Max Horn  <max@quendi.de>

	* PkgVersion.pm: Multitude of changes, implementing initial splitoff
	support. Percent expansion is now done in all dependency related fields.

	* Package.pm (inject_description): Return the created PkgVersion object
	to the called. Used by splitoff code

	* Services.pm (read_properties): Split this function, creating two new
	called read_properties_var and read_properties_lines, which take a text
	variable / a list of strings, instead of a file. Used by splitoff code.

2002-02-23  Max Horn  <max@quendi.de>

	* NetAccess.pm (fetch_url_to_file, download_cmd): Allow the user to
	resume partial downloads.

	* NetAccess.pm (download_cmd): Added 'DownloadMethod' field to fink.conf
	(thanks to Christian Swinehart).

	* NetAccess.pm (download_cmd): If we use curl, make sure it treats
	error 404 properly, i.e. fail instead of downloading the error page
	(thanks to Joseph Bauer).

	* Engine.pm (, cmd_fetch_allcmd_fetch_all_missing): keep going even if a
	single file could not be downloaded. (thanks to Randal L. Schwartz).

2002-02-01  Max Horn  <max@quendi.de>

	* Validation.pm: deb file validator now warns if files are installed
	outside of /sw.

2002-01-27  Max Horn  <max@quendi.de>

	* Validation.pm: Warn on unknown licenses.

2002-01-26  Max Horn  <max@quendi.de>

	* Validation.pm: Many more problems are detected now

	* Engine.pm (restart_as_root): Pass on more options to new instance

	* *.pm: Changed to use new is_verbose() function to determine verbosity

	* Config.pm (is_verbose): New function, returns true if verbose mode is on

	* Validation.pm: Only be verbose in verbose mode

	* Validation.pm: Warn on missing license field

2002-01-11  Max Horn  <max@quendi.de>

	* FinkVersion.pm.in: If /sw/fink/VERSION is missing, now tries to look
	at the old /sw/etc/fink-release file instead.

2002-01-10  Max Horn  <max@quendi.de>

	* FinkVersion.pm.in: moved fink-release from /sw/etc to /sw/fink and
	renamed it to VERSION to match with other modules

	* SelfUpdate.pm: fixed selfupdate, it would hang when trying to
	uncompress the package tar ball.

2002-01-05  Max Horn  <max@quendi.de>

	* Validation.pm: fixed stupid mistake

	* Validation.pm: Added /sw/lib/locale to list of deprecated directories;
	added some new fields to list of allowed fields (not yet used)

2001-12-28  Matthias Neeracher <neeracher@mac.com>

	* Package.pm: Added %package_hash which speeds up some operations
	enormously.

2001-12-27  Max Horn  <max@quendi.de>

	* Config.pm: Added $darwin_version and $macosx_version, reflecting
	the kernel/system versions.

	* Status.pm (initialize): Added pseudo packages 'darwin' and 'macosx'
	which can be used for dependencies on specific kernel/system versions.

2001-12-23  Max Horn  <max@quendi.de>

	* PkgVersion.pm (phase_install): Fixed bug occuring when removing the
	last 'perl' type package using UpdatePOD.

2001-12-21  Max Horn  <max@quendi.de>

	* PkgVersion.pm, Package.pm: Allow '+' in package names.

2001-12-20  Max Horn  <max@quendi.de>

	* SelfUpdate.pm (do_direct_cvs): Fixed CVS updating for core developers
	(CVS_RSH now always is set to 'ssh').

2001-12-12  Justin F. Hallett  <thesin@southofheaven.net>

	* PkgVersion.pm: Added UpdatePOD field, and added value "Perl" for
	the "type" field to better support perl packages

2001-12-11  Max Horn  <max@quendi.de>

	* Engine.pm (cmd_remove): All packages to be removed are now passed
	at once to dpkg, thus taking advantage of the advanced dependency
	resolving mechanism of dpkg.

2001-12-02  Max Horn  <max@quendi.de>

	* PkgVersion.pm: Added percent expansion for SourceRename fields

2001-11-06  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm (process): Get rid of the funky "Done." message.

2001-11-04  Christoph Pfisterer  <cp@chrisp.de>

	* SelfUpdate.pm (setup_direct_cvs): Made the File::Find routine
	more robust. Should be able to handle exotic file names now.

2001-11-02  Christoph Pfisterer  <cp@chrisp.de>

	* SelfUpdate.pm: Major rewrite. Now gives the user the choice
	between tracking point releases (the usual packages-#.#.#.tar.gz
	procedure) and setting up direct CVS updating.
	* Engine.pm: Added a selfupdate-cvs command.

2001-11-01  Christoph Pfisterer  <cp@chrisp.de>

	* Mirror.pm (new_from_field): Disabled the case for leaving out
	the key in custom mirror lists; it doesn't work anyway because the
	URLs themselves also contain colons. We'll need another separator.

2001-10-27  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (resolve_depends): Make "package not found"
	non-fatal if there are alternatives.

2001-10-20  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm (real_install): Let the user pick one alternative when
	resolving dependencies with virtual packages.

2001-10-18  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm (restart_as_root): Propagate the "--yes" option when
	restarting as root.

	* Services.pm (prompt, prompt_boolean, prompt_selection): Check
	the "dontask" a.k.a. "--yes" option and use the default value
	instead of prompting the user when set.

	* Config.pm: Added infrastructure to propagate command line
	options: set_options() and get_option().

	* Engine.pm (process): Be more helpful when the user entered an
	unknown command (contributed by Justin Hallett).

2001-10-17  Christoph Pfisterer  <cp@chrisp.de>

	* Mirror.pm: New class that handles both named and package-local
	mirror site lists. Retrying is handled more intelligently.
	* NetAccess.pm: Another major overhaul. Handling of mirrors has
	been moved to the new Mirror class. That greatly simplified the
	fetch_url_to_file routine.
	* PkgVersion.pm: Use the new Mirror class to handle package-local
	mirrors. The mirror list is parsed on the fly when it is needed.

	* Engine.pm (process): Added a "this command needs root
	privileges" flag. Minor restructuring.
	(restart_as_root): New function which re-executes fink as root,
	passing the current command. Now knows about su if configured.

	* FinkVersion.pm.in: Made independent of Fink::Config. The
	installation path is now hardcoded during installation, like with
	fink.in.

2001-10-14  Christoph Pfisterer  <cp@chrisp.de>

	* Services.pm (version_cmp): Hopefully get it right this
	time. dpkg implicitly separates version and revision before
	comparing them. As a result the change to fink's comparison
	function that should fix openssh's version ordering broke
	openssl's ordering.

2001-10-13  Christoph Pfisterer  <cp@chrisp.de>

	* Services.pm (filename): More general solution to handle mirror:
	URLs that don't contain a slash.

2001-10-10  Max Horn  <max@quendi.de>

	* Service.pm (filename): Handle fileanames with the mirror: syntax
	correctly (was broken).

	* PkgVersion.pm (initialize): Parse the new CustomMirror field
	(fetch_source): pass the custom mirror list to fetch_url_to_file

	* NetAccess.pm: converted tabs to spaces
	(fetch_url_to_file): some  clean up, now handles "custom" mirrors,
	code that determines the download cmd moved to a separate function
	so that it will be easier to enhance this.

2001-10-09  Christoph Pfisterer  <cp@chrisp.de>

	* FinkVersion.pm.in (pkginfo_version): New function to evaluate
	the stamp files for package descriptions.
	* SelfUpdate.pm (check): Use the new pkginfo_version() instead of
	distribution_version(). Stop dead when CVS updating is
	detected. Minor text and code fixes.

	* Services.pm (version_cmp): Changed the version comparison to
	match that of dpkg exactly.

	* SelfUpdate.pm (check): Suppress inject.pl's user info message.

2001-10-07  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (get_tarball): Handle the new SourceRename and
	Source#Rename fields.
	(fetch_source): Use get_tarball and fetch_url_to_file to handle
	on-the-fly renaming. Disabled verbose error messages, failures are
	handled by fetch_url_to_file. Added tries parameter (passed on to
	fetch_url_to_file).
	(phase_unpack): Offer re-downloading when unpacking fails. Let tar
	handle gzip-compressed files to catch more errors (the shell pipe
	apparently only returns the last command's error code).

2001-10-05  Christoph Pfisterer  <cp@chrisp.de>

	* NetAccess.pm: Major overhaul. New function fetch_url_to_file
	allows a target file name to be specified. fetch_url calls through
	to the new function. mirror: URL's are handled
	transparently. After obvious failures fetch_url_to_file offers the
	user to retry the same server or a randomly chosen mirror.
	* Services.pm (expand_url): Removed mirror expansion code.
	* PkgVersion.pm (fetch_source): Don't use expand_url, this is now
	handled transparently by fetch_url.

2001-10-04  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm (cmd_scanpackages): Make sure the directory we're
	scanning does exist.

2001-09-27  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_patch): New fields UpdateConfigGuessInDirs
	and UpdateLibtoolInDirs to copy the replacement files directly
	into a list of subdirectories.

2001-09-21  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_install): Create a small README for bundle
	packages - dpkg doesn't like empty packages.

2001-09-17  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: More protection against unexpected white space.

	* Services.pm (collapse_space): New function to collapse all white
	space in a string into a single space. Useful to eliminate
	newlines in fields that shouldn't have any.

2001-09-13  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (get_binary_depends): Convert newlines to spaces.

2001-09-12  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (resolve_depends): Include build-time dependencies
	when requested (new field BuildDepends).
	* Engine.pm (real_install): Check build-time dependencies if the
	package is going to be built.

2001-09-12  Max Horn  <max@quendi.de>

	* Engine.pm: Added 'apropos' command analog to the Unix 'apropos'

2001-09-11  Christoph Pfisterer  <cp@chrisp.de>

	* SelfUpdate.pm (check): Adapted to the new structure, check
	against the distribution version.

	* FinkVersion.pm.in: Added functions to retreive package manager
	and distribution versions.

	* Services.pm: Resolved circular dependency between Services and
	Config.

2001-09-09  Christoph Pfisterer  <cp@chrisp.de>

	* Status.pm (read): Make non-existence of the dpkg status file
	non-fatal.

	* Package.pm (get_matching_versions): Implemented the version
	comparisons supported by dpkg.
	* PkgVersion.pm (initialize): Removed special handling for the
	Depends field.
	(get_depends): Removed, not needed any more.
	(resolve_depends): Rewritten to allow versioned dependencies and
	alternatives.
	(get_binary_depends): New function to generate dependencies for
	the .deb.
	(phase_build): Use get_binary_depends for the Depends field. Added
	Recommends, Suggests, Enhances and Pre-Depends.

2001-09-07  Christoph Pfisterer  <cp@chrisp.de>

	* Bootstrap.pm: Create dpkg status area earlier.

2001-09-06  Christoph Pfisterer  <cp@chrisp.de>

	* Status.pm (list): Added list() method to retreive the whole
	list, independent of installation status.
	* Package.pm (scan_all): Get list of known packages from dpkg and
	merge it into the info read from files.
	(inject_description): New function to centralize creation of
	version objects.
	* PkgVersion.pm: Added checks for dummy packages created from the
	dpkg status file.

2001-09-04  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm (cmd_scanpackages): Fixes to section and priority
	determination.

	* Config.pm (initialize): Bail out if Basepath is not set in the
	config file.

2001-09-03  Christoph Pfisterer  <cp@chrisp.de>

	* Services.pm: Removed obsolete FindBin import.

	* Package.pm: Enable on-demand loading of package descriptions
	through require_packages().
	* Engine.pm: Use require_packages() for on-demand loading of
	package descriptions. Fixed the flag for some commands. Adapted
	the rescan command.
	* Bootstrap.pm: Use require_packages() instead of cmd_rescan().
	* SelfUpdate.pm: Use require_packages() to reload package info
	after update.

	* Engine.pm: Load specialized modules on demand only.

2001-09-03  Max Horn  <max@quendi.de>

	* Bootstrap.pm: Fixed bootstrap by forcing the package descriptions
	to be read in.

2001-08-31  Christoph Pfisterer  <cp@chrisp.de>

	* NetAccess.pm (fetch_url): Let curl follow redirects.

2001-08-29  Christoph Pfisterer  <cp@chrisp.de>

	* NetAccess.pm (fetch_url): Support curl as well as wget.

	* Configure.pm (configure): Passive FTP is now the default.

	* PkgVersion.pm (phase_install): Added DocFiles field to ease
	installation of README files.

2001-08-28  Max Horn  <max@quendi.de>

	* Validation.pm: made sure that validate also works when the
	specified filename contains a path; upped limit for Description
	field to 45 chars, seems to be sufficient for "fink list"

2001-08-26  Max Horn  <max@quendi.de>

	* Validation.pm: New Module. Contains the code for validation of
	both .info and .deb files.
	* Engine.pm: moved validation code to new module.

2001-08-26  Max Horn  <max@quendi.de>

	* Engine.pm: added new command "validate" (alias "check") which
	validates a given package .info file or .deb file. Not finished.

2001-08-24  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (get_description): Added the Maintainer field to
	'fink describe' output.

	* Bootstrap.pm (bootstrap): Added code to install some
	non-essential, but important packages at bootstrap time. Currently
	installs apt.

2001-08-22  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_patch): Added support for
	UpdatePoMakefile. When set, copy the updated Makefile.in.in to the
	po subdirectory of the source tree.

2001-08-14  Christoph Pfisterer  <cp@chrisp.de>

	* SelfUpdate.pm: New module. Contains code to let Fink update
	itself from the Internet.
	* Engine.pm: Added self-update commands to the command list.
	* NetAccess.pm: New module. Encapsulates downloading files from
	the Internet (currently done via wget).
	* PkgVersion.pm (fetch_source): wget invocation code moved to the
	new NetAccess module.

2001-08-08  Christoph Pfisterer  <cp@chrisp.de>

	* Status.pm: New module. Parses the dpkg status file to find the
	installation status of packages.
	* PkgVersion.pm: Use Fink::Status to get the installed status of
	packages. Got rid of .../var/fink-stamp.

2001-08-06  Christoph Pfisterer  <cp@chrisp.de>

	* Services.pm (read_properties): Fixed regular expressions to
	really remove trailing whitespace.
	(read_properties_multival): Likewise.

	* Engine.pm (real_install): Added check to catch endless loops
	caused by circular dependencies.

2001-07-30  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Provide the full path to the build directory in
	the expansion %b.

2001-07-22  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Added new package type 'nosource'.

2001-07-21  Christoph Pfisterer  <cp@chrisp.de>

	* Bootstrap.pm (bootstrap): Create empty 'diversions' file for
	dpkg-divert during bootstrap.

	* Engine.pm: Added 'desc' and 'info' as aliases for the
	'description' command. Suggested by Max Horn.

2001-07-13  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (get_description): Added optional style
	parameter.

	* Package.pm: Make sure the PkgVersion.pm module is loaded.

	* PkgVersion.pm (phase_build): Added support to automatically
	install / remove Info documents.

2001-07-07  Christoph Pfisterer  <cp@chrisp.de>

	* Services.pm (read_properties): Ignore trailing white space.
	(read_properties_multival): Likewise.

	* Engine.pm: Added commands for a human-readable (list) and a
	machine-readable (listpackages) package listing.

	* PkgVersion.pm: Added method get_shortdescription to get just the
	one line description.

2001-07-05  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm (real_install): Optionally print list of requested
	packages that will actually be installed/built/whatever.
	(cmd_update_all): Always show the list described above.

	* Configure.pm (configure): Added proxy and firewall
	settings. Cosmetic output formatting changes.
	(choose_mirrors): Remember continent and country in the config
	file. Offer the current settings as default values.
	* PkgVersion.pm (fetch_source): Support new proxy and firewall
	settings.

	* Config.pm (set_param): Handle empty values.
	(save): Remove keys that are set to empty values from the file.

2001-06-30  Christoph Pfisterer  <cp@chrisp.de>

	* Package.pm (scan): Don't try to scan non-existing directories.

2001-06-28  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_build): Added support for inline daemonic
	service description file.

2001-06-22  Christoph Pfisterer  <cp@chrisp.de>

	* Bootstrap.pm: Use the new dpkg-bootstrap package during
	bootstrap phase two.

	* Engine.pm (cmd_fetch_missing): Fix handling of partially fetched
	packages.

	* PkgVersion.pm: Provide full package name in all error messages.

2001-06-17  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Automatically create section name from
	path. Search parent directories for .deb files.
	* Engine.pm (cmd_scanpackages): Write section to override file.

	* Engine.pm (real_install): Added preliminary virtual package
	support.
	* Package.pm (scan): Add the right object to the provider list.
	* PkgVersion.pm (initialize): Removed special treatment for x11 in
	dependency list.

2001-06-16  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: New methods to retreive dependency and conflict
	lists. Cache result of is_installed.

2001-06-14  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm: Catch pure virtual packages in cmd_fetch_all and
	cmd_fetch_all_missing.

2001-06-13  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Removed get_onlyversion.

2001-06-12  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Make some 'rm -rf' failures non-fatal.

2001-06-06  Christoph Pfisterer  <cp@chrisp.de>

	* Package.pm: Virtual packages, step 1 - keeping track of the
	Provides in the data structures. Also, ignore files that start
	with a dot (.) or a hash (#).
	* PkgVersion.pm: Pass Provides, Replaces and Conflicts on to
	dpkg.

2001-06-05  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm: Make sure only missing tarballs are fetched, not
	whole packages at a time.
	* PkgVersion.pm (phase_fetch): Optionally fetch only missing
	individual tarballs, instead of whole-package or none.

2001-06-04  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_build): Add symlink to built packages in
	<prefix>/fink/debs to make sure they can be found even after
	moving the descriptions around.

	* Engine.pm (cmd_description): Small formatting change.

2001-06-01  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_build): Use get_description to get the
	package description for the dpkg control file.
	(get_description): Improved formatting and added new fields.
	* Engine.pm (cmd_description): Improved formatting.

2001-05-26  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Do percent expansion on SourceDirectory and
	Source#ExtractDir.

2001-05-24  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm (cmd_scanpackages): Generate and use an override
	file.

	* PkgVersion.pm (phase_build): Added conffiles handling.

2001-05-23  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm: New command 'scanpackages' to generate Packages.gz
	files using dpkg-scanpackages.

	* PkgVersion.pm (phase_build): Apply percent expansions to package
	scripts.
	(match_package): Be more quiet if verbose output is not set.

2001-05-18  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_build): Added support for package scripts.

	* Services.pm (read_config): Removed dead code.
	(read_properties): Added here-document support.

	* Engine.pm (real_install): Fixed the don't-fetch-unless-needed
	check.

2001-05-11  Finlay Dobbie  <finlay.dobbie@btinternet.com>

	* PkgVersion.pm: get_description() implemented, for use in fink
	description <package>
	* Engine.pm: fink description implemented

2001-05-11  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (initialize): Dependencies must be separated by a
	comma now; a space is no longer sufficient. (Result of merging
	dpkg-branch and HEAD.)
	* Engine.pm (real_install): Added code to add all essential
	packages to the dependency list of non-essential packages. (Result
	of merging dpkg-branch and HEAD.)

2001-05-08  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (find_debfile): Also search <prefix>/fink/debs for
	.deb files.

	* Engine.pm (real_install): Only fetch when we need the tarballs
	later.

2001-05-04  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_activate): Detect dpkg malfunction
	(incomplete extraction) and offer to retry.

2001-05-02  Christoph Pfisterer  <cp@chrisp.de>

	* Base.pm (param_default): Fixed default handling.

2001-04-28  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Honor verbosity setting during fetch and
	unpack. Provide tips after download failures.
	* Configure.pm: Add interactive configuration for the verboseness
	setting.
	* Services.pm: New function print_breaking_twoprefix. Removed
	obsolete find_stow.

2001-04-24  Christoph Pfisterer  <cp@chrisp.de>

	* Bootstrap.pm: Fetch all packages at the beginning of the
	bootstrap.
	* Engine.pm: Renamed cmd_fetch_missing to
	cmd_fetch_all_missing. New routine cmd_fetch_missing that takes a
	package list.

2001-04-22  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Handle .zip files. Source files with an unknown
	extension are copied to the unpacking directory. Check build
	directory for existence.

2001-04-20  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_install): Remove dir files in the info
	directories (was removed during the dpkg move).

2001-04-14  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm: Changed internals of real_install. The first
	parameter to real_install is now one of the defined constants
	designating an operation. New commands: rebuild, reinstall.

	* PkgVersion.pm: Create DEBIAN directory during install
	phase. Mark essential packages as essential in dpkg control file.

2001-04-12  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm (real_install): Don't deactivate older revisions of a
	package before installing the new revision. dpkg takes care of
	upgrading itself, and refuses to violate dependencies.

2001-04-11  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Handle duplicate package descriptions in
	different directories.
	* Package.pm (add_version): Merge info if version is already
	present.

2001-04-10  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm: Use the new scan_all method.
	* Package.pm: Added method scan_all to scan all trees listed in
	the config file.
	* Config.pm: Added method get_treelist.

2001-04-05  Christoph Pfisterer  <cp@chrisp.de>

	* Config.pm: New variable $libpath, pointing at the directory for
	support files.
	* Configure.pm: Removed umask code. Use $libpath. Fixed wrong
	method call.
	* Engine.pm: Removed umask code. Call Fink::Package->scan on the
	correct directory in the new layout (temporary, hardcoded
	solution).
	* Package.pm (scan): Use File::Find to recursively search
	directories. Read all files with the extension '.info'. Pass the
	filename to the PkgVersion object for processing.
	* PkgVersion.pm: Use $libpath. Use the description file path
	passed by Fink::Package::scan to generate paths to the patch and
	to the binary .deb. New accessors for the .deb path. Other small
	fixes.

	* Services.pm (prompt_boolean): Fixed regular expression
	recognizing 'yes' answers.

2001-04-03  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_activate): Removed sudo from dpkg
	invocation command line.

	* Bootstrap.pm: Refined bootstrap.
	* Package.pm: New function list_essential_packages.
	* Services.pm (execute): Added quiet flag.

2001-04-01  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: Added accessor for .deb name. Use accessors
	wherever possible instead of direct access. Use $debarch
	variable. Add a dummy Description to the control file.
	* Config.pm: Added $debarch variable.

2001-03-31  Christoph Pfisterer  <cp@chrisp.de>

	* FinkVersion.pm: Set version number to "pre-0.2.0".

	* PkgVersion.pm: Major changes to support dpkg and
	bootstrapping. Added qualifiers to import list.
	* Bootstrap.pm: Separated bootstrap from interactive
	configuration. Massive changes to bootstrap with dpkg.
	* Configure.pm: New module for interactive configuration. Only
	minor changes from the old Bootstrap.pm.
	* Engine.pm: Separated bootstrap from interactive
	configuration. Added call to phase_build().

2001-03-30  Christoph Pfisterer  <cp@chrisp.de>

	* FinkVersion.pm: Bumped version number to 0.1.7.

2001-03-28  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm (phase_install): Removes build dir after
	successful build unless KeepBuildDir is set in the configuration.
	* FinkVersion.pm: Set version number to "post-0.1.6".

2001-03-21  Christoph Pfisterer  <cp@chrisp.de>

	* Engine.pm (real_install): Added check to catch unknown packages
	that are mentioned in a dependency list.

2001-03-08  Christoph Pfisterer  <cp@chrisp.de>

	* FinkVersion.pm: Bumped version number to 0.1.6.

	* Bootstrap.pm (choose_mirrors): Read mirror list from a file
	instead of just using all files in the directory.

2001-03-05  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: added support for bundle packages (no source,
	only dependecies).

2001-03-04  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: added code to disable the defaults for
	environment variables (e.g. NoSetCPPFLAGS: true).

2001-03-01  Christoph Pfisterer  <cp@chrisp.de>

	* PkgVersion.pm: added support for multiple tarballs per package.

2001-02-24  Christoph Pfisterer  <cp@chrisp.de>

	* FinkVersion.pm: new module for storing the version number.

2001-02-18  Christoph Pfisterer  <cp@chrisp.de>

	* Released version 0.1.5. Started using CVS and ChangeLogs.

# vim: ts=4 sw=4 noet
