diff -ruN gettext-0.14.5/gettext-tools/lib/execute.c gettext-0.14.5-patched/gettext-tools/lib/execute.c
--- gettext-0.14.5/gettext-tools/lib/execute.c	2005-05-20 13:19:48.000000000 -0700
+++ gettext-0.14.5-patched/gettext-tools/lib/execute.c	2006-08-14 05:21:26.000000000 -0700
@@ -62,7 +62,12 @@
 #endif
 
 #ifndef HAVE_ENVIRON_DECL
-extern char **environ;
+# ifdef __APPLE__
+#  include <crt_externs.h>
+#  define environ (*_NSGetEnviron())
+# else
+   extern char **environ;
+# endif
 #endif
 
 #ifndef STDIN_FILENO
diff -ruN gettext-0.14.5/gettext-tools/lib/pipe.c gettext-0.14.5-patched/gettext-tools/lib/pipe.c
--- gettext-0.14.5/gettext-tools/lib/pipe.c	2005-05-20 13:25:23.000000000 -0700
+++ gettext-0.14.5-patched/gettext-tools/lib/pipe.c	2006-08-14 05:22:02.000000000 -0700
@@ -61,7 +61,12 @@
 #endif
 
 #ifndef HAVE_ENVIRON_DECL
-extern char **environ;
+# ifdef __APPLE__
+#  include <crt_externs.h>
+#  define environ (*_NSGetEnviron())
+# else
+   extern char **environ;
+# endif
 #endif
 
 #ifndef STDIN_FILENO
diff -ruN dpkg-1.10.21/include/parsedump.h dpkg-1.10.21-patched/include/parsedump.h
--- dpkg-1.10.21/include/parsedump.h	2002-05-06 12:18:16.000000000 -0400
+++ dpkg-1.10.21-patched/include/parsedump.h	2005-06-09 20:47:46.000000000 -0400
@@ -30,7 +30,6 @@
   const char *canon;
 };
 
-extern const struct fieldinfo fieldinfos[];
 extern const struct nickname nicknames[];
 extern const int nfields; /* = elements in fieldinfos, including the sentinels */
 
@@ -68,6 +67,8 @@
   unsigned int integer;
 };
 
+extern const struct fieldinfo fieldinfos[];
+
 void parseerr(FILE *file, const char *filename, int lno, FILE *warnto, int *warncount,
               const struct pkginfo *pigp, int warnonly,
               const char *fmt, ...) PRINTFFORMAT(8,9);

diff -urN dpkg-1.10.21.orig/Makefile.conf.in dpkg-1.10.21/Makefile.conf.in
--- dpkg-1.10.21.orig/Makefile.conf.in	2003-09-14 08:43:49.000000000 +0900
+++ dpkg-1.10.21/Makefile.conf.in	2005-03-18 22:13:37.000000000 +0900
@@ -60,13 +60,13 @@
 
 CPPFLAGS		= @CPPFLAGS@
 LD			= @LD@
-LDFLAGS			= @LDFLAGS@ -L../lib -L../optlib
+LDFLAGS			= @LDFLAGS@ -L../lib -L../optlib -framework CoreFoundation
 LIBS			= @LIBS@ -ldpkg -lopt $(ZLIB_LIBS)
 
 RANLIB			= @RANLIB@
 
 DEFS			= @DEFS@ -D_GNU_SOURCE
-INCLUDE_CFLAGS		= -I$(top_srcdir)/include -I$(top_srcdir) -I$(srcdir) -I../include -I.. -I. -I$(top_srcdir)/optlib
+INCLUDE_CFLAGS		= -I$(top_srcdir)/include -I$(top_srcdir) -I$(srcdir) -I../include -I.. -I. -I$(top_srcdir)/optlib -F/System/Library/Frameworks/CoreFoundation.framework
 
 NLS_CFLAGS		= -DLOCALEDIR=\"$(localedir)\" -I$(top_srcdir)/intl -I../intl
 NLS_LIBS		= @INTLLIBS@ 
diff -urN dpkg-1.10.21.orig/dpkg-deb/Makefile.in dpkg-1.10.21/dpkg-deb/Makefile.in
--- dpkg-1.10.21.orig/dpkg-deb/Makefile.in	2002-05-20 13:40:29.000000000 +0900
+++ dpkg-1.10.21/dpkg-deb/Makefile.in	2005-03-18 22:13:37.000000000 +0900
@@ -51,5 +51,5 @@
 dpkg-deb-static: LDFLAGS += -static
 dpkg-deb-static: ZLIB_LIBS = $(ZLIB_LIBS_ALSO_STATIC)
 dpkg-deb dpkg-deb-static: $(OBJECTS) ../lib/libdpkg.a
-	$(CC) $(LDFLAGS) -o $@ $(OBJECTS) $(LIBS) $(NLS_LIBS)
+	$(CC) $(LDFLAGS) $(EXEFLAGS) -o $@ $(OBJECTS) $(LIBS) $(NLS_LIBS)
 
diff -urN dpkg-1.10.21.orig/dpkg-deb/build.c dpkg-1.10.21/dpkg-deb/build.c
--- dpkg-1.10.21.orig/dpkg-deb/build.c	2003-10-26 05:03:21.000000000 +0900
+++ dpkg-1.10.21/dpkg-deb/build.c	2005-03-18 22:13:37.000000000 +0900
@@ -275,9 +275,11 @@
       warns++;
     }
     for (field= checkedinfo->available.arbs; field; field= field->next) {
+	  if (strncmp("BuildDependsOnly",field->name,16)) {
       fprintf(stderr, _("warning, `%s' contains user-defined field `%s'\n"),
               controlfile, field->name);
       warns++;
+	  }
     }
     checkversion(checkedinfo->available.version.version,"(upstream) version",&errs);
     checkversion(checkedinfo->available.version.revision,"Debian revision",&errs);
diff -urN dpkg-1.10.21.orig/dpkg-deb/dpkg-deb.1 dpkg-1.10.21/dpkg-deb/dpkg-deb.1
--- dpkg-1.10.21.orig/dpkg-deb/dpkg-deb.1	2001-08-02 09:59:31.000000000 +0900
+++ dpkg-1.10.21/dpkg-deb/dpkg-deb.1	2005-03-18 22:13:37.000000000 +0900
@@ -244,7 +244,8 @@
 Copyright (C)1995-1996
 by him and released under the GNU General Public Licence; there is NO
 WARRANTY.  See
-.B /usr/share/doc/dpkg/copyright
+.B @PREFIX@/share/doc/dpkg/copyright
 and
-.B /usr/share/common-licenses/GPL
+.B @PREFIX@/share/common-licenses/GPL
 for details.
+Paths modified by Carsten Klapp to reflect fink distribution, December 2002.
diff -urN dpkg-1.10.21.orig/dselect/Makefile.in dpkg-1.10.21/dselect/Makefile.in
--- dpkg-1.10.21.orig/dselect/Makefile.in	2003-09-15 07:28:18.000000000 +0900
+++ dpkg-1.10.21/dselect/Makefile.in	2005-03-18 22:13:37.000000000 +0900
@@ -47,7 +47,7 @@
 	done
 
 dselect: $(OBJECTS) ../lib/libdpkg.a
-	$(CXX) $(LDFLAGS) -o $@ $(OBJECTS) $(CURSES_LIBS) $(LIBS) $(NLS_LIBS)
+	$(CXX) $(LDFLAGS) $(EXEFLAGS) -o $@ $(OBJECTS) $(CURSES_LIBS) $(LIBS) $(NLS_LIBS)
 
 basecmds.o: helpmsgs.h
 curkeys.o: curkeys.h
diff -urN dpkg-1.10.21.orig/dselect/dselect.8 dpkg-1.10.21/dselect/dselect.8
--- dpkg-1.10.21.orig/dselect/dselect.8	2003-09-14 10:49:08.000000000 +0900
+++ dpkg-1.10.21/dselect/dselect.8	2005-03-18 22:13:37.000000000 +0900
@@ -34,7 +34,7 @@
 of \fBdselect\fP or show additional information about the program.
 .SH OPTIONS 
 All options can be specified both on the commandline and in the \fBdselect\fP 
-configuration file \fI/etc/dpkg/dselect.cfg\fP. Each line in the 
+configuration file \fI@PREFIX@/etc/dpkg/dselect.cfg\fP. Each line in the 
 configuration file is either an option (exactly the same as the
 commandline option but without leading dashes) or a comment (if it starts
 with a \fB#\fR).
@@ -42,7 +42,7 @@
 .TP
 .B --admindir <directory>
 Changes the directory where the dpkg `status', `available' and similar
-files are located. This defaults to \fI/var/lib/dpkg\fP
+files are located. This defaults to \fI@PREFIX@/var/lib/dpkg\fP
 and normally there shouldn't be any need to change it.
 .TP
 .B --debug <file> | -D<file>
@@ -437,4 +437,5 @@
 .br
 This manual page was written by Juho Vuori <javuori@cc.helsinki.fi>,
 Josip Rodin and Joost kooij.
-
+.br
+Paths modified by Carsten Klapp to reflect fink distribution, December 2002.
diff -urN dpkg-1.10.21.orig/dselect/main.cc dpkg-1.10.21/dselect/main.cc
--- dpkg-1.10.21.orig/dselect/main.cc	2003-10-26 05:03:21.000000000 +0900
+++ dpkg-1.10.21/dselect/main.cc	2005-03-18 22:17:07.000000000 +0900
@@ -43,6 +43,11 @@
 #include <dpkg-db.h>
 #include <version.h>
 #include <myopt.h>
+/* FINK LOCAL begin */
+#include <sys/utsname.h>
+#include <CoreFoundation/CoreFoundation.h>
+static void finkinit();
+/* FINK LOCAL end */
 }
 #include "dselect.h"
 #include "bindings.h"
@@ -466,6 +471,155 @@
   return urqr_quitmenu;
   /* fixme: check packages OK */
 }
+/* FINK LOCAL begin */
+extern "C" {
+struct FinkVirtualPkgs {
+  struct FinkVirtualPkgs *next;
+  char *pkgname;
+  struct versionrevision version;
+};
+
+struct FinkVirtualPkgs *fink_virt_pkg = NULL;
+}
+static void finkinit()
+{
+	FILE *virt_pkg_stream = NULL;
+	struct stat sb;
+	struct FinkVirtualPkgs *pkg;
+	char name[256];
+	char version[256];
+	char revision[256];
+	unsigned long  epoch;
+    Boolean status;
+    SInt32 errorCode;
+    CFURLRef fileURL = NULL;
+    CFDataRef resourceData = NULL;
+    CFPropertyListRef propertyList = NULL;
+    CFStringRef string;
+    static char buffer[256];	// This is static, to ensure the buffer stays around
+
+    static struct utsname ver;	// This is static, to ensure the buffer stays around
+	if (0 == stat("@PREFIX@/bin/fink-virtual-pkgs", &sb))
+	{
+	  virt_pkg_stream =popen("@PREFIX@/bin/fink-virtual-pkgs --dpkg","r");
+  	  if (virt_pkg_stream)
+	  {
+	    while (fscanf(virt_pkg_stream,"%s\t%u\t%s\t%s\n",name,&epoch,version, revision) == 4)
+	    {
+	      pkg = (struct FinkVirtualPkgs *)malloc(sizeof(struct FinkVirtualPkgs));
+	      if (pkg)
+	      {
+			  pkg->next = fink_virt_pkg;
+			  pkg->pkgname = strdup(name);
+			  pkg->version.epoch = epoch;
+			  pkg->version.version = strdup(version);
+			  pkg->version.revision = strdup(revision);
+			  /* Quick and simple sanity check */
+			  if ((NULL != pkg->pkgname) && (0 != strlen(pkg->pkgname)) &&
+			      (NULL != pkg->version.version) && (0 != strlen(pkg->version.version)) &&
+			      (NULL != pkg->version.revision) && (0 != strlen(pkg->version.revision)))
+			  {
+			  	/* We are leaking here if something fails the sanity check above */
+			  	fink_virt_pkg = pkg;
+			  }
+	      }
+	    }
+	    if (pclose(virt_pkg_stream))
+	    {
+	    	/* The fink-virtual-pkgs script returned a non zero exit status *
+	    	 * clean up and try the old way.                                */
+	    	while(NULL != fink_virt_pkg)
+	    	{
+	    		pkg = fink_virt_pkg;
+	    		if (NULL != pkg->pkgname) free(pkg->pkgname);
+	    		if (NULL != pkg->version.version) free((void*)pkg->version.version);
+	    		if (NULL != pkg->version.revision) free((void*)pkg->version.revision);
+	    		fink_virt_pkg = pkg->next;
+	    		free(pkg);
+	    	}
+	    }
+	  }
+	} 
+	if (NULL == fink_virt_pkg)
+	{
+	  /* Determine system version */
+	  /* TODO - should maybe check if this is really Darwin? */
+	  if (!uname(&ver)) {
+	      pkg = (struct FinkVirtualPkgs *)malloc(sizeof(struct FinkVirtualPkgs));
+	      if (pkg) {
+			  pkg->next = fink_virt_pkg;
+			  pkg->pkgname = strdup("darwin");
+			  pkg->version.epoch = 0;
+			  pkg->version.version = ver.release;
+			  pkg->version.revision = NULL;
+			  fink_virt_pkg = pkg;
+	      }  
+	  }
+	
+	  /* Check whether this is Mac OS X, and which version of it */
+
+	  fileURL = CFURLCreateWithFileSystemPath( NULL, 	
+			CFSTR("/System/Library/CoreServices/SystemVersion.plist"),
+			kCFURLPOSIXPathStyle,				
+			false );
+	  if (!fileURL)
+		goto BAIL;
+	  
+	  /* Read the XML */
+	  status = CFURLCreateDataAndPropertiesFromResource(
+			NULL,
+			fileURL,
+			&resourceData,
+			NULL,		
+			NULL,
+			&errorCode);
+	  if (!status || errorCode != 0)
+		goto BAIL;
+	  
+	  /* Reconstitute the dictionary using the XML data. */
+	  propertyList = CFPropertyListCreateFromXMLData( NULL,
+			resourceData,
+			kCFPropertyListImmutable,
+			&string);
+	  if (!propertyList)
+		goto BAIL;
+	  
+	  /* Try to read the system version from it. */
+	  status = CFDictionaryGetValueIfPresent( 
+			(CFDictionaryRef)propertyList,
+			(const void*)CFSTR("ProductVersion"),
+			(const void**)&string);
+	  if (!status)
+		goto BAIL;
+	  
+	  /* Convert into a C string */
+	  status = CFStringGetCString( string,
+			buffer,
+			sizeof(buffer),
+			kCFStringEncodingISOLatin1);
+	  if (!status)
+		goto BAIL;
+	  pkg = (struct FinkVirtualPkgs *)malloc(sizeof(struct FinkVirtualPkgs));
+	  if (pkg)
+	  {
+		  pkg->next = fink_virt_pkg;
+		  pkg->pkgname = strdup("macosx");
+		  pkg->version.epoch = 0;
+		  pkg->version.version = buffer;
+		  pkg->version.revision = NULL;
+		  fink_virt_pkg = pkg;
+	  }
+	BAIL:
+	  // Release all of the CF objects we're responsible for.
+	  if (fileURL)
+		CFRelease(fileURL);
+	  if (resourceData)
+		CFRelease(resourceData);
+	  if (propertyList)
+		CFRelease(propertyList);
+	}
+}
+/* FINK LOCAL end */
 
 int main(int, const char *const *argv) {
   jmp_buf ejbuf;
@@ -473,7 +627,9 @@
   setlocale(LC_ALL, "");
   bindtextdomain(PACKAGE, LOCALEDIR);
   textdomain(PACKAGE);
-
+  /* FINK LOCAL begin */
+  finkinit();
+  /* FINK LOCAL end */
   if (setjmp(ejbuf)) { /* expect warning about possible clobbering of argv */
     cursesoff();
     error_unwind(ehflag_bombout); exit(2);
diff -urN dpkg-1.10.21.orig/dselect/pkgdepcon.cc dpkg-1.10.21/dselect/pkgdepcon.cc
--- dpkg-1.10.21.orig/dselect/pkgdepcon.cc	2003-10-26 23:02:05.000000000 +0900
+++ dpkg-1.10.21/dselect/pkgdepcon.cc	2005-03-18 22:13:37.000000000 +0900
@@ -198,12 +198,20 @@
 
   return 2;
 }
-
+/* FINK LOCAL begin */
+extern "C" {
+struct FinkVirtualPkgs {
+  struct FinkVirtualPkgs *next;
+  char *pkgname;
+  struct versionrevision version;
+};
+extern struct FinkVirtualPkgs *fink_virt_pkg;
+}
+/* FINK LOCAL end */
 int packagelist::resolvedepcon(dependency *depends) {
   perpackagestate *best, *fixbyupgrade;
   deppossi *possi, *provider;
   int r, foundany;
-
   if (depdebug && debug) {
     fprintf(debug,"packagelist[%p]::resolvedepcon([%p] %s --%s-->",
           this,depends,depends->up->name,gettext(relatestrings[depends->type]));
@@ -214,7 +222,7 @@
             ? gettext(wantstrings[depends->up->clientdata->suggested])
             : _("(no clientdata)"));
   }
-  
+
   if (!depends->up->clientdata) return 0;
 
   switch (depends->type) {
@@ -354,7 +362,28 @@
 int packagelist::deppossatisfied(deppossi *possi, perpackagestate **fixbyupgrade) {
   int would;
   pkginfo::pkgwant want= pkginfo::want_purge;
-  
+/* FINK LOCAL begin */
+  {
+      int interestingwarnings;
+      struct varbuf oemsgs;
+      struct FinkVirtualPkgs *virt_pkg = NULL; 
+      varbufinit(&oemsgs);
+      interestingwarnings= 0;
+      virt_pkg = fink_virt_pkg;
+      while (virt_pkg)
+      {
+            if (0==strcmp(possi->ed->name,virt_pkg->pkgname)) {
+            if (depdebug && debug)
+                fprintf(debug,"Found package : %s from VirtPackages.pm, depended by %s\n",virt_pkg->pkgname, possi->up->up->name);
+            if (versionsatisfied3(&virt_pkg->version,&possi->version,possi->verrel))
+            {
+                return 1;
+            }
+            }
+        virt_pkg = virt_pkg->next;
+      }
+  }    
+// FINK_LOCAL_END      
   if (possi->ed->clientdata) {
     want= possi->ed->clientdata->selected;
     would= would_like_to_install(want,possi->ed);
@@ -413,5 +442,6 @@
         *fixbyupgrade= provider->up->up->clientdata;
     }
   }
+
   return 0;
 }
diff -urN dpkg-1.10.21.orig/include/dpkg.h.in dpkg-1.10.21/include/dpkg.h.in
--- dpkg-1.10.21.orig/include/dpkg.h.in	2004-04-25 06:14:21.000000000 +0900
+++ dpkg-1.10.21/include/dpkg.h.in	2005-03-18 22:13:37.000000000 +0900
@@ -96,7 +96,7 @@
 #define SHELLENV            "SHELL"
 #define DEFAULTSHELL        "sh"
 #define PAGERENV            "PAGER"
-#define DEFAULTPAGER        "pager"
+#define DEFAULTPAGER        "less"
 
 #define IMETHODMAXLEN        50
 #define IOPTIONMAXLEN        IMETHODMAXLEN
diff -urN dpkg-1.10.21.orig/lib/nfmalloc.c dpkg-1.10.21/lib/nfmalloc.c
--- dpkg-1.10.21.orig/lib/nfmalloc.c	2003-10-26 05:03:21.000000000 +0900
+++ dpkg-1.10.21/lib/nfmalloc.c	2005-03-18 22:13:37.000000000 +0900
@@ -26,7 +26,7 @@
 #include <dpkg.h>
 #include <dpkg-db.h>
 
-#include <obstack.h>
+#include "obstack.h"
 
 #define obstack_chunk_alloc m_malloc
 #define obstack_chunk_free free
diff -urN dpkg-1.10.21.orig/lib/tarfn.c dpkg-1.10.21/lib/tarfn.c
--- dpkg-1.10.21.orig/lib/tarfn.c	2004-03-09 02:31:16.000000000 +0900
+++ dpkg-1.10.21/lib/tarfn.c	2005-03-18 22:13:37.000000000 +0900
@@ -57,8 +57,12 @@
 {
 	int	len;
 	char *	str;
-
-	len = strnlen(s, size);
+	char * cpystr;
+	cpystr = malloc(size +1);
+	memcpy(cpystr, s, size);
+	cpystr[size] = 0;
+	len = strlen(cpystr);
+	free(cpystr);
 	str = malloc(len + 1);
 	memcpy(str, s, len);
 	str[len] = 0;
diff -urN dpkg-1.10.21.orig/main/Makefile.in dpkg-1.10.21/main/Makefile.in
--- dpkg-1.10.21.orig/main/Makefile.in	2002-08-25 04:54:19.000000000 +0900
+++ dpkg-1.10.21/main/Makefile.in	2005-03-18 22:13:37.000000000 +0900
@@ -63,10 +63,10 @@
 dpkg-static: LDFLAGS += -static
 dpkg-static: ZLIB_LIBS = $(ZLIBS_LIBS_ALSO_STATIC)
 dpkg dpkg-static: $(OBJECTS) ../lib/libdpkg.a
-	$(CC) $(LDFLAGS) -o $@ $(OBJECTS) $(LIBS) $(NLS_LIBS)
+	$(CC) $(LDFLAGS) $(EXEFLAGS) -o $@ $(OBJECTS) $(LIBS) $(NLS_LIBS)
 
 dpkg-query: $(QUERY_OBJECTS) ../lib/libdpkg.a
-	$(CC) $(LDFLAGS) -o $@ $(QUERY_OBJECTS) $(LIBS) $(NLS_LIBS)
+	$(CC) $(LDFLAGS) $(EXEFLAGS) -o $@ $(QUERY_OBJECTS) $(LIBS) $(NLS_LIBS)
 
 enquiry.o: archtable.h
 
diff -urN dpkg-1.10.21.orig/main/archives.c dpkg-1.10.21/main/archives.c
--- dpkg-1.10.21.orig/main/archives.c	2004-04-25 19:41:54.000000000 +0900
+++ dpkg-1.10.21/main/archives.c	2005-03-18 22:13:37.000000000 +0900
@@ -553,12 +553,10 @@
     debug(dbg_eachfiledetail,"tarobject SymbolicLink creating");
 #ifdef HAVE_LCHOWN
     if (lchown(fnamenewvb.buf,
-#else
-    if (chown(fnamenewvb.buf,
-#endif
 	    nifd->namenode->statoverride ? nifd->namenode->statoverride->uid : ti->UserID,
 	    nifd->namenode->statoverride ? nifd->namenode->statoverride->gid : ti->GroupID))
       ohshite(_("error setting ownership of symlink `%.255s'"),ti->Name);
+#endif
     break;
   case Directory:
     /* We've already checked for an existing directory. */
@@ -614,10 +612,8 @@
         ohshite(_("unable to make backup symlink for `%.255s'"),ti->Name);
 #ifdef HAVE_LCHOWN
       if (lchown(fnametmpvb.buf,stab.st_uid,stab.st_gid))
-#else
-      if (chown(fnametmpvb.buf,stab.st_uid,stab.st_gid))
-#endif
         ohshite(_("unable to chown backup symlink for `%.255s'"),ti->Name);
+#endif
     } else {
       debug(dbg_eachfiledetail,"tarobject nondirectory, `link' backup");
       if (link(fnamevb.buf,fnametmpvb.buf))
diff -urN dpkg-1.10.21.orig/main/configure.c dpkg-1.10.21/main/configure.c
--- dpkg-1.10.21.orig/main/configure.c	2003-10-26 05:03:21.000000000 +0900
+++ dpkg-1.10.21/main/configure.c	2005-03-18 22:13:37.000000000 +0900
@@ -476,9 +476,10 @@
 static void suspend(void) {
 	const char*	s;
 	int		pid;
-
+#ifndef __APPLE__
 	s= getenv(NOJOBCTRLSTOPENV);
 	if (s && *s) {
+#endif
 		/* Do not job control to suspend but fork and start a new shell
 		 * instead.
 		 */
@@ -506,11 +507,13 @@
 			onerr_abort++;
 			ohshite(_("wait for shell failed"));
 		}
+#ifndef __APPLE__
 	} else {
 		fputs(_("Don't forget to foreground (`fg') this "
 					"process when you're done !\n"), stderr);
 		kill(-getpgid(0),SIGTSTP);
 	}
+#endif
 }
 
 
diff -urN dpkg-1.10.21.orig/main/dpkg-query.8 dpkg-1.10.21/main/dpkg-query.8
--- dpkg-1.10.21.orig/main/dpkg-query.8	2003-09-14 10:49:08.000000000 +0900
+++ dpkg-1.10.21/main/dpkg-query.8	2005-03-18 22:13:37.000000000 +0900
@@ -14,7 +14,7 @@
 .TP
 \fB-l\fP | \fB--list\fP \fIpackage-name-pattern\fP ...
 List packages matching given pattern. If no \fIpackage-name-pattern\fP
-is given, list all packages in \fI/var/lib/dpkg/available\fP.  Normal
+is given, list all packages in \fI@PREFIX@/var/lib/dpkg/available\fP.  Normal
 shell wildchars are allowed in \fIpackage-name-pattern\fP. Please note
 you will probably have to quote \fIpackage-name-pattern\fP to prevent
 the shell from performing filename expansion. For example this will
@@ -47,7 +47,7 @@
 .TP
 \fB-p\fP |\fB--print-avail\fP package
 Display details about \fIpackage\fP, as found in
-\fI/var/lib/dpkg/available\fP.
+\fI@PREFIX@/var/lib/dpkg/available\fP.
 .TP
 \fB--licence\fP | \fB--license\fP
 Display licence and copyright information.
@@ -59,7 +59,7 @@
 .TP
 \fB--admindir=\fIdir\fP
 Change the location of the \fBdpkg\fR database. The default location is
-\fI/var/lib/dpkg\fP.
+\fI@PREFIX@/var/lib/dpkg\fP.
 .TP
 \fB--showformat=\fP\fIformat\fR
 This option is used to specify the format of the output \fB--show\fP
@@ -81,6 +81,7 @@
 .UR mailto:wakkerma@debian.org
 <wakkerma@debian.org>
 .UE
+Paths modified by Carsten Klapp to reflect fink distribution, December 2002.
 .sp
 This is free software; see the GNU General Public Licence version 2 or
 later for copying conditions.  There is NO warranty.
diff -urN dpkg-1.10.21.orig/main/dpkg.8 dpkg-1.10.21/main/dpkg.8
--- dpkg-1.10.21.orig/main/dpkg.8	2003-09-21 10:43:40.000000000 +0900
+++ dpkg-1.10.21/main/dpkg.8	2005-03-18 22:13:37.000000000 +0900
@@ -154,7 +154,7 @@
 file).  \fB-P\fP or \fB--purge\fP removes everything, including configuration
 files.  If \fB-a\fP or \fB--pending\fP is given instead of a package
 name, then all packages unpacked, but marked to be removed or purged
-in file \fI/var/lib/dpkg/status\fP, are removed or purged,
+in file \fI@PREFIX@/var/lib/dpkg/status\fP, are removed or purged,
 respectively.
 
 Removing of a package consists of the following steps:
@@ -176,7 +176,7 @@
 \fB--update-avail\fP, old information is replaced with the information
 in the \fIPackages-file\fP.  The \fIPackages-file\fP distributed with
 Debian is simply named \fIPackages\fP.  \fBdpkg\fP keeps its
-record of available packages in \fI/var/lib/dpkg/available\fP.
+record of available packages in \fI@PREFIX@/var/lib/dpkg/available\fP.
 .TP
 \fBdpkg -A\fP | \fB--record-avail\fP \fIpackage_file\fP ...
 Update \fBdpkg\fP and \fBdselect\fP's idea of which packages are
@@ -286,14 +286,14 @@
 \fBdpkg -S\fP | \fB--search\fP \fIfilename-search-pattern\fP ...
     Search for a filename from installed packages.
 \fBdpkg -p\fP | \fB--print-avail\fP \fIpackage\fP
-    Display details about \fIpackage\fP, as found in \fI/var/lib/dpkg/available\fP.
+    Display details about \fIpackage\fP, as found in \fI@PREFIX@/var/lib/dpkg/available\fP.
 .fi
 
 
 
 .SH OPTIONS
 All options can be specified both on the commandline and in the \fBdpkg\fP
-configuration file \fI/etc/dpkg/dpkg.cfg\fP. Each line in the configuration
+configuration file \fI@PREFIX@/etc/dpkg/dpkg.cfg\fP. Each line in the configuration
 file is either an option (exactly the same as the commandline option but
 without leading dashes) or a comment (if it starts with a \fB#\fR).
 .br
@@ -453,14 +453,14 @@
 .TP
 \fB--root=\fP\fIdir\fP | \fB--admindir=\fP\fIdir\fP | \fB--instdir=\fP\fIdir\fP
 Change default directories.  \fBadmindir\fP defaults to
-\fI/var/lib/dpkg\fP and contains many files that give information
+\fI@PREFIX@/var/lib/dpkg\fP and contains many files that give information
 about status of installed or uninstalled packages, etc.  \fBinstdir\fP
 defaults to \fI/\fP and refers to the directory where packages are to
 be installed.  \fBinstdir\fP is also the directory passed to
 \fBchroot\fP(2) before running \fIpackage\fP's installation scripts, which
 means that the scripts see \fBinstdir\fP as a root directory.
 Changing \fBroot\fP changes \fBinstdir\fP to \fIdir\fP and
-\fBadmindir\fP to \fIdir\fP\fB/var/lib/dpkg\fP.
+\fBadmindir\fP to \fIdir\fP\fB@PREFIX@/var/lib/dpkg\fP.
 .TP
 \fB-O\fP | \fB--selected-only\fP
 Only process the packages that are selected for installation. The
@@ -477,16 +477,16 @@
 multiple times.  Status updates are of the form `status: <pkg>: <pkg qstate>'.
 .SH FILES
 .TP
-.I /etc/dpkg/dpkg.cfg
+.I @PREFIX@/etc/dpkg/dpkg.cfg
 Configuration file with default options.
 .P
 The other files listed below are in their default directories, see option
 \fB--admindir\fP to see how to change locations of these files.
 .TP
-.I /var/lib/dpkg/available
+.I @PREFIX@/var/lib/dpkg/available
 List of available packages.
 .TP
-.I /var/lib/dpkg/status
+.I @PREFIX@/var/lib/dpkg/status
 Statuses of available packages. This file contains information about
 whether a package is marked for removing or not, whether it is
 installed or not, etc. See section \fBINFORMATION ABOUT PACKAGES\fP
@@ -536,14 +536,14 @@
 \fB     dpkg -l '*vi*'\fP
 .br
 
-To see the entries in \fI/var/lib/dpkg/available\fP on two packages:
+To see the entries in \fI@PREFIX@/var/lib/dpkg/available\fP on two packages:
 .br
 \fB     dpkg --print-avail elvis vim | less\fP
 .br
 
 To search the listing of packages yourself:
 .br
-\fB     less /var/lib/dpkg/available\fP
+\fB     less @PREFIX@/var/lib/dpkg/available\fP
 .br
 
 To remove an installed elvis package:
@@ -590,6 +590,6 @@
 
 .SH AUTHORS
 .nf
-See \fB/usr/share/doc/dpkg/THANKS.gz\fP for the list of people who have
+See \fB@PREFIX@/share/doc/dpkg/THANKS.gz\fP for the list of people who have
 contributed to \fBdpkg\fP .
 .fi
diff -urN dpkg-1.10.21.orig/main/help.c dpkg-1.10.21/main/help.c
--- dpkg-1.10.21.orig/main/help.c	2003-10-26 05:03:21.000000000 +0900
+++ dpkg-1.10.21/main/help.c	2005-03-18 22:13:37.000000000 +0900
@@ -69,11 +69,18 @@
 
 void checkpath(void) {
 /* Verify that some programs can be found in the PATH. */
-  static const char *const checklist[]= { "ldconfig", 
+  static const char *const checklist[]= { 
+#ifndef __APPLE__
+    "ldconfig", 
+#endif
 #ifdef USE_START_STOP_DAEMON
     "start-stop-daemon",
 #endif    
-    "install-info", "update-rc.d", 0
+    "install-info",
+#ifndef __APPLE__
+   "update-rc.d",
+#endif
+    0
   };
 
   struct stat stab;
diff -urN dpkg-1.10.21.orig/main/main.c dpkg-1.10.21/main/main.c
--- dpkg-1.10.21.orig/main/main.c	2003-10-26 05:03:21.000000000 +0900
+++ dpkg-1.10.21/main/main.c	2005-03-18 22:13:37.000000000 +0900
@@ -38,6 +38,12 @@
 #include <version.h>
 #include <myopt.h>
 
+/* FINK LOCAL begin */
+#include <sys/utsname.h>
+#include <CoreFoundation/CoreFoundation.h>
+static void finkinit();
+/* FINK LOCAL end */
+
 #include "main.h"
 
 static void printversion(void) {
@@ -546,6 +552,153 @@
   }
 }
 
+/* FINK LOCAL begin */
+struct FinkVirtualPkgs {
+  struct FinkVirtualPkgs *next;
+  char *pkgname;
+  struct versionrevision version;
+};
+
+struct FinkVirtualPkgs *fink_virt_pkg = NULL;
+static void finkinit()
+{
+	FILE *virt_pkg_stream = NULL;
+	struct stat sb;
+	struct FinkVirtualPkgs *pkg;
+	char name[256];
+	char version[256];
+	char revision[256];
+	unsigned long  epoch;
+    Boolean status;
+    SInt32 errorCode;
+    CFURLRef fileURL = NULL;
+    CFDataRef resourceData = NULL;
+    CFPropertyListRef propertyList = NULL;
+    CFStringRef string;
+    static char buffer[256];	// This is static, to ensure the buffer stays around
+
+    static struct utsname ver;	// This is static, to ensure the buffer stays around
+	if (0 == stat("@PREFIX@/bin/fink-virtual-pkgs", &sb))
+	{
+	  virt_pkg_stream =popen("@PREFIX@/bin/fink-virtual-pkgs --dpkg","r");
+  	  if (virt_pkg_stream)
+	  {
+	    while (fscanf(virt_pkg_stream,"%s\t%u\t%s\t%s\n",name,&epoch,version, revision) == 4)
+	    {
+	      pkg = (struct FinkVirtualPkgs *)malloc(sizeof(struct FinkVirtualPkgs));
+	      if (pkg)
+	      {
+			  pkg->next = fink_virt_pkg;
+			  pkg->pkgname = strdup(name);
+			  pkg->version.epoch = epoch;
+			  pkg->version.version = strdup(version);
+			  pkg->version.revision = strdup(revision);
+			  /* Quick and simple sanity check */
+			  if ((NULL != pkg->pkgname) && (0 != strlen(pkg->pkgname)) &&
+			      (NULL != pkg->version.version) && (0 != strlen(pkg->version.version)) &&
+			      (NULL != pkg->version.revision) && (0 != strlen(pkg->version.revision)))
+			  {
+			  	/* We are leaking here if something fails the sanity check above */
+			  	fink_virt_pkg = pkg;
+			  }
+	      }
+	    }
+	    if (pclose(virt_pkg_stream))
+	    {
+	    	/* The fink-virtual-pkgs script returned a non zero exit status *
+	    	 * clean up and try the old way.                                */
+	    	while(NULL != fink_virt_pkg)
+	    	{
+	    		pkg = fink_virt_pkg;
+	    		if (NULL != pkg->pkgname) free(pkg->pkgname);
+	    		if (NULL != pkg->version.version) free(pkg->version.version);
+	    		if (NULL != pkg->version.revision) free(pkg->version.revision);
+	    		fink_virt_pkg = pkg->next;
+	    		free(pkg);
+	    	}
+                fink_virt_pkg = NULL;
+	    }
+	  }
+	} 
+	if (NULL == fink_virt_pkg)
+	{
+	  /* Determine system version */
+	  /* TODO - should maybe check if this is really Darwin? */
+	  if (!uname(&ver)) {
+	      pkg = (struct FinkVirtualPkgs *)malloc(sizeof(struct FinkVirtualPkgs));
+	      if (pkg) {
+			  pkg->next = fink_virt_pkg;
+			  pkg->pkgname = strdup("darwin");
+			  pkg->version.epoch = 0;
+			  pkg->version.version = ver.release;
+			  pkg->version.revision = NULL;
+			  fink_virt_pkg = pkg;
+	      }  
+	  }
+	
+	  /* Check whether this is Mac OS X, and which version of it */
+
+	  fileURL = CFURLCreateWithFileSystemPath( NULL, 	
+			CFSTR("/System/Library/CoreServices/SystemVersion.plist"),
+			kCFURLPOSIXPathStyle,				
+			false );
+	  if (!fileURL)
+		goto BAIL;
+	  
+	  /* Read the XML */
+	  status = CFURLCreateDataAndPropertiesFromResource(
+			NULL,
+			fileURL,
+			&resourceData,
+			NULL,		
+			NULL,
+			&errorCode);
+	  if (!status || errorCode != 0)
+		goto BAIL;
+	  
+	  /* Reconstitute the dictionary using the XML data. */
+	  propertyList = CFPropertyListCreateFromXMLData( NULL,
+			resourceData,
+			kCFPropertyListImmutable,
+			&string);
+	  if (!propertyList)
+		goto BAIL;
+	  
+	  /* Try to read the system version from it. */
+	  status = CFDictionaryGetValueIfPresent( propertyList,
+			CFSTR("ProductVersion"),
+			(void*)&string);
+	  if (!status)
+		goto BAIL;
+	  
+	  /* Convert into a C string */
+	  status = CFStringGetCString( string,
+			buffer,
+			sizeof(buffer),
+			kCFStringEncodingISOLatin1);
+	  if (!status)
+		goto BAIL;
+	  pkg = (struct FinkVirtualPkgs *)malloc(sizeof(struct FinkVirtualPkgs));
+	  if (pkg)
+	  {
+		  pkg->next = fink_virt_pkg;
+		  pkg->pkgname = strdup("macosx");
+		  pkg->version.epoch = 0;
+		  pkg->version.version = buffer;
+		  pkg->version.revision = NULL;
+		  fink_virt_pkg = pkg;
+	  }
+	BAIL:
+	  // Release all of the CF objects we're responsible for.
+	  if (fileURL)
+		CFRelease(fileURL);
+	  if (resourceData)
+		CFRelease(resourceData);
+	  if (propertyList)
+		CFRelease(propertyList);
+	}
+}
+/* FINK LOCAL end */
 
 int main(int argc, const char *const *argv) {
   jmp_buf ejbuf;
@@ -556,7 +709,9 @@
 
   setvbuf(stdout,0,_IONBF,0);
   filesdbinit();
-
+  /* FINK LOCAL begin */
+  finkinit();
+  /* FINK LOCAL end */
   actionfunction= (void (*)(const char* const*))cipaction->farg;
 
   actionfunction(argv);
diff -urN dpkg-1.10.21.orig/main/main.h dpkg-1.10.21/main/main.h
--- dpkg-1.10.21.orig/main/main.h	2002-05-20 14:56:02.000000000 +0900
+++ dpkg-1.10.21/main/main.h	2005-03-18 22:13:37.000000000 +0900
@@ -93,6 +93,11 @@
 extern const char *instdir;
 extern struct packageinlist *ignoredependss;
 extern const char architecture[];
+ 
+/* FINK LOCAL begin */
+extern struct versionrevision darwin_version;
+extern struct versionrevision macosx_version;
+/* FINK LOCAL end */
 
 /* from filesdb.c */
 
diff -urN dpkg-1.10.21.orig/main/packages.c dpkg-1.10.21/main/packages.c
--- dpkg-1.10.21.orig/main/packages.c	2003-10-26 05:03:21.000000000 +0900
+++ dpkg-1.10.21/main/packages.c	2005-03-18 22:13:37.000000000 +0900
@@ -331,6 +331,30 @@
     return thisf;
   }
 }
+ 
+/* FINK LOCAL begin */
+static int check_pseudo_package(const struct versionrevision *versrev, const struct deppossi *possi,
+                                int *interestingwarnings, struct varbuf *oemsgs) {
+
+  if (versionsatisfied3(versrev,&possi->version,possi->verrel)) {
+    return 3;
+  } else {
+    varbufaddstr(oemsgs, _("  Version of "));
+    varbufaddstr(oemsgs, possi->ed->name);
+    varbufaddstr(oemsgs, _(" on system is "));
+    varbufaddstr(oemsgs, versiondescribe(versrev, vdew_nonambig));
+    varbufaddstr(oemsgs, ".\n");
+    (*interestingwarnings)++;
+    return 0;
+  }
+}
+struct FinkVirtualPkgs {
+  struct FinkVirtualPkgs *next;
+  char *pkgname;
+  struct versionrevision version;
+};
+extern struct FinkVirtualPkgs *fink_virt_pkg;
+/* FINK LOCAL end */
 
 int dependencies_ok(struct pkginfo *pkg, struct pkginfo *removing,
                     struct varbuf *aemsgs) {
@@ -338,7 +362,7 @@
   struct varbuf oemsgs;
   struct dependency *dep;
   struct deppossi *possi, *provider;
-
+  struct FinkVirtualPkgs *virt_pkg = NULL; 
   varbufinit(&oemsgs);
   interestingwarnings= 0;
   ok= 2; /* 2=ok, 1=defer, 0=halt */
@@ -352,6 +376,29 @@
     found= 0; /* 0=none, 1=defer, 2=withwarning, 3=ok */
     for (possi= dep->list; found != 3 && possi; possi= possi->next) {
       debug(dbg_depcondetail,"    checking possibility  -> %s",possi->ed->name);
+      /* FINK LOCAL begin */
+      virt_pkg = fink_virt_pkg;
+      while (virt_pkg)
+      {
+        if (0==strcmp(possi->ed->name,virt_pkg->pkgname)) {
+          debug(dbg_depcondetail,"        pseudo package");
+          found= check_pseudo_package(&virt_pkg->version,possi,&interestingwarnings,&oemsgs);
+        }
+        virt_pkg = virt_pkg->next;
+      }
+/*      
+      if (0==strcmp(possi->ed->name,"darwin") && darwin_version.version) {
+        debug(dbg_depcondetail,"        pseudo package darwin");
+        found= check_pseudo_package(&darwin_version,possi,&interestingwarnings,&oemsgs);
+        break;
+      }
+      else if (0==strcmp(possi->ed->name,"macosx") && macosx_version.version) {
+        debug(dbg_depcondetail,"        pseudo package macosx");
+        found= check_pseudo_package(&macosx_version,possi,&interestingwarnings,&oemsgs);
+        break;
+      }
+*/      
+      /* FINK LOCAL end */
       if (possi->cyclebreak) {
         debug(dbg_depcondetail,"      break cycle so ok and found");
         found= 3; break;
diff -urN dpkg-1.10.21.orig/man/en/dpkg.cfg.5 dpkg-1.10.21/man/en/dpkg.cfg.5
--- dpkg-1.10.21.orig/man/en/dpkg.cfg.5	2002-02-10 09:37:01.000000000 +0900
+++ dpkg-1.10.21/man/en/dpkg.cfg.5	2005-03-18 22:13:37.000000000 +0900
@@ -8,10 +8,11 @@
 here. Comments are allowed by starting a line with a hash sign
 ("\fB#\fR").
 .SH FILES
-.I /etc/dpkg/dpkg.cfg
+.I @PREFIX@/etc/dpkg/dpkg.cfg
 ~/.dpkg.cfg
 .SH AUTHOR
-See \fB/usr/share/doc/dpkg/THANKS\fP for the list of people who have
+See \fB@PREFIX@/share/doc/dpkg/THANKS\fP for the list of people who have
 contributed to \fBdpkg\fP .
+Paths modified by Carsten Klapp to reflect fink distribution, December 2002.
 .SH SEE ALSO
 .BR dpkg (8)
diff -urN dpkg-1.10.21.orig/man/en/dselect.cfg.5 dpkg-1.10.21/man/en/dselect.cfg.5
--- dpkg-1.10.21.orig/man/en/dselect.cfg.5	2002-02-16 23:10:50.000000000 +0900
+++ dpkg-1.10.21/man/en/dselect.cfg.5	2005-03-18 22:13:37.000000000 +0900
@@ -8,10 +8,11 @@
 here. Comments are allowed by starting a line with a hash sign
 ("\fB#\fR").
 .SH FILES
-.I /etc/dpkg/dselect.cfg
+.I @PREFIX@/etc/dpkg/dselect.cfg
 ~/.dselect.cfg
 .SH AUTHOR
-See \fB/usr/share/doc/dpkg/THANKS\fP for the list of people who have
+See \fB@PREFIX@/share/doc/dpkg/THANKS\fP for the list of people who have
 contributed to \fBdselect\fP .
+Paths modified by Carsten Klapp to reflect fink distribution, December 2002.
 .SH SEE ALSO
 .BR dselect (8)
diff -urN dpkg-1.10.21.orig/man/fr/cleanup-info.8 dpkg-1.10.21/man/fr/cleanup-info.8
--- dpkg-1.10.21.orig/man/fr/cleanup-info.8	2002-02-03 00:57:09.000000000 +0900
+++ dpkg-1.10.21/man/fr/cleanup-info.8	2005-03-18 22:13:37.000000000 +0900
@@ -38,7 +38,7 @@
 Affiche la version et se termine normalement.
 .SH FICHIERS
 .TP
-.I "/usr/info/dir ou <nom-de-rep>/dir"
+.I "@PREFIX@/share/info/dir ou <nom-de-rep>/dir"
 Le fichier « dir » du répertoire « info ». Le fichier verrouillé porte le même
 nom suivi de « .lock ».
 .SH BOGUES
@@ -54,4 +54,6 @@
 .B pas
 de garantie.
 .SH TRADUCTION
-Philippe Batailler, Janvier 2001.
\ No newline at end of file
+Philippe Batailler, Janvier 2001.
+.PP
+Paths modified by Carsten Klapp to reflect fink distribution, December 2002.
diff -urN dpkg-1.10.21.orig/man/fr/dpkg-deb.1 dpkg-1.10.21/man/fr/dpkg-deb.1
--- dpkg-1.10.21.orig/man/fr/dpkg-deb.1	2002-02-03 00:57:09.000000000 +0900
+++ dpkg-1.10.21/man/fr/dpkg-deb.1	2005-03-18 22:13:37.000000000 +0900
@@ -245,9 +245,11 @@
 Le copyright (C) date de 1995-1996 et ils ont paru sous la licence
 « GNU General Public Licence » ; il n'y a PAS de garantie.
 Voyez
-.B /usr/share/doc/dpkg/copyright
+.B @PREFIX@/share/doc/dpkg/copyright
 et
-.B /usr/share/common-licenses/GPL
+.B @PREFIX@/share/common-licenses/GPL
 pour des précisions.
 .SH "TRADUCTION"
-Philippe Batailler, Dec 2000.
\ No newline at end of file
+Philippe Batailler, Dec 2000.
+.PP
+Paths modified by Carsten Klapp to reflect fink distribution, December 2002.
diff -urN dpkg-1.10.21.orig/man/fr/dpkg-divert.8 dpkg-1.10.21/man/fr/dpkg-divert.8
--- dpkg-1.10.21.orig/man/fr/dpkg-divert.8	2002-02-03 00:57:09.000000000 +0900
+++ dpkg-1.10.21/man/fr/dpkg-divert.8	2005-03-18 22:13:37.000000000 +0900
@@ -41,7 +41,7 @@
 .TP
 .I --admindir <répertoire>
 Définit le répertoire de données de Dpkg comme <répertoire> (par défaut c'est 
-/var/lib/dpkg).
+@PREFIX@/var/lib/dpkg).
 .TP
 .I --divert <dévier-dans>
 <dévier-dans> est le nom utilisé pour les autres versions des paquets.
@@ -76,7 +76,7 @@
 On ne peut pas dévier des répertoires avec dpkg-divert.
 .SH FICHIERS
 .TP
-.I /var/lib/dpkg/diversions
+.I @PREFIX@/var/lib/dpkg/diversions
 Ce fichier contient la liste actuelle des diversions en oeuvre sur le
 système. Il se trouve dans le répertoire d'administration de Dpkg, avec
 d'autres fichiers importants comme «\ status\ » ou «\ available\ ».
@@ -94,4 +94,6 @@
 C'est un logiciel libre ; voyez la « GNU General Public Licence »
 version 2 ou supérieure pour le copyright. Il n'y a PAS de garantie.
 .SH TRADUCTION
-Philippe Batailler, Jan 2001.
\ No newline at end of file
+Philippe Batailler, Jan 2001.
+.PP
+Paths modified by Carsten Klapp to reflect fink distribution, December 2002.
diff -urN dpkg-1.10.21.orig/man/fr/dpkg-query.8 dpkg-1.10.21/man/fr/dpkg-query.8
--- dpkg-1.10.21.orig/man/fr/dpkg-query.8	2004-03-11 09:03:19.000000000 +0900
+++ dpkg-1.10.21/man/fr/dpkg-query.8	2005-03-18 22:13:37.000000000 +0900
@@ -15,7 +15,7 @@
 \fB-l\fP | \fB--list\fP \fIpaquet-nom-motif\fP ...
 Liste les paquets correspondant au motif donné. Quand on ne donne aucun
 \fIpaquet-nom-motif\fP, tous les paquets listés dans 
-\fI/var/lib/dpkg/available\fP sont affichés. Les métacaractères ordinaires du
+\fI@PREFIX@/var/lib/dpkg/available\fP sont affichés. Les métacaractères ordinaires du
 shell sont autorisés dans \fIpaquet-nom-motif\fP. Il faudra sans doute mettre
 \fIpaquet-nom-motif\fP entre apostrophes pour éviter l'expansion des noms de
 fichier par le shell. Par exemple, tous les paquets dont le nom commence par
@@ -48,7 +48,7 @@
 .TP
 \fB-p\fP |\fB--print-avail\fP paquet
 Affiche des renseignements détaillés sur \fIpaquet\fP, tels qu'ils sont
-trouvés dans le fichier \fI/var/lib/dpkg/available\fP.
+trouvés dans le fichier \fI@PREFIX@/var/lib/dpkg/available\fP.
 .TP
 \fB--licence\fP | \fB--license\fP
 Affiche des renseignements sur la licence et le copyright.
@@ -60,7 +60,7 @@
 .TP
 \fB--admindir=\fIdir\fP
 Changer l'endroit où se trouve la base de données de \fBdpkg\fR. Par
-défaut, c'est \fI/var/lib/dpkg\fP.
+défaut, c'est \fI@PREFIX@/var/lib/dpkg\fP.
 .TP
 \fB--showformat=\fP\fIformat\fR
 On se sert de cette option pour préciser le format de la sortie que produit la
diff -urN dpkg-1.10.21.orig/man/fr/dpkg-scanpackages.8 dpkg-1.10.21/man/fr/dpkg-scanpackages.8
--- dpkg-1.10.21.orig/man/fr/dpkg-scanpackages.8	2004-03-11 09:03:19.000000000 +0900
+++ dpkg-1.10.21/man/fr/dpkg-scanpackages.8	2005-03-18 22:13:37.000000000 +0900
@@ -43,7 +43,7 @@
 .PP
 .I rep-de-binaires
 est le nom de l'arborescence binaire (par exemple
-.BR contrib/binary-i386)
+.BR main/binary-darwin-powerpc)
 que l'on veut traiter.
 Il vaut mieux qu'elle soit relative à la racine de l'archive Debian\ ;
 ainsi chaque champ «\ Filename\ » dans le nouveau fichier «\ Packages\ »
diff -urN dpkg-1.10.21.orig/man/fr/dpkg-source.1 dpkg-1.10.21/man/fr/dpkg-source.1
--- dpkg-1.10.21.orig/man/fr/dpkg-source.1	2004-03-11 09:03:19.000000000 +0900
+++ dpkg-1.10.21/man/fr/dpkg-source.1	2005-03-18 22:13:37.000000000 +0900
@@ -58,13 +58,13 @@
 lit les informations concernant les dépendances envers les bibliothèques 
 partagées dans les fichiers suivants :
 .BR debian/shlibs.local,
-.BR /etc/dpkg/shlibs.override,
+.BR @PREFIX@/etc/dpkg/shlibs.override,
 le fichier
 .B shlibs,
 (fichier du paquet contenant un fichier qui, selon
 .B objdump,
 satisfait au système de dépendance envers les bibliothèques) ou bien
-.BR /etc/dpkg/shlibs.default.
+.BR @PREFIX@/etc/dpkg/shlibs.default.
 Le premier trouvé est utilisé. Voyez le
 .I Debian packaging manual
 pour des détails sur le format des fichiers qui traitent des dépendances 
@@ -845,9 +845,7 @@
 version 2 ou supérieure pour le copyright. Il n'y a
 .B pas
 de garantie. Voyez
-.B /usr/share/doc/dpkg/copyright
-et
-.B /usr/share/common-licenses/GPL
+.B @PREFIX@/share/doc/dpkg/copyright
 pour des précisions.
 .SH TRADUCTION
 Philippe Batailler, Octobre 2003.
diff -urN dpkg-1.10.21.orig/man/fr/dpkg-split.8 dpkg-1.10.21/man/fr/dpkg-split.8
--- dpkg-1.10.21.orig/man/fr/dpkg-split.8	2002-02-03 00:57:09.000000000 +0900
+++ dpkg-1.10.21/man/fr/dpkg-split.8	2005-03-18 22:13:37.000000000 +0900
@@ -162,7 +162,7 @@
 .BI --depotdir " répertoire"
 Indique un répertoire différent pour la file comprenant les parties en attente
 d'une recomposition automatique. Par défaut, c'est le répertoire
-.BR /var/lib/dpkg .
+.BR @PREFIX@/var/lib/dpkg .
 .TP
 .BI --partsize\fR|\fB-S " kbytes"
 Indique (en kilooctets (1024 octets)) la taille maximum d'une partie lors 
@@ -233,7 +233,7 @@
 pas présente dans les fichiers produits.
 .SH FICHIERS
 .TP
-.B /var/lib/dpkg/parts
+.B @PREFIX@/var/lib/dpkg/parts
 Le répertoire par défaut de la file contenant les fichiers qui attendent une
 recomposition automatique.
 
@@ -254,7 +254,9 @@
 Ils ont été édités sous la « GNU General Public Licence » ; il n'y a
 PAS de GARANTIE.
 Voyez
-.B /usr/share/dpkg/copyright
+.B @PREFIX@/share/dpkg/copyright
 et
-.B /usr/share/common-licenses/GPL
+.B @PREFIX@/share/common-licenses/GPL
 pour des précisions.
+.PP
+Paths modified by Carsten Klapp to reflect fink distribution, December 2002.
diff -urN dpkg-1.10.21.orig/man/fr/dpkg-statoverride.8 dpkg-1.10.21/man/fr/dpkg-statoverride.8
--- dpkg-1.10.21.orig/man/fr/dpkg-statoverride.8	2002-02-03 00:57:09.000000000 +0900
+++ dpkg-1.10.21/man/fr/dpkg-statoverride.8	2005-03-18 22:13:37.000000000 +0900
@@ -55,10 +55,10 @@
 .TP
 .I --admindir
 Changer le répertoire de la base de données de dpkg, où se trouve aussi le
-fichier statoverride. par défaut, c'est /var/lib/dpkg.
+fichier statoverride. par défaut, c'est @PREFIX@/var/lib/dpkg.
 .SH FICHIERS
 .TP
-.I /var/lib/dpkg/statoverride
+.I @PREFIX@/var/lib/dpkg/statoverride
 Ce fichier contient la liste actuelle des annulations concernant le système.
 Il se trouve dans le répertoire d'administration de Dpkg, avec les autres 
 fichiers importants comme «\ status\ » ou «\ available\ ».
@@ -76,4 +76,6 @@
 C'est un logiciel libre ; voyez la licence publique générale du projet GNU
 version 2 ou supérieure pour les droits de copie. Il n'y a PAS de garantie.
 .SH TRADUCTEUR
-Philippe Batailler, Août 2001.
\ No newline at end of file
+Philippe Batailler, Août 2001.
+.PP
+Paths modified by Carsten Klapp to reflect fink distribution, December 2002.
diff -urN dpkg-1.10.21.orig/man/fr/dpkg.8 dpkg-1.10.21/man/fr/dpkg.8
--- dpkg-1.10.21.orig/man/fr/dpkg.8	2004-03-11 09:03:19.000000000 +0900
+++ dpkg-1.10.21/man/fr/dpkg.8	2005-03-18 22:13:37.000000000 +0900
@@ -165,7 +165,7 @@
 configuration. Si l'on donne l'option \fB-a\fP ou \fB--pending\fP à la 
 place d'un nom de paquet, tous les paquets non dépaquetés, mais qui sont
 marqués comme devant être supprimés ou purgés
-dans le file \fI/var/lib/dpkg/status\fP, sont respectivement
+dans le file \fI@PREFIX@/var/lib/dpkg/status\fP, sont respectivement
 supprimés et purgés.
 
 La suppression des paquets comporte les étapes suivantes : 
@@ -188,7 +188,7 @@
 proviennent de \fIfichier-paquet\fP. Le \fIfichier-paquet\fP
 distribué avec Debian est appelé simplement \fIpaquet\fP.
 \fBdpkg\fP garde son propre enregistrement des paquets disponibles dans
-\fI/var/lib/dpkg/available\fP.
+\fI@PREFIX@/var/lib/dpkg/available\fP.
 .TP
 \fBdpkg -A\fP | \fB--record-avail\fP \fIfichier-paquet\fP ...
 Met à jour les idées de \fBdpkg\fP et de \fBdselect\fP sur les paquets
@@ -306,7 +306,7 @@
 
 .SH OPTIONS
 On peut spécifier une option à la fois sur la ligne de commande et dans le
-fichier de configuration de dpkg, \fI/etc/dpkg/dpkg.cfg\fP. Chaque ligne de
+fichier de configuration de dpkg, \fI@PREFIX@/etc/dpkg/dpkg.cfg\fP. Chaque ligne de
 ce fichier est soit une option (identique à une option en ligne de commande
 mais sans tiret), soit un commentaire, commençant par \fB#\fR.
 .br
@@ -479,14 +479,14 @@
 .TP
 \fB--root=\fP\fIrep\fP | \fB--admindir=\fP\fIrep\fP | \fB--instdir=\fP\fIrep\fP
 Changer les répertoires par défaut. \fBadmindir\fP est par défaut 
-\fI/var/lib/dpkg\fP et contient beaucoup de fichiers qui donnent des
+\fI@PREFIX@/var/lib/dpkg\fP et contient beaucoup de fichiers qui donnent des
 informations sur l'état des paquets installés ou non installés, etc. 
 \fBinstdir\fP est par défaut \fI/\fP et se réfère au répertoire où les 
 paquets doivent être installés. \fBinstdir\fP est aussi le répertoire 
 donné à \fBchroot\fP(2) avant que ne soient lancées les scripts d'installation
 du \fIpaquet\fP, ce qui signifie que ces scripts voient \fBinstdir\fP 
 comme le répertoire de root. Changer \fBroot\fP change \fBinstdir\fP en
-\fIrep\fP et \fBadmindir\fP en \fIrep\fP\fB/var/lib/dpkg\fP.
+\fIrep\fP et \fBadmindir\fP en \fIrep\fP\fB@PREFIX@/var/lib/dpkg\fP.
 .TP
 \fB-O\fP | \fB--selected-only\fP
 Traiter seulement les paquets qui sont sélectionnés pour l'installation. 
@@ -505,16 +505,16 @@
 
 .SH FICHIERS
 .TP
-.I /etc/dpkg/dpkg.cfg
+.I @PREFIX@/etc/dpkg/dpkg.cfg
 Fichier de configuration contenant les options par défaut.
 .P
 Les autres fichiers répertoriés ici sont dans leur répertoire par défaut, voyez
 l'option \fB--admindir\fP pour savoir changer l'emplacement de ces fichiers.
 .TP
-.I /var/lib/dpkg/available
+.I @PREFIX@/var/lib/dpkg/available
 Liste des paquets disponibles.
 .TP
-.I /var/lib/dpkg/status
+.I @PREFIX@/var/lib/dpkg/status
 États des paquets disponibles. Ce fichier contient des informations qui
 permettent de savoir si un paquet est marqué comme devant être supprimé
 ou pas, devant être installé ou pas, etc. Voyez la section
@@ -621,7 +621,7 @@
 .SH AUTEURS
 .nf
 \fBdpkg\fP fut d'abord écrit par Ian Jackson, puis mis à jour par beaucoup
-d'autres gens. Voyez le fichier \fB/usr/share/doc/dpkg/THANKS.gz\fP pour la 
+d'autres gens. Voyez le fichier \fB@PREFIX@/share/doc/dpkg/THANKS.gz\fP pour la 
 liste des personnes qui ont contribué à \fBdpkg\fP.
 .fi
 .SH "TRADUCTION"
diff -urN dpkg-1.10.21.orig/man/fr/install-info.8 dpkg-1.10.21/man/fr/install-info.8
--- dpkg-1.10.21.orig/man/fr/install-info.8	2002-02-03 00:57:09.000000000 +0900
+++ dpkg-1.10.21/man/fr/install-info.8	2005-03-18 22:13:37.000000000 +0900
@@ -157,7 +157,7 @@
 dans
 .IR rep-info . 
 Par défaut, c'est
-.BR /usr/info .
+.BR @PREFIX@/share/info .
 .TP
 .BI \-\-align= nnn " [déconseillé]"
 Précise que l'espace d'indentation de la première ligne de la description
@@ -272,6 +272,8 @@
 emacs(1), info(1), gzip(1)
 .SH "TRADUCTION"
 Philippe Batailler. Dec 2000
+.PP
+Paths modified by Carsten Klapp to reflect fink distribution, December 2002.
 .SH COPYRIGHT
 Copyright 1994, Ian Jackson.
 .B install\-info
diff -urN dpkg-1.10.21.orig/man/fr/update-alternatives.8 dpkg-1.10.21/man/fr/update-alternatives.8
--- dpkg-1.10.21.orig/man/fr/update-alternatives.8	2004-03-11 09:03:19.000000000 +0900
+++ dpkg-1.10.21/man/fr/update-alternatives.8	2005-03-18 22:13:37.000000000 +0900
@@ -4,7 +4,7 @@
 .\" it under the terms of the GNU General Public License as published
 .\" by the Free Software Foundation; either version 2 of the License, or
 .\" (at your option) any later version.  There is NO WARRANTY.  You can
-.\" find the GNU GPL in /usr/share/common-licenses/GPL on any Debian system.
+.\" find the GNU GPL in @PREFIX@/share/common-licenses/GPL on any Debian system.
 .\" traduction de la révision CVS 1.8
 .TH UPDATE-ALTERNATIVES 8 "19 January 1998" "Debian Project" "dpkg utilities"
 .SH NOM
@@ -81,11 +81,11 @@
 .BR nvi (1)
 sont tous les deux installés, le système des «\ alternatives\ » fait que le 
 nom générique 
-.I /usr/bin/editor
+.I @PREFIX@/bin/editor
 renvoie par défaut à
-.I /usr/bin/nvi.
+.I @PREFIX@/bin/nvi.
 L'administrateur système peut remplacer cette assignation par
-.I /usr/bin/ed
+.I @PREFIX@/bin/ed
 et le système des «\ alternatives\ » ne la changera pas tant qu'on ne lui
 aura pas demandé explicitement de le faire.
 .PP
@@ -96,7 +96,7 @@
 lequel nom est à son tour un lien symbolique vers le fichier réellement
 visé. Les modifications faites par l'administrateur système sont ainsi
 confinées dans le répertoire 
-.I /etc :
+.I @PREFIX@/etc :
 le FHS (lisez-le) donne de Bonnes Raisons de faire ainsi.
 .PP
 Chaque fois qu'un paquet proposant un fichier pour une fonction déterminée,
@@ -117,9 +117,9 @@
 de 
 .BR vi (1) 
 sont installées, la page de manuel qui est visée par
-.I /usr/share/man/man1/vi.1
+.I @PREFIX@/share/man/man1/vi.1
 devrait correspondre à 
-.IR /usr/bin/vi.
+.IR @PREFIX@/bin/vi.
 .B update-alternatives
 gère ce problème avec les liens
 .I principaux (« master »)
@@ -175,7 +175,7 @@
 .TP
 nom générique
 C'est un nom, par exemple
-.IR /usr/bin/editor,
+.IR @PREFIX@/bin/editor,
 qui renvoie, à travers le système des « alternatives », à l'un des fichiers qui
 remplissent des fonctions similaires.
 .TP
@@ -190,13 +190,13 @@
 répertoire des alternatives 
 C'est le répertoire qui contient les liens symboliques ; il s'agit 
 par défaut de
-.IR /etc/alternatives.
+.IR @PREFIX@/etc/alternatives.
 .TP
 répertoire administratif
 C'est le répertoire qui contient des renseignements sur l'état de
 .BR update-alternatives. 
 Il s'agit par défaut de
-.IR /var/lib/dpkg/alternatives.
+.IR @PREFIX@/var/lib/dpkg/alternatives.
 .TP
 groupe de liens
 C'est un ensemble de liens symboliques corrélés, de manière qu'on puisse les
@@ -387,12 +387,12 @@
 est désactivé.
 .SH FICHIERS
 .TP
-.I /etc/alternatives/
+.I @PREFIX@/etc/alternatives/
 Le répertoire des « alternatives » par défaut.
 Peut être remplacé avec l'option
 .B --altdir.
 .TP
-.I /var/lib/dpkg/alternatives/
+.I @PREFIX@/var/lib/dpkg/alternatives/
 Le répertoire administratif par défaut.
 Peut être remplacé avec l'option
 .B --admindir
@@ -432,7 +432,7 @@
 version 2 ou supérieure pour les conditions du copyright. Il n'y a
 AUCUNE garantie.
 .PP
-On peut trouver la licence GNU GPL dans /usr/share/common-licenses/GPL 
+On peut trouver la licence GNU GPL dans @PREFIX@/share/doc/dpkg/copyright 
 sur tous les systèmes Debian.
 .\" .SH REMERCIEMENTS
 .SH "VOIR AUSSI"
diff -urN dpkg-1.10.21.orig/man/ja/cleanup-info.8 dpkg-1.10.21/man/ja/cleanup-info.8
--- dpkg-1.10.21.orig/man/ja/cleanup-info.8	2004-04-26 01:14:26.000000000 +0900
+++ dpkg-1.10.21/man/ja/cleanup-info.8	2005-03-18 22:13:37.000000000 +0900
@@ -37,7 +37,7 @@
 ¥Ð¡¼¥¸¥ç¥ó¤òÉ½¼¨¤·¡¢Àµ¾ï½ªÎ»¤¹¤ë¡£
 .SH ¥Õ¥¡¥¤¥ë
 .TP
-.I "/usr/info/dir ¤Þ¤¿¤Ï <¥Ç¥£¥ì¥¯¥È¥êÌ¾>/dir"
+.I "@PREFIX@/share/info/dir ¤Þ¤¿¤Ï <¥Ç¥£¥ì¥¯¥È¥êÌ¾>/dir"
 info ¥Ç¥£¥ì¥¯¥È¥ê¥Õ¥¡¥¤¥ë¡£¥í¥Ã¥¯¥Õ¥¡¥¤¥ë¤ÏÆ±¤¸Ì¾Á°¤Ç ".lock" ³ÈÄ¥»Ò¤¬
 ¤Ä¤¤¤¿¤â¤Î¤Ë¤Ê¤ë¡£
 .SH ¥Ð¥°
@@ -47,6 +47,8 @@
 .BR info (1).
 .SH Ãø¼Ô
 Copyright (C) 1996 Kim-Minh Kaplan.
+.PP
+Paths modified by Carsten Klapp to reflect fink distribution, December 2002.
 .sp
 This is free software; see the GNU General Public Licence
 version 2 or later for copying conditions.  There is NO warranty.
diff -urN dpkg-1.10.21.orig/man/ja/dpkg-deb.1 dpkg-1.10.21/man/ja/dpkg-deb.1
--- dpkg-1.10.21.orig/man/ja/dpkg-deb.1	2004-04-26 01:14:26.000000000 +0900
+++ dpkg-1.10.21/man/ja/dpkg-deb.1	2005-03-18 22:13:37.000000000 +0900
@@ -260,9 +260,9 @@
 ¤È¤³¤Î¥Þ¥Ë¥å¥¢¥ë¥Ú¡¼¥¸¤Ï Ian Jackson ¤¬ºîÀ®¤·¤¿¡£¤³¤ì¤é¤ÎÃøºî¸¢¤ÏÈà¤Ë
 ¤¢¤ê(Copyright (C)1995-1996)¡¢GNU °ìÈÌ¸øÍ­»ÈÍÑµöÂú¤Ë¤è¤êÈÒÉÛ¤µ¤ì¤ë¡£
 ¤³¤ì¤é¤ÏÌµÊÝ¾Ú¤Ç¤¢¤ë¡£¾ÜºÙ¤Ï
-.B /usr/share/doc/dpkg/copyright
+.B @PREFIX@/share/doc/dpkg/copyright
 ¤È
-.B /usr/share/common-licenses/GPL
+.B @PREFIX@/share/common-licenses/GPL
 ¤ò»²¾È¤¹¤ë¤³¤È¡£
 
 (
@@ -271,10 +271,13 @@
 Copyright (C)1995-1996
 by him and released under the GNU General Public Licence; there is NO
 WARRANTY.  See
-.B /usr/share/doc/dpkg/copyright
+.B @PREFIX@/share/doc/dpkg/copyright
 and
-.B /usr/share/common-licenses/GPL
+.B @PREFIX@/share/common-licenses/GPL
 for details.
+.PP
+Paths modified by Carsten Klapp to reflect fink distribution, December 2002.
+.PP
 )
 .SH ËÝÌõ¼Ô
 ´îÀ¥¹À <kise@fuyuneko.jp>
diff -urN dpkg-1.10.21.orig/man/ja/dpkg-divert.8 dpkg-1.10.21/man/ja/dpkg-divert.8
--- dpkg-1.10.21.orig/man/ja/dpkg-divert.8	2004-04-26 01:14:26.000000000 +0900
+++ dpkg-1.10.21/man/ja/dpkg-divert.8	2005-03-18 22:13:37.000000000 +0900
@@ -86,6 +86,7 @@
 overriding a package's version of a file" ¤ò»²¾È¤Î¤³¤È¡£
 .SH Ãø¼Ô
 Copyright (C) 1995 Ian Jackson.
+Paths modified by Carsten Klapp to reflect fink distribution, December 2002.
 .sp
 This is free software; see the GNU General Public Licence
 version 2 or later for copying conditions.  There is NO warranty.
diff -urN dpkg-1.10.21.orig/man/ja/dpkg-scanpackages.8 dpkg-1.10.21/man/ja/dpkg-scanpackages.8
--- dpkg-1.10.21.orig/man/ja/dpkg-scanpackages.8	2004-04-26 01:14:26.000000000 +0900
+++ dpkg-1.10.21/man/ja/dpkg-scanpackages.8	2005-03-18 22:13:37.000000000 +0900
@@ -103,6 +103,8 @@
 .I newmaintainer
 ¤Î¾ì¹ç¤ÏÃÖ´¹¤µ¤ì¤ë¡£
 .PP
+Paths modified by Carsten Klapp to reflect fink distribution, December 2002.
+.PP
 ¸ø¼°¤Î Packages ¥ê¥¹¥È¤òºîÀ®¤¹¤ë¤¿¤á¤Ë»È¤ï¤ì¤Æ¤¤¤ë override ¥Õ¥¡¥¤¥ë¤Ï¡¢
 Debian ¥ß¥é¡¼¤Î
 .I indices
diff -urN dpkg-1.10.21.orig/man/ja/dpkg-statoverride.8 dpkg-1.10.21/man/ja/dpkg-statoverride.8
--- dpkg-1.10.21.orig/man/ja/dpkg-statoverride.8	2002-02-03 00:57:09.000000000 +0900
+++ dpkg-1.10.21/man/ja/dpkg-statoverride.8	2005-03-18 22:13:37.000000000 +0900
@@ -99,14 +99,14 @@
 .TP
 .I --admindir
 .\"O Change the directory of the dpkg database where the statoverride file is
-.\"O also stored. Defaults to /var/lib/dpkg.
+.\"O also stored. Defaults to @PREFIX@/var/lib/dpkg.
 dpkg ¥Ç¡¼¥¿¥Ù¡¼¥¹¤Î¥Ç¥£¥ì¥¯¥È¥ê¤òÊÑ¹¹¤¹¤ë¡£
 statoverride ¤Î¥Õ¥¡¥¤¥ë¤â¤³¤³¤ËÊÝÂ¸¤µ¤ì¤ë¡£
-¥Ç¥Õ¥©¥ë¥È¤Ï /var/lib/dpkg¡£
+¥Ç¥Õ¥©¥ë¥È¤Ï @PREFIX@/var/lib/dpkg¡£
 .\"O .SH FILES
 .SH ¥Õ¥¡¥¤¥ë
 .TP
-.I /var/lib/dpkg/statoverride
+.I @PREFIX@/var/lib/dpkg/statoverride
 .\"O File which contains the current list of stat overrides of the system. It
 .\"O is located in the dpkg administration directory, along with other files
 .\"O important to dpkg, such as `status' or `available'.
@@ -127,6 +127,8 @@
 .UR mailto:wakkerma@debian.org
 <wakkerma@debian.org>
 .UE
+.PP
+Paths modified by Carsten Klapp to reflect fink distribution, December 2002.
 .sp
 This is free software; see the GNU General Public Licence version 2 or
 later for copying conditions.  There is NO warranty.
diff -urN dpkg-1.10.21.orig/man/ja/dpkg.8 dpkg-1.10.21/man/ja/dpkg.8
--- dpkg-1.10.21.orig/man/ja/dpkg.8	2004-04-26 01:14:26.000000000 +0900
+++ dpkg-1.10.21/man/ja/dpkg.8	2005-03-18 22:13:37.000000000 +0900
@@ -188,7 +188,7 @@
 \fB--remove\fP ¤Ï¡¢ÀßÄê¥Õ¥¡¥¤¥ë¤ò½ü¤¤¤¿¤¹¤Ù¤Æ¤òºï½ü¤¹¤ë(ÀßÄê¥Õ¥¡¥¤¥ë¤Î°ìÍ÷¤Ï¡¢
 \fIconffiles\fP ¥³¥ó¥È¥í¡¼¥ë¥Õ¥¡¥¤¥ë¤Ë¤¢¤ë)¡£
 °ú¤­¿ô¤È¤·¤Æ¡¢¥Ñ¥Ã¥±¡¼¥¸Ì¾¤ÎÂå¤ï¤ê¤Ë \fB-a\fP ¤Þ¤¿¤Ï \fB--pending\fP ¤¬
-»ØÄê¤µ¤ì¤¿¾ì¹ç¤Ë¤Ï¡¢\fI/var/lib/dpkg/status\fP ¥Õ¥¡¥¤¥ë¤Ë remove ¤Þ¤¿¤Ï
+»ØÄê¤µ¤ì¤¿¾ì¹ç¤Ë¤Ï¡¢\fI@PREFIX@/var/lib/dpkg/status\fP ¥Õ¥¡¥¤¥ë¤Ë remove ¤Þ¤¿¤Ï
 purge ¤Î°õ¤ò»ý¤Ä¤¹¤Ù¤Æ¤ÎÅ¸³«ºÑ¤ß¥Ñ¥Ã¥±¡¼¥¸¤ò¡¢¤½¤ì¤¾¤ì remove ¤Þ¤¿¤Ï
 purge ¤¹¤ë¡£
 
@@ -211,7 +211,7 @@
 ÃÖ¤­´¹¤¨¤ë¡£
 Debian ¤È°ì½ï¤ËÇÛÉÛ¤µ¤ì¤Æ¤¤¤ë \fIPackages-file\fP ¤ÎÌ¾Á°¤Ï´ÊÃ±¤Ë
 \fIPackages\fP ¤Ç¤¢¤ë¡£\fBdpkg\fP ¤Ï¡¢ÍøÍÑ²ÄÇ½¤Ê¥Ñ¥Ã¥±¡¼¥¸¤Î¾ðÊó¤ò
-\fI/var/lib/dpkg/available\fP ¤Ëµ­Ï¿¤¹¤ë¡£
+\fI@PREFIX@/var/lib/dpkg/available\fP ¤Ëµ­Ï¿¤¹¤ë¡£
 .TP
 \fBdpkg -A\fP | \fB--record-avail\fP \fIpackage_file\fP ...
 \fBdpkg\fP ¤ä \fBdselect\fP ¤¬´ÉÍý¤¹¤ëÍøÍÑ²ÄÇ½¤Ê¥Ñ¥Ã¥±¡¼¥¸¤Î¾ðÊó¤ò¡¢
@@ -326,7 +326,7 @@
 
 .SS ¥ª¥×¥·¥ç¥ó
 ¤¹¤Ù¤Æ¤Î¥ª¥×¥·¥ç¥ó¤Ï¡¢¥³¥Þ¥ó¥É¥é¥¤¥ó¤ä \fBdpkg\fP ¤ÎÀßÄê¥Õ¥¡¥¤¥ë¤Ç
-¤¢¤ë \fI/etc/dpkg/dpkg.cfg\fP ¤ÎÃæ¤Ç»ØÄê¤Ç¤­¤ë¡£ÀßÄê¥Õ¥¡¥¤¥ë¤Ï¡¢
+¤¢¤ë \fI@PREFIX@/etc/dpkg/dpkg.cfg\fP ¤ÎÃæ¤Ç»ØÄê¤Ç¤­¤ë¡£ÀßÄê¥Õ¥¡¥¤¥ë¤Ï¡¢
 1 ¹Ô¤Ë 1 ¤Ä¤Î¥ª¥×¥·¥ç¥ó(¥³¥Þ¥ó¥É¥é¥¤¥ó¥ª¥×¥·¥ç¥ó¤È¤Þ¤Ã¤¿¤¯Æ±¤¸¡¢
 ¤¿¤À¤·Æ¬¤Î¥À¥Ã¥·¥å¤ò¼è¤ë)¤«¡¢¥³¥á¥ó¥È(ºÇ½é¤Ë \fB#\fR ¤Ç»Ï¤Þ¤ë)
 ¤Ç¹½À®¤µ¤ì¤ë¡£
@@ -492,13 +492,13 @@
 ¥Ç¥Õ¥©¥ë¥È¤Î¥Ç¥£¥ì¥¯¥È¥ê¤òÊÑ¹¹¤¹¤ë¡£\fBadmindir\fP ¤Ï¥¤¥ó¥¹¥È¡¼¥ëºÑ¤ß¤Î
 ¥Ñ¥Ã¥±¡¼¥¸¤ä¥¤¥ó¥¹¥È¡¼¥ë¤µ¤ì¤Æ¤¤¤Ê¤¤¥Ñ¥Ã¥±¡¼¥¸¤Î¾õÂÖ¤Ë´Ø¤¹¤ë¾ðÊó¤Ê¤É¤ò
 Äó¶¡¤¹¤ë¡¢Â¿¿ô¤Î¥Õ¥¡¥¤¥ë¤¬³ÊÇ¼¤µ¤ì¤Æ¤¤¤ë¥Ç¥£¥ì¥¯¥È¥ê¤Ç¡¢¥Ç¥Õ¥©¥ë¥È¤Ï
-\fI/var/lib/dpkg\fP ¤Ç¤¢¤ë¡£\fBinstdir\fP ¤Ï¥Ñ¥Ã¥±¡¼¥¸¤¬¥¤¥ó¥¹¥È¡¼¥ë
+\fI@PREFIX@/var/lib/dpkg\fP ¤Ç¤¢¤ë¡£\fBinstdir\fP ¤Ï¥Ñ¥Ã¥±¡¼¥¸¤¬¥¤¥ó¥¹¥È¡¼¥ë
 ¤¹¤ë¤È¤­¤Ë»²¾È¤µ¤ì¤ë¥Ç¥£¥ì¥¯¥È¥ê¤Ç¡¢¥Ç¥Õ¥©¥ë¥È¤Ï \fI/\fP ¤Ç¤¢¤ë¡£
 ¤Þ¤¿¡¢\fBinstdir\fP ¤Ï¡¢¥Ñ¥Ã¥±¡¼¥¸¤Î¥¤¥ó¥¹¥È¡¼¥ë¥¹¥¯¥ê¥×¥È¤¬¼Â¹Ô
 ¤µ¤ì¤ëÁ°¤Ë \fBchroot\fP(2) ¤¹¤ë¥Ç¥£¥ì¥¯¥È¥ê¤Î¥Ñ¥¹¤Ç¤¢¤ë¡£¤Ä¤Þ¤ê¡¢
 ¥¹¥¯¥ê¥×¥È¤Ï \fBinstdir\fP ¤ò¥ë¡¼¥È¥Ç¥£¥ì¥¯¥È¥ê¤È¤ß¤Ê¤¹¡£
 \fBroot\fP ¤òÊÑ¹¹¤¹¤ë¤È¡¢\fBinstdir\fP ¤ò \fIdir\fP ¤Ë¡¢\fBadmindir\fP
-¤ò \fIdir\fP\fB/var/lib/dpkg\fP ¤ËÊÑ¹¹¤¹¤ë¡£
+¤ò \fIdir\fP\fB@PREFIX@/var/lib/dpkg\fP ¤ËÊÑ¹¹¤¹¤ë¡£
 .TP
 \fB-O\fP | \fB--selected-only\fP
 ¥¤¥ó¥¹¥È¡¼¥ë(¤Þ¤¿¤Ïºï½ü)ºî¶È¤ò¤¹¤ë¤è¤¦¤ËÁªÂò¤·¤¿¥Ñ¥Ã¥±¡¼¥¸¤Î¤ß¤ò½èÍý¤¹¤ë¡£
@@ -516,17 +516,17 @@
 
 .SH ¥Õ¥¡¥¤¥ë
 .TP
-.I /etc/dpkg.cfg
+.I @PREFIX@/etc/dpkg.cfg
 ¥ª¥×¥·¥ç¥ó¤Î¥Ç¥Õ¥©¥ë¥ÈÃÍ¤òµ­½Ò¤¹¤ëÀßÄê¥Õ¥¡¥¤¥ë¡£
 .P
 ¤³¤Î¤Û¤«¤Î¡¢°Ê²¼¤Ë¼¨¤¹¥Õ¥¡¥¤¥ë°ìÍ÷¤Ï¥Ç¥Õ¥©¥ë¥È¤ÎÃÍ¤Ç¤¢¤ë¡£¤É¤Î¤è¤¦¤Ë¤·¤Æ
 ¥Õ¥¡¥¤¥ë¤Î°ÌÃÖ¤òÊÑ¹¹¤¹¤ë¤«¤Ë¤Ä¤¤¤Æ¤Ï¡¢\fB--admindir\fP ¥ª¥×¥·¥ç¥ó¤Î¹à¤ò
 »²¾È¤¹¤ë¤³¤È¡£
 .TP
-.I /var/lib/dpkg/available
+.I @PREFIX@/var/lib/dpkg/available
 »ÈÍÑ¤Ç¤­¤ë¥Ñ¥Ã¥±¡¼¥¸¤Î°ìÍ÷¡£
 .TP
-.I /var/lib/dpkg/status
+.I @PREFIX@/var/lib/dpkg/status
 »ÈÍÑ¤Ç¤­¤ë¥Ñ¥Ã¥±¡¼¥¸¤Î¾õÂÖ¡£¤³¤Î¥Õ¥¡¥¤¥ë¤Ï¡¢¥Ñ¥Ã¥±¡¼¥¸¤Ëºï½ü¤Î°õ¤¬¤¢¤ë¤«
 ¤É¤¦¤«¡¢¥¤¥ó¥¹¥È¡¼¥ëºÑ¤ß¤«¤É¤¦¤«¡¢¤Ê¤É¤Î¾ðÊó¤¬´Þ¤Þ¤ì¤Æ¤¤¤ë¡£¤¯¤ï¤·¤¯¤Ï¡¢
 \fB ¥Ñ¥Ã¥±¡¼¥¸¤Ë´Ø¤¹¤ë¾ðÊó\fP ¤Î¹à¤ò»²¾È¤¹¤ë¤³¤È¡£
diff -urN dpkg-1.10.21.orig/man/ja/install-info.8 dpkg-1.10.21/man/ja/install-info.8
--- dpkg-1.10.21.orig/man/ja/install-info.8	2004-04-26 01:14:26.000000000 +0900
+++ dpkg-1.10.21/man/ja/install-info.8	2005-03-18 22:13:37.000000000 +0900
@@ -292,12 +292,12 @@
 .\"O be located in
 .\"O .IR infodir .
 .\"O The default is
-.\"O .BR /usr/info .
+.\"O .BR @PREFIX@/share/info .
 .B dir
 ¥Õ¥¡¥¤¥ë¤È¡¢¥¤¥ó¥¹¥È¡¼¥ë¤µ¤ì¤ë¿·¤¿¤Ê Info ¥Õ¥¡¥¤¥ë¤Î¥³¥Ô¡¼¤È¤¬
 .I infodir
 ¤Ë¤¢¤ë¤³¤È¤ò»ØÄê¤¹¤ë¡£¥Ç¥Õ¥©¥ë¥È¤Ï
-.B /usr/info
+.B @PREFIX@/share/info
 ¤Ç¤¢¤ë¡£
 .TP
 .\"O .BI \-\-align= nnn " [deprecated]"
@@ -485,6 +485,8 @@
 later for copying conditions.  There is
 .I no
 warranty.
+.PP
+Paths modified by Carsten Klapp to reflect fink distribution, December 2002.
 .SH ËÝÌõ¼Ô
 ´Ø¸Í ¹¬°ì <sekido@mbox.kyoto-inet.or.jp>
 .SH ËÝÌõ¼ÔÃí
diff -urN dpkg-1.10.21.orig/man/ja/update-alternatives.8 dpkg-1.10.21/man/ja/update-alternatives.8
--- dpkg-1.10.21.orig/man/ja/update-alternatives.8	2004-04-26 01:14:26.000000000 +0900
+++ dpkg-1.10.21/man/ja/update-alternatives.8	2005-03-18 22:13:37.000000000 +0900
@@ -4,7 +4,7 @@
 .\" it under the terms of the GNU General Public License as published
 .\" by the Free Software Foundation; either version 2 of the License, or
 .\" (at your option) any later version.  There is NO WARRANTY.  You can
-.\" find the GNU GPL in /usr/share/common-licenses/GPL on any Debian system.
+.\" find the GNU GPL in @PREFIX@/share/common-licenses/GPL on any Debian system.
 .\"
 .\" Original manpage cvs revision 1.8.2.2
 .\"WORD:	action		¥¢¥¯¥·¥ç¥ó
@@ -87,11 +87,11 @@
 .BR nvi (1)
 ¤ÎÎ¾Êý¤¬¥·¥¹¥Æ¥à¤Ë¥¤¥ó¥¹¥È¡¼¥ë¤µ¤ì¤Æ¤¤¤¿¤È¤¹¤ë¤È¡¢
 °ìÈÌÌ¾¤Ç¤¢¤ë
-.I /usr/bin/editor
+.I @PREFIX@/bin/editor
 ¤Ï¡¢¥Ç¥Õ¥©¥ë¥È¤Ç¤Ï
-.I /usr/bin/nvi
+.I @PREFIX@/bin/nvi
 ¤ò»²¾È¤¹¤ë¡£¥·¥¹¥Æ¥à´ÉÍý¼Ô¤Ï¤³¤ì¤ò¾å½ñ¤­¤·¡¢
-.I /usr/bin/ed
+.I @PREFIX@/bin/ed
 ¤ò»²¾È¤µ¤»¤ë¤è¤¦¤Ë¤¹¤ë¤³¤È¤â¤Ç¤­¤ë¡£¤³¤¦¤¹¤ë¤È¡¢
 ¤½¤Î¸åÌÀ¼¨Åª¤Ê¥ê¥¯¥¨¥¹¥È¤¬¤Ê¤±¤ì¤Ð¡¢
 alternatives ¥·¥¹¥Æ¥à¤Ï¤½¤ÎÀßÄê¤òÊÑ¹¹¤·¤Ê¤¤¡£
@@ -101,7 +101,7 @@
 ¥Ç¥£¥ì¥¯¥È¥ê¤Ë¤¢¤ëÌ¾Á°¤Ø¤Î¥·¥ó¥Ü¥ê¥Ã¥¯¥ê¥ó¥¯¤Ë¤Ê¤Ã¤Æ¤¤¤ë¡£
 ¤½¤·¤Æ¤½¤ÎÌ¾Á°¤¬¼ÂºÝ¤Ë»²¾È¤µ¤ì¤ë¥Õ¥¡¥¤¥ë¤Ø¤Î¥·¥ó¥Ü¥ê¥Ã¥¯¥ê¥ó¥¯¤Ë¤Ê¤Ã¤Æ¤¤¤ë¡£
 ¤³¤¦¤Ê¤Ã¤Æ¤¤¤ëÍýÍ³¤Ï¡¢¥·¥¹¥Æ¥à´ÉÍý¼Ô¤ÎÊÑ¹¹¤¬
-.I /etc
+.I @PREFIX@/etc
 ¥Ç¥£¥ì¥¯¥È¥ê°Ê²¼¤Ç¹Ô¤ï¤ì¤ë¤è¤¦¤Ë¤¹¤ë¤¿¤á¤Ç¤¢¤ë¡£
 ¤Ê¤¼¤³¤¦¤¹¤ë¤Î¤¬ÎÉ¤¤¤«¤Ë¤Ä¤¤¤Æ¤Ï FHS ¤ËÀâÌÀ¤¬¤¢¤ë¡£
 .PP
@@ -120,9 +120,9 @@
 Îã¤¨¤Ð
 .BR vi (1)
 ¥¨¥Ç¥£¥¿¤Î¤¤¤í¤¤¤í¤ÊÇÉÀ¸¥·¥¹¥Æ¥à¤¬Æ±»þ¤Ë¥¤¥ó¥¹¥È¡¼¥ë¤µ¤ì¤Æ¤¤¤¿¤È¤¹¤ë¤È¡¢
-.I /usr/share/man/man1/vi.1
+.I @PREFIX@/share/man/man1/vi.1
 ¤¬»²¾È¤¹¤ë man ¥Ú¡¼¥¸¤Ï¡¢
-.I /usr/bin/vi
+.I @PREFIX@/bin/vi
 ¤¬»²¾È¤¹¤ë¼Â¹Ô¥Õ¥¡¥¤¥ë¤ËÂÐ±þ¤·¤Æ¤¤¤ë¤Ù¤­¤Ç¤¢¤í¤¦¡£
 .B update-alternatives
 ¤Ï¡¢
@@ -179,7 +179,7 @@
 Æ°ºî¤ÎÍý²ò¤Î½õ¤±¤È¤·¤¿¤¤¡£
 .TP
 °ìÈÌÌ¾ (generic name)
-.I /usr/bin/editor
+.I @PREFIX@/bin/editor
 ¤Î¤è¤¦¤ÊÌ¾Á°¡£ alternatives ¥·¥¹¥Æ¥à¤Ë¤è¤Ã¤Æ
 Æ±ÍÍ¤Îµ¡Ç½¤ò»ý¤ÄÊ£¿ô¤Î¥Õ¥¡¥¤¥ë¤Î¤É¤ì¤«¤Ò¤È¤Ä¤ò»²¾È¤¹¤ë¡£
 .TP
@@ -194,12 +194,12 @@
 .TP
 alternatives ¥Ç¥£¥ì¥¯¥È¥ê
 symlink ¤òÊÝ»ý¤¹¤ë¥Ç¥£¥ì¥¯¥È¥ê¡£¥Ç¥Õ¥©¥ë¥È¤Ï
-.IR /etc/alternatives ¡£
+.IR @PREFIX@/etc/alternatives ¡£
 .TP
 administrative ¥Ç¥£¥ì¥¯¥È¥ê
 .B update-alternatives
 ¤Î¾õÂÖ¾ðÊó¤òÊÝ»ý¤¹¤ë¥Ç¥£¥ì¥¯¥È¥ê¡£¥Ç¥Õ¥©¥ë¥È¤Ï
-.IR /var/lib/dpkg/alternatives ¡£
+.IR @PREFIX@/var/lib/dpkg/alternatives ¡£
 .TP
 ¥ê¥ó¥¯¥°¥ë¡¼¥×
 ´ØÏ¢¤¹¤ë symlink ¤Î¥»¥Ã¥È¡£¥°¥ë¡¼¥×¤´¤È¹¹¿·¤¹¤ë¤¿¤á¤Î¤â¤Î¡£
@@ -384,12 +384,12 @@
 ¥â¡¼¥É¤Ç¤Ï¤Ê¤¯¤Ê¤ë¡£
 .SH ¥Õ¥¡¥¤¥ë
 .TP
-.I /etc/alternatives/
+.I @PREFIX@/etc/alternatives/
 ¥Ç¥Õ¥©¥ë¥È¤Î alternatives ¥Ç¥£¥ì¥¯¥È¥ê¡£
 .B --altdir
 ¥ª¥×¥·¥ç¥ó¤Ë¤è¤Ã¤ÆÊÑ¹¹¤Ç¤­¤ë¡£
 .TP
-.I /var/lib/dpkg/alternatives/
+.I @PREFIX@/var/lib/dpkg/alternatives/
 ¥Ç¥Õ¥©¥ë¥È¤Î administration ¥Ç¥£¥ì¥¯¥È¥ê¡£
 .B --admindir
 ¥ª¥×¥·¥ç¥ó¤Ë¤è¤Ã¤ÆÊÑ¹¹¤Ç¤­¤ë¡£
@@ -425,7 +425,9 @@
 This is free documentation; see the GNU General Public Licence
 version 2 or later for copying conditions.  There is NO WARRANTY.
 .PP
-You can find the GNU GPL in /usr/share/common-licenses/GPL on any Debian system.
+Paths modified by Carsten Klapp to reflect fink distribution, December 2002.
+.PP
+You can find the GNU GPL in @PREFIX@/share/common-licenses/GPL on any Debian system.
 .SH ´ØÏ¢¹àÌÜ
 .BR ln (1),
 FHS, the Filesystem Hierarchy Standard.
diff -urN dpkg-1.10.21.orig/man/pt_BR/update-alternatives.8 dpkg-1.10.21/man/pt_BR/update-alternatives.8
--- dpkg-1.10.21.orig/man/pt_BR/update-alternatives.8	2002-02-03 02:58:58.000000000 +0900
+++ dpkg-1.10.21/man/pt_BR/update-alternatives.8	2005-03-18 22:13:37.000000000 +0900
@@ -4,7 +4,7 @@
 .\" sob os termos da Lincença Pública Geral GNU como publicado pela
 .\" Free Software Foundation; versão 2 da Licença ou (a sua escolha)
 .\" qualquer versão posterior. NÂO existe garantia. Você pode encontrar a
-.\" GNU GPL em /usr/share/common-licenses/GPL em qualquer sistema Debian.
+.\" GNU GPL em @PREFIX@/share/common-licenses/GPL em qualquer sistema Debian.
 .TH UPDATE-ALTERNATIVES 8 "19 de Janeiro de 1998" "Projeto Debian" "utilitários dpkg"
 .SH NOME
 update-alternatives \- mantém ligações simbólicas determinando comandos padrões
@@ -66,12 +66,12 @@
 .BR nvi (1)
 estejam ambos instalados no sistema, o sistema de alternativas fará com
 que o nome genérico
-.I /usr/bin/editor
+.I @PREFIX@/bin/editor
 refira-se a
-.I /usr/bin/nvi
+.I @PREFIX@/bin/nvi
 por padrão. O administrador do sistema pode sobreescrever isto e fazer com
 que refira-se a
-.I /usr/bin/ed
+.I @PREFIX@/bin/ed
 e o sistema de alternativas não irá alterar esta configuração até que
 explicitamente requisitado a fazê-lo.
 .PP
@@ -82,7 +82,7 @@
 o qual é, por sua vez, uma ligação simbólica para o arquivo atualmente
 referenciado. Isto é feito para que as mudanças do administrador do
 sistema possam ser confinadas dentro do diretório
-.I /etc
+.I @PREFIX@/etc
 : a FHS (q.v.) dá razões de porquê isto é um Boa Coisa.
 .PP
 Quando cada pacote provendo um arquivo com uma funcionalidade particular
@@ -102,9 +102,9 @@
 versões do editor
 .BR vi (1)
 estão instaladas, a página de manual referenciada por
-.I /usr/share/man/man1/vi.1
+.I @PREFIX@/share/man/man1/vi.1
 deverá corresponder ao executável referenciado por
-.IR /usr/bin/vi .
+.IR @PREFIX@/bin/vi .
 .B update-alternatives
 gerencia isso por meio de ligações
 .I master
@@ -164,7 +164,7 @@
 nome genérico
 Um nome,  como
 A name, like
-.IR /usr/bin/editor ,
+.IR @PREFIX@/bin/editor ,
 o qual refere-se, através do sistema de alternativas, a um ou a diversos
 arquivos de função similar.
 .TP
@@ -179,12 +179,12 @@
 .TP
 diretório de alternativas
 Um diretório, por padrão
-.IR /etc/alternatives ,
+.IR @PREFIX@/etc/alternatives ,
 contendo as ligações simbólicas.
 .TP
 diretório administrativo
 Um diretório, por padrão
-.IR /var/lib/dpkg/alternatives ,
+.IR @PREFIX@/var/lib/dpkg/alternatives ,
 contendo informação de estado de
 .BR update-alternatives .
 .TP
@@ -318,11 +318,11 @@
 Exibe todos os alvos de uma ligação em grupo.
 .SH ARQUIVOS
 .TP
-.I /etc/alternatives/
+.I @PREFIX@/etc/alternatives/
 O diretório de alternativas padrão. Pode ser sobreescrito pela opção
 .B --altdir
 .TP
-.I /var/lib/dpkg/alternatives/
+.I @PREFIX@/var/lib/dpkg/alternatives/
 O diretório de administração padrão. Pode ser sobreescrito pela opção
 .B --admindir
 .SH "STATUS DE SAÍDA"
@@ -358,7 +358,9 @@
 Isto é documentação livre; veja a Licença Pública Geral GNU versão 2 ou
 posterior para condições de cópia. NÂO existe garantia.
 .PP
-Você pode encontrar a GNU GPL em /usr/share/common-licenses/GPL em
+Paths modified by Carsten Klapp to reflect fink distribution, December 2002.
+.PP
+Você pode encontrar a GNU GPL em @PREFIX@/share/common-licenses/GPL em
 qualquer sistema Debian.
 .SH "VEJA TAMBÉM"
 .BR ln (1),
diff -urN dpkg-1.10.21.orig/man/ru/dpkg.8 dpkg-1.10.21/man/ru/dpkg.8
--- dpkg-1.10.21.orig/man/ru/dpkg.8	2002-02-03 00:57:09.000000000 +0900
+++ dpkg-1.10.21/man/ru/dpkg.8	2005-03-18 22:13:37.000000000 +0900
@@ -232,7 +232,7 @@
 ÉÌÉ 
 .B --pending,
 ÔÏ ×ÓÅ ÐÁËÅÔÙ, ÒÁÓÐÁËÏ×ÁÎÎÙÅ, ÎÏ ÏÔÍÅÞÅÎÎÙÅ × ÆÁÊÌÅ
-.I /var/lib/dpkg/status
+.I @PREFIX@/var/lib/dpkg/status
 ÄÌÑ ÕÄÁÌÅÎÉÑ ÉÌÉ ÐÏÌÎÏÊ ÏÞÉÓÔËÉ, ÓÏÏÔ×ÅÔÓÔ×ÅÎÎÏ, ÕÄÁÌÑÀÔÓÑ ÉÌÉ
 ÐÏÌÎÏÓÔØÀ ÏÞÉÝÁÀÔÓÑ.
 
@@ -258,7 +258,7 @@
 ÷Ù×ÏÄÉÔ ÄÅÔÁÌØÎÕÀ ÉÎÆÏÒÍÁÃÉÀ Ï
 .IR ÐÁËÅÔÅ ,
 ËÏÔÏÒÕÀ ÉÚ×ÌÅËÁÅÔ ÉÚ ÆÁÊÌÁ
-.IR /var/lib/dpkg/available .
+.IR @PREFIX@/var/lib/dpkg/available .
 
 .TP
 .BR "dpkg --update-avail" " | " "--merge-avail \fP\fI<ÆÁÊÌ Packages>"
@@ -279,7 +279,7 @@
 ÏÂÙÞÎÏ ÒÁÓÐÒÏÓÔÒÁÎÑÅÔÓÑ Ó Debian GNU/Linux.
 .B dpkg
 ÈÒÁÎÉÔ ÉÎÆÏÒÍÁÃÉÀ Ï ÄÏÓÔÕÐÎÙÈ ÐÁËÅÔÁÈ ×
-.IR /var/lib/dpkg/available .
+.IR @PREFIX@/var/lib/dpkg/available .
 
 .TP
 .BR "dpkg -A" " | "  "--record-avail \fP\fI<ÉÍÑ ÆÁÊÌÁ ÐÁËÅÔÁ>" ...
@@ -309,7 +309,7 @@
 ðÏËÁÚÙ×ÁÅÔ ÐÁËÅÔÙ, ÓÏÏÔ×ÅÔÓÔ×ÕÀÝÉÅ ÄÁÎÎÏÍÕ ÏÂÒÁÚÃÕ. åÓÌÉ 
 .I ÏÂÒÁÚÅÃ ÉÍÅÎÉ ÐÁËÅÔÁ 
 ÎÅ ÚÁÄÁÎ, ÐÏËÁÚÙ×ÁÅÔ ×ÓÅ ÐÁËÅÔÙ × 
-.BR /var/lib/dpkg/available . 
+.BR @PREFIX@/var/lib/dpkg/available . 
 ÷ 
 .I ÏÂÒÁÚÃÅ ÉÍÅÎÉ ÐÁËÅÔÁ 
 ÍÏÖÎÏ ÕËÁÚÙ×ÁÔØ ÏÂÙÞÎÙÅ ÓÉÍ×ÏÌÙ ÛÁÂÌÏÎÁ ËÏÍÁÎÄÎÏÊ ÏÂÏÌÏÞËÉ.  (óËÏÒÅÅ
@@ -454,7 +454,7 @@
 ÷ÓÅ ËÌÀÞÉ ÍÏÖÎÏ ÕËÁÚÙ×ÁÔØ ËÁË × ËÏÍÁÎÄÎÏÊ ÓÔÒÏËÅ, ÔÁË É ×
 ËÏÎÆÉÇÕÒÁÃÉÏÎÎÏÍ ÆÁÊÌÅ
 .BR dpkg \~--
-.IR /etc/dpkg/dpkg.cfg .
+.IR @PREFIX@/etc/dpkg/dpkg.cfg .
 ëÁÖÄÁÑ ÓÔÒÏËÁ × ËÏÎÆÉÇÕÒÁÃÉÏÎÎÏÍ ÆÁÊÌÅ ÄÏÌÖÎÁ ÂÙÔØ ÌÉÂÏ ËÌÀÞÏÍ (×
 ÔÏÞÎÏÓÔÉ ËÁË ËÌÀÞ ËÏÍÁÎÄÎÏÊ ÓÔÒÏËÉ, ÎÏ ÂÅÚ ÎÁÞÁÌØÎÙÈ ÄÅÆÉÓÏ×), ÉÌÉ ÖÅ
 ËÏÍÍÅÎÔÁÒÉÅÍ (ÅÓÌÉ ÎÁÞÉÎÁÅÔÓÑ Ó
@@ -639,7 +639,7 @@
 \fB--root=\fP\fIdir\fP | \fB--admindir=\fP\fIdir\fP | \fB--instdir=\fP\fIdir\fP
 õÓÔÁÎÁ×ÌÉ×ÁÅÔ ËÁÔÁÌÏÇÉ ÐÏ ÕÍÏÌÞÁÎÉÀ.  ëÁÔÁÌÏÇ admindir ÐÏ ÕÍÏÌÞÁÎÉÀ
 ÒÁ×ÅÎ
-.B /var/lib/dpkg 
+.B @PREFIX@/var/lib/dpkg 
 É ÓÏÄÅÒÖÉÔ ÍÎÏÇÏ ÆÁÊÌÏ×, × ËÏÔÏÒÙÈ ÄÁÅÔÓÑ ÉÎÆÏÒÍÁÃÉÑ Ï ÓÏÓÔÏÑÎÉÑÈ 
 ÕÓÔÁÎÏ×ÌÅÎÎÙÈ ÉÌÉ ÕÄÁÌÅÎÎÙÈ ÐÁËÅÔÏ× É Ô.\~Ä. 
 ëÁÔÁÌÏÇ
@@ -660,7 +660,7 @@
 Á ËÁÔÁÌÏÇÁ
 .BR admindir \~--
 × ÚÎÁÞÅÎÉÅ
-.IB dir /var/lib/dpkg \P.
+.IB dir @PREFIX@/var/lib/dpkg \P.
 
 .TP
 .BR -O " | " --selected-only
@@ -688,7 +688,7 @@
 .SH æáêìù
 
 .TP
-.I /etc/dpkg/dpkg.cfg
+.I @PREFIX@/etc/dpkg/dpkg.cfg
 æÁÊÌ ËÏÎÆÉÇÕÒÁÃÉÉ Ó ËÌÀÞÁÍÉ ÐÏ ÕÍÏÌÞÁÎÉÀ.
 .P
 ïÓÔÁÌØÎÙÅ ÆÁÊÌÙ ÐÅÒÅÞÉÓÌÅÎÙ Ó ÕËÁÚÁÎÉÅÍ ÉÈ ËÁÔÁÌÏÇÏ× ÐÏ ÕÍÏÌÞÁÎÉÀ,
@@ -697,11 +697,11 @@
 ÞÔÏÂÙ ÕÚÎÁÔØ, ËÁË ÉÚÍÅÎÉÔØ ÍÅÓÔÏÐÏÌÏÖÅÎÉÅ ÜÔÉÈ ÆÁÊÌÏ×.
 
 .TP
-.I /var/lib/dpkg/available
+.I @PREFIX@/var/lib/dpkg/available
 óÐÉÓÏË ÄÏÓÔÕÐÎÙÈ ÐÁËÅÔÏ×.
 
 .TP
-.I /var/lib/dpkg/status
+.I @PREFIX@/var/lib/dpkg/status
 óÏÓÔÏÑÎÉÑ ÄÏÓÔÕÐÎÙÈ ÐÁËÅÔÏ×. üÔÏÔ ÆÁÊÌ ÓÏÄÅÒÖÉÔ ÉÎÆÏÒÍÁÃÉÀ Ï ÔÏÍ,
 ÐÏÍÅÞÅÎ ÌÉ ÐÁËÅÔ ÄÌÑ ÕÄÁÌÅÎÉÑ ÉÌÉ ÎÅÔ, ÕÓÔÁÎÏ×ÌÅÎ ÏÎ ÉÌÉ ÎÅÔ, É
 Ô.\~Ä.  óÍ. ÇÌÁ×Õ
@@ -756,14 +756,14 @@
 .br
 
 þÔÏÂÙ ÐÏÓÍÏÔÒÅÔØ ÎÁ ÚÁÐÉÓÉ Ï Ä×ÕÈ ÐÁËÅÔÁÈ × ÆÁÊÌÅ
-.BR /var/lib/dpkg/available :
+.BR @PREFIX@/var/lib/dpkg/available :
 .br
 \fB     dpkg --print-avail elvis vim | less\fP
 .br
 
 ÷ÒÕÞÎÕÀ ÐÒÏÓÍÏÔÒÅÔØ ÓÐÉÓÏË ÐÁËÅÔÏ×:
 .br
-\fB     less /var/lib/dpkg/available\fP
+\fB     less @PREFIX@/var/lib/dpkg/available\fP
 .br
 
 
@@ -814,8 +814,9 @@
 
 .SH á÷ôïòù
 óÍ.
-.BR /usr/share/doc/dpkg/THANKS ,
+.BR @PREFIX@/share/doc/dpkg/THANKS ,
 ÇÄÅ ÐÒÉ×ÅÄÅÎ ÓÐÉÓÏË ÔÅÈ, ËÔÏ ÕÞÁÓÔ×Ï×ÁÌ × ÒÁÚÒÁÂÏÔËÅ
+Paths modified by Carsten Klapp to reflect fink distribution, December 2002.
 .BR dpkg .
 
 .SH ðåòå÷ïä
diff -urN dpkg-1.10.21.orig/man/sv/dpkg-deb.1 dpkg-1.10.21/man/sv/dpkg-deb.1
--- dpkg-1.10.21.orig/man/sv/dpkg-deb.1	2002-02-03 02:46:49.000000000 +0900
+++ dpkg-1.10.21/man/sv/dpkg-deb.1	2005-03-18 22:13:37.000000000 +0900
@@ -248,8 +248,9 @@
 och denna manualsida skrevs av Ian Jackson.
 De är upphovsrättsskyddade 1995-1996 av honom och släppta under
 GNU General Public Licence; det finns INGEN garanti.
+Paths modified by Carsten Klapp to reflect fink distribution, December 2002.
 Se
-.B /usr/share/doc/dpkg/copyright
+.B @PREFIX@/share/doc/dpkg/copyright
 och
-.B /usr/share/common-licenses/GPL
+.B @PREFIX@/share/common-licenses/GPL
 för detaljer.
diff -urN dpkg-1.10.21.orig/man/sv/dpkg-query.8 dpkg-1.10.21/man/sv/dpkg-query.8
--- dpkg-1.10.21.orig/man/sv/dpkg-query.8	2002-02-03 02:56:49.000000000 +0900
+++ dpkg-1.10.21/man/sv/dpkg-query.8	2005-03-18 22:13:37.000000000 +0900
@@ -16,7 +16,7 @@
 \fB-l\fP | \fB--list\fP \fIpaketnamnsmönster\fP ...
 Lista paket som matchar det givna mönstret.
 Om inget \fIpaketnamnsmönster\fP anges listas alla paket i
-\fI/var/lib/dpkg/available\fP.
+\fI@PREFIX@/var/lib/dpkg/available\fP.
 Skalets normala jokertecken tillåts i \fIpaketnamnsmönster\fP.
 Observera att du sannolikt måste skriva \fIpaketnamnsmönster\fP inom
 citationstecken för att förhindra att skalet expanderar filnamnet.
@@ -49,7 +49,7 @@
 .TP
 \fB-p\fP |\fB--print-avail\fP paket
 Visar detaljer om \fIpaket\fP från
-\fI/var/lib/dpkg/available\fP.
+\fI@PREFIX@/var/lib/dpkg/available\fP.
 .TP
 \fB--licence\fP | \fB--license\fP
 Visar licensvillkor och upphovsrättsinformation.
@@ -61,7 +61,7 @@
 .TP
 \fB--admindir=\fIkat\fP
 Ändra platsen för \fBdpkg\fR-databasen.
-Förval är \fI/var/lib/dpkg\fP.
+Förval är \fI@PREFIX@/var/lib/dpkg\fP.
 .TP
 \fB--showformat=\fP\fIformat\fR
 Denna flagga används för att ange formatet på det utdata \fB--show\fP
@@ -85,6 +85,7 @@
 .UR mailto:wakkerma@debian.org
 <wakkerma@debian.org>
 .UE
+Paths modified by Carsten Klapp to reflect fink distribution, December 2002.
 .sp
 Detta är fri programvara; se GNU General Public License version 2 eller
 senare för kopieringsvillkor. Det finns INGEN garanti.
diff -urN dpkg-1.10.21.orig/man/sv/dpkg-split.8 dpkg-1.10.21/man/sv/dpkg-split.8
--- dpkg-1.10.21.orig/man/sv/dpkg-split.8	2002-02-16 23:04:24.000000000 +0900
+++ dpkg-1.10.21/man/sv/dpkg-split.8	2005-03-18 22:13:37.000000000 +0900
@@ -169,7 +169,7 @@
 Anger en alternativ katalog för kön av delar som väntar på automatisk
 sammanslagning.
 Förvalet är
-.BR /var/lib/dpkg .
+.BR @PREFIX@/var/lib/dpkg .
 .TP
 .BI --partsize\fR|\fB-S " kbyte"
 Anger maximal storlek vid delning, i kilobyte (1024 byte).
@@ -239,7 +239,7 @@
 som genereras.
 .SH FILER
 .TP
-.B /var/lib/dpkg/parts
+.B @PREFIX@/var/lib/dpkg/parts
 Förvald kö-katalog för delfiler som väntar på automatisk sammanslagning.
 
 Filnamnen som används i denna katalog är i ett internt format för
@@ -256,10 +256,11 @@
 och denna manualsida skrevs av Ian Jackson.
 Upphovsrätten © 1995-1996 ligger hos honom och de är släppta under GNU
 General Public Licence; det finns INGEN GARANTI.
+Paths modified by Carsten Klapp to reflect fink distribution, December 2002.
 Se
-.B /usr/share/dpkg/copyright
+.B @PREFIX@/share/dpkg/copyright
 och
-.B /usr/share/common-licenses/GPL
+.B @PREFIX@/share/common-licenses/GPL
 för ytterligare detaljer.
 
 Denna manualsida översattes av Peter Karlsson.
diff -urN dpkg-1.10.21.orig/man/sv/dpkg.8 dpkg-1.10.21/man/sv/dpkg.8
--- dpkg-1.10.21.orig/man/sv/dpkg.8	2002-05-27 02:54:33.000000000 +0900
+++ dpkg-1.10.21/man/sv/dpkg.8	2005-03-18 22:13:37.000000000 +0900
@@ -157,7 +157,7 @@
 \fB-P\fP eller \fB--purge\fP tar bort allting, inklusive
 konfigurationsfiler.
 Om \fB-a\fP eller \fB--pending\fP anges istället för ett paketnamn kommer
-alla uppackade paket som i filen \fI/var/lib/dpkg/status\fP markerats för
+alla uppackade paket som i filen \fI@PREFIX@/var/lib/dpkg/status\fP markerats för
 att tas bort eller rensas att tas bort eller rensas, respektive.
 
 Borttagning av ett paket består av följande steg:
@@ -174,7 +174,7 @@
 .TP
 .BI "dpkg  -p|--print-avail " paket
 Visar detaljer om \fIpaket\fP från
-\fI/var/lib/dpkg/available\fP.
+\fI@PREFIX@/var/lib/dpkg/available\fP.
 .TP
 \fBdpkg --update-avail\fP | \fB--merge-avail\fP \fIPackages-fil\fP
 Uppdatera \fBdpkg\fPs och \fBdselect\fPs lista över vilka paket som finns
@@ -186,7 +186,7 @@
 \fIPackages-filerna\fP som medföljer Debian heter helt enkelt
 \fIPackages\fP.
 \fBdpkg\fP behåller sin lista över tillgängliga paket i
-\fI/var/lib/dpkg/available\fP.
+\fI@PREFIX@/var/lib/dpkg/available\fP.
 .TP
 \fBdpkg -A\fP | \fB--record-avail\fP \fIpaketfil\fP ...
 Uppdatera \fBdpkg\fPs och \fBdselect\fPs lista över vilka paket som finns
@@ -205,7 +205,7 @@
 \fBdpkg -l\fP | \fB--list\fP \fIpaketnamnsmönster\fP ...
 Lista paket som matchar det givna mönstret.
 Om inget \fIpaketnamnsmönster\fP anges listas alla paket i
-\fI/var/lib/dpkg/available\fP.
+\fI@PREFIX@/var/lib/dpkg/available\fP.
 Skalets normala jokertecken tillåts i \fIpaketnamnsmönster\fP.
 (Du måste sannolikt skriva \fIpaketnamnsmönster\fP inom citationstecken
 för att förhindra att skalet expanderar filnamnet.
@@ -310,7 +310,7 @@
 
 .SH FLAGGOR
 Alla flaggorna kan ges både på kommandoraden och i \fBdpkg\fPs
-konfigurationsfil \fI/etc/dpkg/dpkg.cfg\fP.
+konfigurationsfil \fI@PREFIX@/etc/dpkg/dpkg.cfg\fP.
 En rad i konfigurationsfilen är antingen en flagga (precis samma som på
 kommandoraden, men utan inledande bindestreck) eller en kommentar (om den
 börjar med ett \fB#\fR).
@@ -472,13 +472,13 @@
 .TP
 \fB--root=\fP\fIkat\fP | \fB--admindir=\fP\fIkat\fP | \fB--instdir=\fP\fIkat\fP
 Ändra standardkataloger.
-Förval för \fBadmindir\fP är \fI/var/lib/dpkg\fP, och innehåller filer som
+Förval för \fBadmindir\fP är \fI@PREFIX@/var/lib/dpkg\fP, och innehåller filer som
 ger information om status för installerade och ej installerade paket, osv.
 Förval för \fBinstdir\fP är \fI/\fP och är den katalog som skickas som
 parameter till \fBchroot\fP(2) innan paketets installationsfiler körs,
 vilket betyder att skripten ser \fBinstdir\fP som rotkatalog.
 Om du ändrar \fBroot\fP ändrar du \fBinstdir\fP till \fIkat\fP och
-\fBadmindir\fP till \fIkat\fP\fB/var/lib/dpkg\fP.
+\fBadmindir\fP till \fIkat\fP\fB@PREFIX@/var/lib/dpkg\fP.
 .TP
 \fB-O\fP | \fB--selected-only\fP
 Hantera endast paket som markerats för installation.
@@ -496,17 +496,17 @@
 
 .SH FILER
 .TP
-.I /etc/dpkg/dpkg.cfg
+.I @PREFIX@/etc/dpkg/dpkg.cfg
 Konfigurationsfil med förvalda inställningar.
 .P
 Övriga filer som listas här finns i sina förvalda kataloger, se flaggan
 \fB--admindir\fP för information om hur du ändrar placeringen av dessa
 filer.
 .TP
-.I /var/lib/dpkg/available
+.I @PREFIX@/var/lib/dpkg/available
 Lista över tillgängliga paket.
 .TP
-.I /var/lib/dpkg/status
+.I @PREFIX@/var/lib/dpkg/status
 Status för tillgängliga paket.
 Denna fil innehåller information om huruvida ett paket är markerat för
 borttagning eller ej, om det är installerat eller ej, osv.
@@ -555,14 +555,14 @@
 \fB     dpkg -l '*vi*'\fP
 .br
 
-För att se posterna i \fI/var/lib/dpkg/available\fP för två paket:
+För att se posterna i \fI@PREFIX@/var/lib/dpkg/available\fP för två paket:
 .br
 \fB     dpkg --print-avail elvis vim | less\fP
 .br
 
 För att själv söka i paketlistan:
 .br
-\fB     less /var/lib/dpkg/available\fP
+\fB     less @PREFIX@/var/lib/dpkg/available\fP
 .br
 
 För att ta bort det installerade paketet elvis:
@@ -609,6 +609,7 @@
 
 .SH FÖRFATTARE
 .nf
-Se filen \fB/usr/share/doc/dpkg/THANKS\fP för en lista över personer som
+Se filen \fB@PREFIX@/share/doc/dpkg/THANKS\fP för en lista över personer som
 bidragit till \fBdpkg\fP .
+Paths modified by Carsten Klapp to reflect fink distribution, December 2002.
 .fi
diff -urN dpkg-1.10.21.orig/man/sv/dpkg.cfg.5 dpkg-1.10.21/man/sv/dpkg.cfg.5
--- dpkg-1.10.21.orig/man/sv/dpkg.cfg.5	2002-02-16 23:14:15.000000000 +0900
+++ dpkg-1.10.21/man/sv/dpkg.cfg.5	2005-03-18 22:13:37.000000000 +0900
@@ -10,10 +10,11 @@
 Kommentarer är tillåtna genom att inleda en rad med nummertecken
 ("\fB#\fR").
 .SH FILER
-.I /etc/dpkg/dpkg.cfg
+.I @PREFIX@/etc/dpkg/dpkg.cfg
 ~/.dpkg.cfg
 .SH FÖRFATTARE
-Se \fB/usr/share/doc/dpkg/THANKS\fP för listan över personer som har
+Se \fB@PREFIX@/share/doc/dpkg/THANKS\fP för listan över personer som har
 bidragit till \fBdpkg\fP .
+Paths modified by Carsten Klapp to reflect fink distribution, December 2002.
 .SH SE ÄVEN
 .BR dpkg (8)
diff -urN dpkg-1.10.21.orig/man/sv/dselect.8 dpkg-1.10.21/man/sv/dselect.8
--- dpkg-1.10.21.orig/man/sv/dselect.8	2002-02-03 02:46:49.000000000 +0900
+++ dpkg-1.10.21/man/sv/dselect.8	2005-03-18 22:13:37.000000000 +0900
@@ -39,7 +39,7 @@
 programmet.
 .SH FLAGGOR
 Alla flaggorna kan ges både på kommandoraden och i \fBdselect\fPs
-konfigurationsfil \fI/etc/dpkg/dselect.cfg\fP.
+konfigurationsfil \fI@PREFIX@/etc/dpkg/dselect.cfg\fP.
 En rad i konfigurationsfilen är antingen en flagga (precis samma som på
 kommandoraden, men utan inledande bindestreck) eller en kommentar (om den
 börjar med ett \fB#\fR).
@@ -48,7 +48,7 @@
 .B --admindir <katalog>
 Ändrar namnet på katalogen där dpkg letar efter filerna "status", "available"
 m.fl.
-Förval är \fI/var/lib/dpkg\fP
+Förval är \fI@PREFIX@/var/lib/dpkg\fP
 och du bör normalt sett inte behöva ändra det.
 .TP
 .B --debug <fil> | -D<fil>
@@ -465,3 +465,6 @@
 Josip Rodin och Joost Kooij.
 .br
 Dselect, och denna manualsida, är översatt av Peter Karlsson.
+.br
+Paths modified by Carsten Klapp to reflect fink distribution,
+December 2002.
diff -urN dpkg-1.10.21.orig/man/sv/dselect.cfg.5 dpkg-1.10.21/man/sv/dselect.cfg.5
--- dpkg-1.10.21.orig/man/sv/dselect.cfg.5	2002-02-16 23:14:15.000000000 +0900
+++ dpkg-1.10.21/man/sv/dselect.cfg.5	2005-03-18 22:13:37.000000000 +0900
@@ -10,10 +10,11 @@
 Kommentarer är tillåtna genom att inleda en rad med nummertecken
 ("\fB#\fR").
 .SH FILER
-.I /etc/dpkg/dselect.cfg
+.I @PREFIX@/etc/dpkg/dselect.cfg
 ~/.dselect.cfg
 .SH FÖRFATTARE
-Se \fB/usr/share/doc/dpkg/THANKS\fP för listan över personer som har
+Se \fB@PREFIX@/share/doc/dpkg/THANKS\fP för listan över personer som har
 bidragit till \fBdselect\fP .
+Paths modified by Carsten Klapp to reflect fink distribution, December 2002.
 .SH SE ÄVEN
 .BR dselect (8)
diff -urN dpkg-1.10.21.orig/origin.fink dpkg-1.10.21/origin.fink
--- dpkg-1.10.21.orig/origin.fink	1970-01-01 09:00:00.000000000 +0900
+++ dpkg-1.10.21/origin.fink	2005-03-18 22:13:37.000000000 +0900
@@ -0,0 +1,3 @@
+Vendor: Fink
+Vendor-URL: http://fink.sourceforge.net/
+Bugs: http://fink.sourceforge.net/
diff -urN dpkg-1.10.21.orig/scripts/cleanup-info.8 dpkg-1.10.21/scripts/cleanup-info.8
--- dpkg-1.10.21.orig/scripts/cleanup-info.8	1999-12-06 02:49:04.000000000 +0900
+++ dpkg-1.10.21/scripts/cleanup-info.8	2005-03-18 22:13:37.000000000 +0900
@@ -34,7 +34,7 @@
 Output version and exit successfully.
 .SH FILES
 .TP
-.I "/usr/info/dir or <dirname>/dir"
+.I "@PREFIX@/share/info/dir or <dirname>/dir"
 The info directory file. The lock file is named the same, with ".lock" suffix.
 .SH BUGS
 Probably many.
@@ -43,6 +43,7 @@
 .BR info (1).
 .SH AUTHOR
 Copyright (C) 1996 Kim-Minh Kaplan.
+Paths modified by Carsten Klapp to reflect fink distribution, December 2002.
 .sp
 This is free software; see the GNU General Public Licence
 version 2 or later for copying conditions.  There is NO warranty.
diff -urN dpkg-1.10.21.orig/scripts/dpkg-divert.8 dpkg-1.10.21/scripts/dpkg-divert.8
--- dpkg-1.10.21.orig/scripts/dpkg-divert.8	2004-04-26 02:10:57.000000000 +0900
+++ dpkg-1.10.21/scripts/dpkg-divert.8	2005-03-18 22:13:37.000000000 +0900
@@ -37,7 +37,7 @@
 .SH OPTIONS
 .TP
 .I --admindir <directory>
-Set the dpkg data directory to <directory> (default: /var/lib/dpkg).
+Set the dpkg data directory to <directory> (default: @PREFIX@/var/lib/dpkg).
 .TP
 .I --divert <divert-to>
 <divert-to> is the name used by other packages' versions.
@@ -76,7 +76,7 @@
 pointing at the diverted library.
 .SH FILES
 .TP
-.I /var/lib/dpkg/diversions
+.I @PREFIX@/var/lib/dpkg/diversions
 File which contains the current list of diversions of the system. It is
 located in the dpkg administration directory, along with other files
 important to dpkg, such as `status' or `available'.
@@ -90,6 +90,7 @@
 overriding a package's version of a file" for more information.
 .SH AUTHOR
 Copyright (C) 1995 Ian Jackson.
+Paths modified by Carsten Klapp to reflect fink distribution, December 2002.
 .sp
 This is free software; see the GNU General Public Licence
 version 2 or later for copying conditions.  There is NO warranty.
diff -urN dpkg-1.10.21.orig/scripts/dpkg-name.sh dpkg-1.10.21/scripts/dpkg-name.sh
--- dpkg-1.10.21.orig/scripts/dpkg-name.sh	2000-12-24 21:34:20.000000000 +0900
+++ dpkg-1.10.21/scripts/dpkg-name.sh	2005-03-18 22:13:37.000000000 +0900
@@ -10,6 +10,7 @@
 license () {
 echo "# ${prog} ${version} -- ${purpose}
 # Copyright (C) 1995,1996 Erick Branderhorst <branderh@debian.org>.
+# Paths modified by Carsten Klapp to reflect fink distribution, December 2002.
 
 # This is free software; you can redistribute it and/or modify it
 # under the terms of the GNU General Public License as published by the
@@ -19,7 +20,7 @@
 # This is distributed in the hope that it will be useful, but
 # WITHOUT ANY WARRANTY; without even the implied warranty of
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the file
-# /usr/share/common-licenses/GPL for more details."
+# @PREFIX@/share/common-licenses/GPL for more details."
 }
 
 stderr () {
diff -urN dpkg-1.10.21.orig/scripts/dpkg-scanpackages.8 dpkg-1.10.21/scripts/dpkg-scanpackages.8
--- dpkg-1.10.21.orig/scripts/dpkg-scanpackages.8	2003-10-28 01:50:00.000000000 +0900
+++ dpkg-1.10.21/scripts/dpkg-scanpackages.8	2005-03-18 22:13:37.000000000 +0900
@@ -41,7 +41,7 @@
 .PP
 .I binarydir
 is the name of the binary tree to process (for example,
-.BR contrib/binary-i386 ).
+.BR main/binary-darwin-powerpc ).
 It is best to make this relative to the root of the Debian archive,
 because every Filename field in the new Packages file will start with
 this string.
@@ -114,4 +114,6 @@
 .SH SEE ALSO
 .BR dpkg (8),
 .BR dselect (8),
-.BR dpkg-scansources (8).
\ No newline at end of file
+.BR dpkg-scansources (8).
+.SH AUTHOR
+Paths modified by Carsten Klapp to reflect fink distribution, December 2002.
diff -urN dpkg-1.10.21.orig/scripts/dpkg-source.1 dpkg-1.10.21/scripts/dpkg-source.1
--- dpkg-1.10.21.orig/scripts/dpkg-source.1	2003-09-14 10:49:08.000000000 +0900
+++ dpkg-1.10.21/scripts/dpkg-source.1	2005-03-18 22:13:37.000000000 +0900
@@ -806,6 +806,7 @@
 .BR pgp (1).
 .SH AUTHOR
 The utilities and this manpage were written by Ian Jackson.
+Paths modified by Carsten Klapp to reflect fink distribution, December 2002.
 .SH COPYRIGHT
 Copyright (C) 1995-1996 Ian Jackson
 .br
@@ -813,7 +814,7 @@
 .br
 This is free software; see the GNU General Public Licence version 2 or later
 for copying conditions. There is NO WARRANTY.  See
-.B /usr/share/doc/dpkg/copyright
+.B @PREFIX@/share/doc/dpkg/copyright
 and
-.B /usr/share/common-licenses/GPL
+.B @PREFIX@/share/common-licenses/GPL
 for details.
diff -urN dpkg-1.10.21.orig/scripts/dpkg-statoverride.8 dpkg-1.10.21/scripts/dpkg-statoverride.8
--- dpkg-1.10.21.orig/scripts/dpkg-statoverride.8	2001-03-04 23:39:06.000000000 +0900
+++ dpkg-1.10.21/scripts/dpkg-statoverride.8	2005-03-18 22:13:37.000000000 +0900
@@ -51,10 +51,10 @@
 .TP
 .I --admindir
 Change the directory of the dpkg database where the statoverride file is
-also stored. Defaults to /var/lib/dpkg.
+also stored. Defaults to @PREFIX@/var/lib/dpkg.
 .SH FILES
 .TP
-.I /var/lib/dpkg/statoverride
+.I @PREFIX@/var/lib/dpkg/statoverride
 File which contains the current list of stat overrides of the system. It
 is located in the dpkg administration directory, along with other files
 important to dpkg, such as `status' or `available'.
@@ -68,6 +68,7 @@
 .UR mailto:wakkerma@debian.org
 <wakkerma@debian.org>
 .UE
+Paths modified by Carsten Klapp to reflect fink distribution, December 2002.
 .sp
 This is free software; see the GNU General Public Licence version 2 or
 later for copying conditions.  There is NO warranty.
diff -urN dpkg-1.10.21.orig/scripts/install-info.8 dpkg-1.10.21/scripts/install-info.8
--- dpkg-1.10.21.orig/scripts/install-info.8	2002-01-31 23:00:59.000000000 +0900
+++ dpkg-1.10.21/scripts/install-info.8	2005-03-18 22:13:37.000000000 +0900
@@ -156,7 +156,7 @@
 be located in
 .IR infodir .
 The default is
-.BR /usr/info .
+.BR @PREFIX@/share/info .
 .TP
 .BI \-\-align= nnn " [deprecated]"
 Specifies that the first line of the description should be indented at
@@ -266,6 +266,8 @@
 processing steps are shown.
 .SH "SEE ALSO"
 emacs(1), info(1), gzip(1)
+.SH AUTHOR
+Paths modified by Carsten Klapp to reflect fink distribution, December 2002.
 .SH COPYRIGHT
 Copyright 1994, Ian Jackson.
 .B install\-info
diff -urN dpkg-1.10.21.orig/scripts/update-alternatives.8 dpkg-1.10.21/scripts/update-alternatives.8
--- dpkg-1.10.21.orig/scripts/update-alternatives.8	2003-09-15 06:54:42.000000000 +0900
+++ dpkg-1.10.21/scripts/update-alternatives.8	2005-03-18 22:13:37.000000000 +0900
@@ -4,7 +4,7 @@
 .\" it under the terms of the GNU General Public License as published
 .\" by the Free Software Foundation; either version 2 of the License, or
 .\" (at your option) any later version.  There is NO WARRANTY.  You can
-.\" find the GNU GPL in /usr/share/common-licenses/GPL on any Debian system.
+.\" find the GNU GPL in @PREFIX@/share/common-licenses/GPL on any Debian system.
 .TH UPDATE-ALTERNATIVES 8 "19 January 1998" "Debian Project" "dpkg utilities"
 .SH NAME
 update-alternatives \- maintain symbolic links determining default commands
@@ -79,13 +79,13 @@
 .BR nvi (1)
 are both installed on the system, the alternatives system will cause
 the generic name
-.I /usr/bin/editor
+.I @PREFIX@/bin/editor
 to refer to
-.I /usr/bin/nvi
+.I @PREFIX@/bin/nvi
 by default.  The system administrator can override this and cause
 it
 to refer to
-.I /usr/bin/ed
+.I @PREFIX@/bin/ed
 instead,
 and the alternatives system will not alter this setting until explicitly
 requested to do so.
@@ -97,7 +97,7 @@
 which in turn is a symbolic link to the actual file referenced.
 This is done so that the system administrator's changes can be confined
 within the
-.I /etc
+.I @PREFIX@/etc
 directory: the FHS (q.v.) gives reasons why this is a Good Thing.
 .PP
 When each package
@@ -117,9 +117,9 @@
 of the
 .BR vi (1)
 editor are installed, the man page referenced by
-.I /usr/share/man/man1/vi.1
+.I @PREFIX@/share/man/man1/vi.1
 should correspond to the executable referenced by
-.IR /usr/bin/vi .
+.IR @PREFIX@/bin/vi .
 .B update-alternatives
 handles this by means of
 .I master
@@ -182,7 +182,7 @@
 .TP
 generic name
 A name, like
-.IR /usr/bin/editor ,
+.IR @PREFIX@/bin/editor ,
 which refers, via the alternatives system, to one of a number of
 files of similar function.
 .TP
@@ -197,12 +197,12 @@
 .TP
 alternatives directory
 A directory, by default
-.IR /etc/alternatives ,
+.IR @PREFIX@/etc/alternatives ,
 containing the symlinks.
 .TP
 administrative directory
 A directory, by default
-.IR /var/lib/dpkg/alternatives ,
+.IR @PREFIX@/var/lib/dpkg/alternatives ,
 containing
 .BR update-alternatives '
 state information.
@@ -401,13 +401,13 @@
 mode.
 .SH FILES
 .TP
-.I /etc/alternatives/
+.I @PREFIX@/etc/alternatives/
 The default alternatives directory.
 Can be overridden by the
 .B --altdir
 option.
 .TP
-.I /var/lib/dpkg/alternatives/
+.I @PREFIX@/var/lib/dpkg/alternatives/
 The default administration directory.
 Can be overridden by the
 .B --admindir
@@ -439,12 +439,13 @@
 Debian update-alternatives is copyright 1995
 Ian Jackson.  It is free software; see the GNU General Public Licence
 version 2 or later for copying conditions.  There is NO warranty.
+Paths modified by Carsten Klapp to reflect fink distribution, December 2002.
 .PP
 This manual page is copyright 1997/98 Charles Briscoe-Smith.
 This is free documentation; see the GNU General Public Licence
 version 2 or later for copying conditions.  There is NO WARRANTY.
 .PP
-You can find the GNU GPL in /usr/share/common-licenses/GPL on any Debian system.
+You can find the GNU GPL in @PREFIX@/share/common-licenses/GPL on any Debian system.
 .SH "SEE ALSO"
 .BR ln (1),
 FHS, the Filesystem Hierarchy Standard.
diff -urN dpkg-1.10.21.orig/scripts/update-alternatives.pl dpkg-1.10.21/scripts/update-alternatives.pl
--- dpkg-1.10.21.orig/scripts/update-alternatives.pl	2003-09-17 02:51:15.000000000 +0900
+++ dpkg-1.10.21/scripts/update-alternatives.pl	2005-03-18 22:13:37.000000000 +0900
@@ -59,7 +59,7 @@
 sub quit { print STDERR "update-alternatives: @_\n"; exit(2); }
 sub badusage { print STDERR "update-alternatives: @_\n\n"; &usageversion; exit(2); }
 
-$altdir= '/etc/alternatives';
+$altdir= '@PREFIX@/etc/alternatives';
 $admindir= $admindir . '/alternatives';
 $testmode= 0;
 $verbosemode= 0;
diff -urN dpkg-1.10.21.orig/split/Makefile.in dpkg-1.10.21/split/Makefile.in
--- dpkg-1.10.21.orig/split/Makefile.in	2002-05-20 13:40:29.000000000 +0900
+++ dpkg-1.10.21/split/Makefile.in	2005-03-18 22:13:37.000000000 +0900
@@ -42,7 +42,7 @@
 	$(INSTALL_DATA) $(srcdir)/dpkg-split.8 $(DESTDIR)/$(man8dir)
 
 dpkg-split: $(SPLIT_OBJECTS) 
-	$(CC) $(LDFLAGS) -o $@ $(SPLIT_OBJECTS) $(LIBS) $(NLS_LIBS)
+	$(CC) $(LDFLAGS) $(EXEFLAGS) -o $@ $(SPLIT_OBJECTS) $(LIBS) $(NLS_LIBS)
 
 split.o: split.c
 	$(CC) $(ALL_CFLAGS) -DMKSPLITSCRIPT=\"$(dpkglibdir)/mksplit\" -c $<
diff -urN dpkg-1.10.21.orig/split/dpkg-split.8 dpkg-1.10.21/split/dpkg-split.8
--- dpkg-1.10.21.orig/split/dpkg-split.8	2002-01-31 23:00:59.000000000 +0900
+++ dpkg-1.10.21/split/dpkg-split.8	2005-03-18 22:13:37.000000000 +0900
@@ -162,7 +162,7 @@
 .BI --depotdir " directory"
 Specifies an alternative directory for the queue of parts awaiting
 automatic reassembly.  The default is
-.BR /var/lib/dpkg .
+.BR @PREFIX@/var/lib/dpkg .
 .TP
 .BI --partsize\fR|\fB-S " kbytes"
 Specifies the maximum part size when splitting, in kilobytes (1024
@@ -234,7 +234,7 @@
 is not present in the filenames generated.
 .SH FILES
 .TP
-.B /var/lib/dpkg/parts
+.B @PREFIX@/var/lib/dpkg/parts
 The default queue directory for part files awaiting automatic
 reassembly.
 
@@ -253,7 +253,8 @@
 Copyright (C) 1995-1996
 by him and released under the GNU General Public Licence; there is NO
 WARRANTY.  See
-.B /usr/share/dpkg/copyright
+.B @PREFIX@/share/dpkg/copyright
 and
-.B /usr/share/common-licenses/GPL
+.B @PREFIX@/share/common-licenses/GPL
 for details.
+Paths modified by Carsten Klapp to reflect fink distribution, December 2002.
diff -urN dpkg-1.10.21.orig/utils/Makefile.in dpkg-1.10.21/utils/Makefile.in
--- dpkg-1.10.21.orig/utils/Makefile.in	2002-08-25 04:54:19.000000000 +0900
+++ dpkg-1.10.21/utils/Makefile.in	2005-03-18 22:13:37.000000000 +0900
@@ -72,9 +72,9 @@
 	$(INSTALL_DATA) $(srcdir)/$(MD5_MANPAGES) $(DESTDIR)/$(man1dir)
 
 start-stop-daemon: $(SSD_OBJECTS) ../lib/libdpkg.a
-	$(CC) $(LDFLAGS) -o $@ $(SSD_OBJECTS) $(LIBS) $(SSD_LIBS)
+	$(CC) $(LDFLAGS) $(EXEFLAGS) -o $@ $(SSD_OBJECTS) $(LIBS) $(SSD_LIBS)
 
 md5sum-static: LDFLAGS += -static
 md5sum-static: ZLIB_LIBS = $(ZLIBS_LIBS_ALSO_STATIC)
 md5sum md5sum-static: $(MD5_OBJECTS) ../lib/libdpkg.a
-	$(CC) $(LDFLAGS) -o $@ $(MD5_OBJECTS) $(LIBS) $(NLS_LIBS)
+	$(CC) $(LDFLAGS) $(EXEFLAGS) -o $@ $(MD5_OBJECTS) $(LIBS) $(NLS_LIBS)
diff -Nurd dpkg-1.10.21.orig/main/help.c dpkg-1.10.21/main/help.c
--- dpkg-1.10.21.orig/main/help.c	Sat Oct 25 16:03:21 2003
+++ dpkg-1.10.21/main/help.c	Thu Mar 10 03:56:22 2005
@@ -417,6 +417,26 @@
     
   debug(dbg_veryverbose, "isdirectoryinuse `%s' (except %s)", file->name,
         pkg ? pkg->name : "<none>");
+
+  /* FINK LOCAL begin */
+
+  /*
+   * Darwin has symlinks /etc -> /private/etc and /var -> /private/var
+   * instead of actual /etc and /var dirs. If dpkg removes the last
+   * pkg that it has record of having installed a file in one of those
+   * top-level dirs, it will try to remove the dir (since it thinks
+   * it's an empty dir) and it will succeed (since it's just unlinking
+   * a symlink, not trying to remove a dir that is not actually
+   * empty). That's Bad. Here we make sure these top-level dirs are
+   * never thought to be empty.
+   */
+  if( !strcmp(file->name,"/etc") || !strcmp(file->name,"/tmp") || !strcmp(file->name,"/var") ) {
+    debug(dbg_veryverbose, "isdirectoryinuse precious!");
+    return 1;
+  }
+
+  /* FINK LOCAL end */
+
   for (packageslump= file->packages; packageslump; packageslump= packageslump->more) {
     debug(dbg_veryverbose, "isdirectoryinuse packageslump %s ...",
           packageslump->pkgs[0] ? packageslump->pkgs[0]->name : "<none>");
diff -ur dpkg-1.10.21.orig/include/dpkg.h.in dpkg-1.10.21/include/dpkg.h.in
--- dpkg-1.10.21.orig/include/dpkg.h.in	2004-04-24 17:14:21.000000000 -0400
+++ dpkg-1.10.21/include/dpkg.h.in	2005-03-18 01:59:16.000000000 -0500
@@ -118,13 +118,13 @@
 
 #define ARCHIVE_FILENAME_PATTERN "*.deb"
 
-#define BACKEND		"dpkg-deb"
-#define DPKGQUERY	"dpkg-query"
-#define SPLITTER	"dpkg-split"
-#define MD5SUM		"md5sum"
-#define DSELECT		"dselect"
-#define DPKG		"dpkg"
-#define DEBSIGVERIFY	"/usr/bin/debsig-verify"
+#define BACKEND		"@PREFIX@/bin/dpkg-deb"
+#define DPKGQUERY	"@PREFIX@/bin/dpkg-query"
+#define SPLITTER	"@PREFIX@/bin/dpkg-split"
+#define MD5SUM		"@PREFIX@/bin/md5sum"
+#define DSELECT		"@PREFIX@/bin/dselect"
+#define DPKG		"@PREFIX@/bin/dpkg"
+#define DEBSIGVERIFY	"@PREFIX@/bin/debsig-verify"
 
 #define TAR		"tar"
 #define GZIP		"gzip"
diff -ruN dpkg-1.10.21/lib/mlib.c dpkg-1.10.21-patched/lib/mlib.c
--- dpkg-1.10.21/lib/mlib.c	2004-03-08 12:13:09.000000000 -0500
+++ dpkg-1.10.21-patched/lib/mlib.c	2005-06-20 04:10:00.000000000 -0400
@@ -189,7 +189,7 @@
   switch(data->type) {
     case BUFFER_WRITE_BUF:
       memcpy(data->data.ptr, buf, length);
-      (char*)data->data.ptr += length;
+      data->data.ptr = (char*)data->data.ptr + length;
       break;
     case BUFFER_WRITE_VBUF:
       varbufaddbuf((struct varbuf *)data->data.ptr, buf, length);
diff -Nurd -x'*~' dpkg-1.10.21.orig/dpkg-deb/build.c dpkg-1.10.21/dpkg-deb/build.c
--- dpkg-1.10.21.orig/dpkg-deb/build.c	2003-10-25 16:03:21.000000000 -0400
+++ dpkg-1.10.21/dpkg-deb/build.c	2006-12-18 04:52:19.000000000 -0500
@@ -445,7 +445,7 @@
     m_dup2(p1[0],0); close(p1[0]); close(p1[1]);
     m_dup2(p2[1],1); close(p2[0]); close(p2[1]);
     if (chdir(directory)) ohshite(_("failed to chdir to `%.255s'"),directory);
-    execlp(TAR,"tar","-cf", "-", "-T", "-", "--null", "--no-recursion", (char*)0);
+    execlp(TAR,"tar","-cf", "-", "--null", "-T", "-", "--no-recursion", (char*)0);
     ohshite(_("failed to exec tar -cf"));
   }
   close(p1[0]);
diff -Naur dpkg-1.10.21/lib/mlib.c dpkg-new/lib/mlib.c
--- dpkg-1.10.21/lib/mlib.c	2007-03-10 12:20:35.000000000 -0500
+++ dpkg-new/lib/mlib.c	2007-03-10 15:13:48.000000000 -0500
@@ -110,7 +110,9 @@
   if (WIFEXITED(status)) {
     n= WEXITSTATUS(status); if (!n) return n;
     if(!(flags & PROCNOERR)) {
-      if(flags & PROCWARN)
+      /* FINK LOCAL: Tar status 1 is a warning. */
+      if((flags & PROCWARN) || (n == 1 && strncmp(description, "tar", 3) == 0))
+      /* FINK LOCAL */
         fprintf(stderr, _("dpkg: warning - %s returned error exit status %d\n"),description,n);
       else
         ohshit(_("subprocess %s returned error exit status %d"),description,n);
